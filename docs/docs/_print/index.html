<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.121.2">
<link rel="canonical" type="text/html" href="/docs/">
<link rel="alternate" type="application/rss&#43;xml" href="/docs/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Documentation | Wiseinf</title>
<meta name="description" content="Cloud Native Application Cost Management And Optimization Platform">
<meta property="og:title" content="Documentation" />
<meta property="og:description" content="Cloud Native Application Cost Management And Optimization Platform" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/" /><meta property="og:site_name" content="Wiseinf" />

<meta itemprop="name" content="Documentation">
<meta itemprop="description" content="Cloud Native Application Cost Management And Optimization Platform"><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Documentation"/>
<meta name="twitter:description" content="Cloud Native Application Cost Management And Optimization Platform"/>




<link rel="preload" href="/scss/main.min.b9f908f9939278827beae3d5d8ede093dde52fd2c4bcdf7ba620a3d524d46875.css" as="style">
<link href="/scss/main.min.b9f908f9939278827beae3d5d8ede093dde52fd2c4bcdf7ba620a3d524d46875.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-STB7S5D1BR"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-STB7S5D1BR');
}
</script>
  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="90" height="60" viewBox="0 0 90 60" enable-background="new 0 0 90 60"><image id="image0" width="90" height="60" x="0" y="0" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAAA8CAMAAADR2113AAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUVBMVEUAAAA/R8s/ScwAoeci u1UisEwisEwzzGYhsUshsUwisUsAf38hsUshsEsisEwAqlUhsEwhsEshsU0isUoisUwA/wA/SMwA ougisUyZ2er///8l8mu7AAAAFnRSTlMAmUyZD4XZBWzxfQKoqKMDgutMd6EBrgesWwAAAAFiS0dE GnVn5DIAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAHdElNRQfmCwIILDYpiAQqAAAAuElEQVRYw+3V yQ7CMAxFUQMZmpZOKQXz/z8KRYLSxrCAFwkJ322ks4jimGhqc5TaTke7kxTNGet4yllDQp/Tvgh8 L5QVkt7zczWO9kuZuWlRdMHrOhBtQkL3HkNbTrMY2gm0w9AsBaGjSMf/pTPedc4XkvFdZ5xGKhN6 QH1PVb2SDyOKJmqWMhGObrt+vudhRNLXdfDYjZ4IS9/mMkZ60bf0m5T+efospbTSSiuttNJKK620 0kpnoC8F20SzlPhKcAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMi0xMS0wMlQwODo0NDo1NCswMDow MEh3G+0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjItMTEtMDJUMDg6NDQ6NTQrMDA6MDA5KqNRAAAA KHRFWHRkYXRlOnRpbWVzdGFtcAAyMDIyLTExLTAyVDA4OjQ0OjU0KzAwOjAwbj+CjgAAAABJRU5E rkJggg=="/></svg></span><span class="navbar-brand__name">Wiseinf</span></a>
<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
  <ul class="navbar-nav mt-2 mt-lg-0">
    <li class="nav-item dropdown mr-4 d-none d-lg-block">
      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
      aria-haspopup="true" aria-expanded="false"><span>Product</span></a>
      <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
        <a class="dropdown-item" href="/products/cluster-optimizer"> Cluster Optimizer: Cloud Native Optimization Platform </a>
        <a class="dropdown-item" href="/products/wisecost"> Wisecost: Cloud Native Cost Management Platform </a>
        <a class="dropdown-item" href="/products/ruyi"> Ruyi: Cloud Native Cluster Autoscaling Engine</a>
      </div>
      </li>
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
      <a class="nav-link active" href="/docs/"><span class="active">Documentation</span></a>
      </li>
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
      <a class="nav-link" href="/pricing/"><span>Price</span></a>
      </li>
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
      <a class="nav-link" href="/services/"><span>Service</span></a>
      </li>
      <li class="nav-item dropdown mr-4 d-none d-lg-block">
      

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	English
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/zh-cn/docs/">中文</a>
	
</div></li>
    </ul>
</div>
<div class="navbar-nav d-none d-lg-block">
  
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/docs/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Documentation</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-f5c816802ec0d033e8fcd3e337a29c96">Cluster Optimizer: Cloud native cluster optimization platform</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>1.1: <a href="#pg-319d547359ece75bc8828c67e98da1cf">Installation and Deployment</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.2: <a href="#pg-b2333a43b3e24210bc2c1c8357409f74">Import Alibaba Cloud Cluster</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.3: <a href="#pg-cbcde0fe6010529c37131204023b7771">Cluster Overview</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.4: <a href="#pg-a8e419965395a39fb951fa1137e17781">Node Pool Optimization</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.5: <a href="#pg-60fb2e0d684559cca943f114bbb23b17">Node Optimization</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.6: <a href="#pg-41a35fffa4c7fd6466728b424aab2998">Disk Optimization</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.7: <a href="#pg-ec4c2c1254809868f664e7266e289938">Persistent Volume Optimization</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.8: <a href="#pg-077e156274fb7d892f55e54292de72da">Application Optimization</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.9: <a href="#pg-ec768fe1731869c4e5952255d641c790">Cluster Optimization Operations</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>1.9.1: <a href="#pg-b44e424da94f6990e4d02978cbc967a9">Adjust Node Pool</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.9.2: <a href="#pg-5db2c5107c2c5b867fd9b6b316f9f181">Adjust Nodes</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.9.3: <a href="#pg-25ff9c4e42700bf130854451e52d2fb1">Adjusting disks</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.9.4: <a href="#pg-cf75811c0797e8dc5e66957ac96debfb">Deleting Persistent Volume</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>1.10: <a href="#pg-da59e19291384c4c46aa84925c92b66c"></a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-dacaf1e373c2472c1efbf2a9b2acf54b">Wisecost: A Cloud-native Cost Management and Optimization Platform</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.1: <a href="#pg-d1501d8c0fcaf4a0c0134a7c69ba635e">Installation and Deployment</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.2: <a href="#pg-f8724eef5ecfc709ba9ec953f1658ee2">Import Alibaba Cloud Cluster</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3: <a href="#pg-8aaf6cb4995450b6fc76e7ad887b0eb3">View Node Cost</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.4: <a href="#pg-79c3c5401e75cd51b9d3c28865234518">Viewing Cluster Costs</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.5: <a href="#pg-aea197f3575cb0df1ded1df55290950c">View Application Costs</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.6: <a href="#pg-0d313d792f0ef08d3b1695b67d8bddea">Cost Optimization</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.7: <a href="#pg-eb8dcf79b1b7f912ed56305be6f0297f">Development Manual</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.7.1: <a href="#pg-ac38a1975f478ccb8a2806eda6f684b8">API Reference</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.7.2: <a href="#pg-7498afe225cc47a707df513f40a91ac6"></a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-01e1381825635108c13ad0b6aeb191c7">Ruyi: Cloud native cluster autoscaling engine</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.1: <a href="#pg-cc7d60fb60c1ccaac59ce2ceb1c8f961">Installation and Deployment</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.2: <a href="#pg-802a1bd58ef9bdae22313856241b0f7f">Automatic Scaling</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.3: <a href="#pg-1d9cdd8985d61af6eb19f64872c6238c">Configuration</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.3.1: <a href="#pg-743cd90d3c1ba1709b66bd0042c39a58">Command Line Arguments</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.3.2: <a href="#pg-311560d092771780a32c6c35dc00ad8c"></a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>3.4: <a href="#pg-db1b774ac87b4e433a86ed299f8a808f">Monitoring</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.5: <a href="#pg-583a7f09d0feaa261a5b4bd84a75d62a">FAQ</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.6: <a href="#pg-9bc01fd7dcd71c629d9b0497e453387a"></a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  

    </ul>


<div class="content">
      

<div class="pageinfo pageinfo-primary">
<p>This section includes all documents related to the products, services, and solutions provided by the company.</p>

</div>


</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-f5c816802ec0d033e8fcd3e337a29c96">1 - Cluster Optimizer: Cloud native cluster optimization platform</h1>
    <div class="lead">Cloud native cluster optimization platform.</div>
	

<div class="pageinfo pageinfo-primary">
<p>The cluster optimizer is a cloud native cluster optimization platform, provides capabilities for optimizing cloud native kubernetes clusters.</p>

</div>

<p>Cluster optimizer can assist users in optimizing their cloud native kubernetes clusters, with key features including:</p>
<ul>
<li>Providing a variety of optimization strategies, including recommendations for node groups, nodes, disks, Persistent volumes, and applications.</li>
<li>Cloud account (credential) management and cluster management.</li>
</ul>
<p>Also, it provides following features in business version:</p>
<ul>
<li>Automated action on adjust nodes, reduce persistet volumes, and reduce application resource and so on.</li>
<li>Advanced optimization strategies with more intelligent models.</li>
<li>Alert.</li>
<li>Authentication and authorization.</li>
<li>High availibility.</li>
<li>&hellip;</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-319d547359ece75bc8828c67e98da1cf">1.1 - Installation and Deployment</h1>
    <div class="lead">This page describes steps to install cluster optimizer.</div>
	

<div class="pageinfo pageinfo-primary">
<p>This page describes steps to install cluster optimizer.</p>

</div>

<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Mysql database, version 5.7 or higher</li>
<li>Kubernetes cluster, version 1.22 or higher</li>
</ul>
<h2 id="clone-installation-scripts">Clone Installation Scripts</h2>
<ol>
<li>Open the console, enter <code>git clone https://github.com/wiseinf/setup.git</code>, and clone the installation scripts to your local machine.
We provide two repository addresses for you to clone to your local machine according to your needs.</li>
</ol>
<table>
<thead>
<tr>
<th>Repository</th>
<th style="text-align:left">Repository Address</th>
</tr>
</thead>
<tbody>
<tr>
<td>Github</td>
<td style="text-align:left"><a href="https://github.com/wiseinf/setup.git">https://github.com/wiseinf/setup.git</a></td>
</tr>
<tr>
<td>Gitee</td>
<td style="text-align:left"><a href="https://gitee.com/wiseinf/setup.git">https://gitee.com/wiseinf/setup.git</a></td>
</tr>
</tbody>
</table>
<blockquote>
<p>The subsequent steps assume that the <code>setup</code> library has been cloned to the user&rsquo;s home directory. If it hasn&rsquo;t been cloned to the user&rsquo;s home directory, you need to adjust the file paths in the commands accordingly.</p>
</blockquote>
<h2 id="initialize-the-database">Initialize the Database</h2>
<blockquote>
<p>Assuming the Mysql database host address is: <code>127.0.0.1</code>.</p>
</blockquote>
<ol>
<li>
<p>In the console, execute the command <code>mysql -h127.0.0.1 -uroot</code>, enter the password, and log in to the mysql database. Where <code>127.0.0.1</code> is the Mysql host address.</p>
</li>
<li>
<p>At the <code>mysql&gt;</code> prompt, execute the following command to create the <code>optimizer</code> database, and the corresponding tables will be automatically created by the application later.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    mysql&gt; source ~/setup/clusteroptimizer/sql/create_database.sql
</span></span></code></pre></div><blockquote>
<p>Note: Please pay attention to the risk of data loss. If the <code>optimizer</code> database already exists in mysql database, the above script will first delete the <code>optimizer</code> database and then create a new <code>optimizer</code> database.</p>
</blockquote>
</li>
<li>
<p>At the <code>mysql&gt;</code> prompt, execute the following command to create the <code>optimizer</code> user (default password is <code>Optimizer~</code>) and grant it full access permissions to the <code>optimizer</code> database.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    mysql&gt; source ~/setup/clusteroptimizer/sql/create_user.sql
</span></span></code></pre></div></li>
<li>
<p>In the console, execute the command <code>mysql -h127.0.0.1 -uoptimizer</code>, enter the password (default password is <code>Optimizer~</code>), and log in to the mysql database.</p>
</li>
<li>
<p>At the <code>mysql&gt;</code> prompt, execute <code>show database</code> to confirm that the <code>optimizer</code> database has been created. You can use <code>select</code> statements (e.g. <code>select * from storage.pv</code>) to query the corresponding data tables in the library to confirm whether the user&rsquo;s permissions are normal.</p>
</li>
<li>
<p>At this point, the database initialization is complete.</p>
</li>
</ol>
<h2 id="deploy-application">Deploy Application</h2>
<ol>
<li>Apply the following file to the cluster with <code>kubectl apply -f ~/setup/clusteroptimizer/namespace.yaml</code>, creating the namespace <code>wiseinf-system</code>.

    
      
    
    
    
    
    	
    
    
    
    
    
    
      
      
      
    
    
    
    
    
    
      <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Namespace</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>: 
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span></code></pre></div>
    
</li>
<li>Adjust the <strong>ConfigMap</strong> <code>optimizer-conf</code> in the file <code>~/setup/clusteroptimizer/optimizer.yaml</code> based on the configuration of Mysql, and set its configuration item <code>optimize</code> and <code>kubestore</code> under <code>dataSourceName: &quot;optimizer:Optimizer~@tcp(mysql:3306)/optimizer?charset=utf8mb4&amp;parseTime=true&amp;&amp;loc=Local</code> to the corresponding information of the Mysql database&rsquo;s username, user password, database address, and port.</li>
<li>Apply the following file to the cluster with <code>kubectl apply -f ~/setup/clusteroptimizer/optimizer.yaml</code>, deploying the application <strong>Cluster Optimizer</strong>.

    
      
    
    
    
    
    	
    
    
    
    
    
    
      
      
      
    
    
    
    
    
    
      <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>---
    </span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer-nginx-config</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">optimizer</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">default.conf</span>: |-<span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      server {
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        listen 80;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        location / {
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          root /usr/share/nginx/html/;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          include /etc/nginx/mime.types;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          try_files $uri $uri/ /index.html;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          location /api/ {
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            rewrite ^/api/(.*) /$1 break;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_set_header Host $host;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_set_header X-Real-IP $remote_addr;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_set_header X-NginX-Proxy true;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_pass http://localhost:7070;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          }
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      }</span>      
    </span></span><span style="display:flex;"><span>---
    </span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer-conf</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">optimizer</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">cluster-optimizer.yaml</span>: |-<span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    server:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      port: 7070
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    engine:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      maxQueryDuration: 1h
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    storage:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      type: mysql
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      parameters:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        dataSourceName: &#34;optimizer:Optimizer~@tcp(mysql:3306)/optimizer?charset=utf8mb4&amp;parseTime=true&amp;loc=Local&#34;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        maxOpenConns: 10
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    optimize:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      dataSource:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        name: &#34;optimizer:Optimizer~@tcp(mysql:3306)/optimizer?charset=utf8mb4&amp;parseTime=true&amp;loc=Local&#34;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        maxOpenConns: 10
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      strategyConfigs:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;OOM&#34;: 
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          enabled: true
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;Resource Recommendation&#34;:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          enabled: true
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;No Quota&#34;:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          enabled: true
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      enabled: true</span>    
    </span></span><span style="display:flex;"><span>
    </span></span><span style="display:flex;"><span>---
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Deployment</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">apps/v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">optimizer</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">1</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">revisionHistoryLimit</span>: <span style="color:#ae81ff">10</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">matchLabels</span>:
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">app</span>: <span style="color:#ae81ff">optimizer</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>        <span style="color:#f92672">app</span>: <span style="color:#ae81ff">optimizer</span>
    </span></span><span style="display:flex;"><span>        <span style="color:#f92672">group</span>: <span style="color:#ae81ff">wiseinf</span>
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">dnsPolicy</span>: <span style="color:#ae81ff">ClusterFirstWithHostNet</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">securityContext</span>:
    </span></span><span style="display:flex;"><span>        <span style="color:#f92672">runAsUser</span>: <span style="color:#ae81ff">0</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">containers</span>:
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer-ui</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">image</span>: <span style="color:#ae81ff">wiseinf/cluster-optimizer-ui:1.0.0-preview</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">imagePullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">volumeMounts</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer-nginx-config</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/etc/nginx/conf.d</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">ports</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">80</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">resources</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">requests</span>:
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">100m</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">200M</span>
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">limits</span>:
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">1000m</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">1G</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">image</span>: <span style="color:#ae81ff">wiseinf/optimizer:1.0.0-preview</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">command</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;/wiseinf/optimizer&#34;</span>
    </span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;--features=APIServer&#34;</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">imagePullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">volumeMounts</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer-data-volume</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/wiseinf/data</span>
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer-logs-volume</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/wiseinf/logs</span>
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer-conf-volume</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/wiseinf/conf</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">ports</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">7070</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">resources</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">requests</span>:
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">100m</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">200M</span>
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">limits</span>:
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">1000m</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">1G</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">volumes</span>:
    </span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Config for optimizer-ui</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer-nginx-config</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">configMap</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer-nginx-config</span>
    </span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Configs for optimizer</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer-data-volume</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">hostPath</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/optimizer/data</span>
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">type</span>: <span style="color:#ae81ff">DirectoryOrCreate</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer-logs-volume</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">hostPath</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/optimizer/logs</span>
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">type</span>: <span style="color:#ae81ff">DirectoryOrCreate</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer-conf-volume</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">configMap</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer-conf</span>
    </span></span><span style="display:flex;"><span>---
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">optimizer</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>:  <span style="color:#ae81ff">optimizer</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
    </span></span><span style="display:flex;"><span>    - <span style="color:#f92672">port</span>: <span style="color:#ae81ff">80</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">nodePort</span>: <span style="color:#ae81ff">30000</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">80</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">optimizer</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">NodePort</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e"># ---</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e"># apiVersion: networking.k8s.io/v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e"># kind: Ingress</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e"># metadata:</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#   name: optimizer</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#   namespace: wiseinf-system</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e"># spec:</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#   rules:</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#     - host: optimizer.{your domain name}</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#       http:</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#         paths:</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#           - backend:</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#               service:</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#                 name: optimizer</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#                 port:</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#                   number: 80</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#             path: /</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#             pathType: ImplementationSpecific</span></span></span></code></pre></div>
    

<blockquote>
<p>Note:</p>
</blockquote>
</li>
<li>Access URL <code>http://localhost</code> via <code>kubectl port-forward svc/optimizer 80:80</code>, and you can see the Cluster Optimizer homepage.</li>
<li>At this point, the application <strong>Cluster Optimizer</strong> has been deployed.</li>
</ol>
<h2 id="next-step-import-cluster">Next Step: Import Cluster</h2>
<p>The next step is to import a cluster and view its various costs. See <a href="/docs/clusteroptimizer/import-aws">Import AWS Cluster</a> or <a href="/docs/clusteroptimizer/import-aliyun">Import Aliyun Cluster</a> for details.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b2333a43b3e24210bc2c1c8357409f74">1.2 - Import Alibaba Cloud Cluster</h1>
    <div class="lead">This section describes the detailed steps for importing Alibaba Cloud clusters.</div>
	

<div class="pageinfo pageinfo-primary">
<p>This section describes the detailed steps for importing Alibaba Cloud clusters.</p>

</div>

<h2 id="preconditions">Preconditions</h2>
<ol>
<li>
<p>Obtain the Alibaba Cloud Access Key and Access Key Secret and have the following permissions. For the specific application process, please refer to <a href="https://help.aliyun.com/document_detail/116401.htm">Create Access Key</a>.</p>
<table>
<thead>
<tr>
<th>Services</th>
<th>Permissions</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cloud Server (ECS)</td>
<td>ecs:DescribeDisks<br/> ecs:DescribeInstances<br/> ecs:DescribeRegions</td>
<td>This permission is required to obtain disk, instance and region information</td>
</tr>
<tr>
<td>Container Service Kubernetes version (CS)</td>
<td>cs:DescribeClusterNodePools<br/> cs:DescribeClusterNodePoolDetail<br/> cs:DescribeClusters <br/> cs:DescribeClusterUserKubeconfig<br/> cs:DescribeClusterNodes</td>
<td>This permission is required to obtain the cluster, node pool, Node, Kubeconfig and other information</td>
</tr>
</tbody>
</table>
<p>The permission policy file is described as follows. You can import the policy directly in the Alibaba Cloud console. For details, please refer to [Creating a custom permission policy through script editing mode](<a href="https://help.aliyun.com/zh/ram/user-">https://help.aliyun.com/zh/ram/user-</a> guide/create-a-custom-policy#section-kwn-gu8-48m)</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">&#34;Version&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">&#34;Statement&#34;</span>: [
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&#34;Effect&#34;</span>: <span style="color:#e6db74">&#34;Allow&#34;</span>,
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&#34;Action&#34;</span>: [
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;ecs:DescribeDisks&#34;</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;ecs:DescribeInstances&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;ecs:DescribeRegions&#34;</span>
</span></span><span style="display:flex;"><span>       ],
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&#34;Resource&#34;</span>: [
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;*&#34;</span>
</span></span><span style="display:flex;"><span>       ],
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&#34;Condition&#34;</span>: {}
</span></span><span style="display:flex;"><span>     },
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&#34;Effect&#34;</span>: <span style="color:#e6db74">&#34;Allow&#34;</span>,
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&#34;Action&#34;</span>: [
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;cs:DescribeClusterNodePools&#34;</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;cs:DescribeClusterNodePoolDetail&#34;</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;cs:DescribeClusters&#34;</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;cs:DescribeClusterUserKubeconfig&#34;</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;cs:DescribeClusterNodes&#34;</span>
</span></span><span style="display:flex;"><span>       ],
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&#34;Resource&#34;</span>: [
</span></span><span style="display:flex;"><span>         <span style="color:#e6db74">&#34;*&#34;</span>
</span></span><span style="display:flex;"><span>       ],
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&#34;Condition&#34;</span>: {}
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>   ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol start="2">
<li>Alibaba Cloud Kubernetes cluster Kubeconfig. For cluster versions 1.20 and above, it is recommended to use ACK cluster. For details, please see <a href="https://help.aliyun.com/zh/ack/">Container Service Kubernetes version</a>. Kubeconfig requires the following permissions.
<table>
<thead>
<tr>
<th>Resources</th>
<th>Permissions</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Node</td>
<td>List<br/>Get<br/> Watch</td>
<td>Get node information</td>
</tr>
<tr>
<td>Pod</td>
<td>List<br/>Get<br/> Watch</td>
<td>Get Pod information</td>
</tr>
<tr>
<td>Namespace</td>
<td>List<br/>Get<br/> Watch</td>
<td>Get Namespace information</td>
</tr>
<tr>
<td>Service</td>
<td>List<br/>Get<br/> Watch</td>
<td>Get Service information</td>
</tr>
<tr>
<td>Persistent Volume<br/> Persistent Volume Claim</td>
<td>List<br/>Get<br/> Watch</td>
<td>Get Persistent Volume, Persistent Volume Claim information</td>
</tr>
<tr>
<td>Deployment<br/>StatefulSet<br/>DaemonSet<br/><br/>ReplicaSet<br>ReplicationControllers<br/></td>
<td>List<br/>Get<br/> Watch</td>
<td>Get Deployment, StatefulSet, DaemonSet, ReplicaSet , ReplicationContoller information</td>
</tr>
<tr>
<td>Job<br/>CronJob</td>
<td>List<br/>Get<br/> Watch</td>
<td>Get Job and CronJob information</td>
</tr>
</tbody>
</table>
</li>
</ol>
<p>The permissions file is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">rbac.authorization.k8s.io/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterRole</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">rules</span>:
</span></span><span style="display:flex;"><span>   - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>       - <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>       -<span style="color:#ae81ff">nodes</span>
</span></span><span style="display:flex;"><span>       -<span style="color:#ae81ff">pods</span>
</span></span><span style="display:flex;"><span>       -<span style="color:#ae81ff">pods/status</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">persistentvolumes</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">persistentvolumeclaims</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">services</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">namespaces</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">verbs</span>:
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">get</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">list</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">watch</span>
</span></span><span style="display:flex;"><span>   - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>       - <span style="color:#e6db74">&#34;apps/v1&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>       -<span style="color:#ae81ff">deployments</span>
</span></span><span style="display:flex;"><span>       -<span style="color:#ae81ff">replicasets</span>
</span></span><span style="display:flex;"><span>       -<span style="color:#ae81ff">replicationcontollers</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">statefulsets</span>
</span></span><span style="display:flex;"><span>       -<span style="color:#ae81ff">daemonsets</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">verbs</span>:
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">get</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">list</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">watch</span>
</span></span><span style="display:flex;"><span>   - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>       - <span style="color:#e6db74">&#34;batch/v1&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">jobs</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">cronjobs</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">verbs</span>:
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">get</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">list</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">watch</span>
</span></span><span style="display:flex;"><span>   - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>       - <span style="color:#e6db74">&#34;storage/v1&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>       -<span style="color:#ae81ff">storageclasses</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">verbs</span>:
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">get</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">list</span>
</span></span><span style="display:flex;"><span>       - <span style="color:#ae81ff">watch</span>
</span></span></code></pre></div><ol start="4">
<li>Prometheus monitoring or Thanos monitoring. This monitoring is used to provide monitoring data for nodes, containers, etc. in the cluster.</li>
</ol>
<h2 id="import-steps">Import steps</h2>
<h3 id="add-alibaba-cloud-account">Add Alibaba Cloud account</h3>
<ol>
<li>Select the <code>Settings</code> menu and select the <code>Cloud Account</code> tab to enter the cloud account management page. By default, this page will display all cloud accounts managed by the platform in pages, including names and corresponding cloud service providers. It also provides an operation bar to facilitate users to perform corresponding operations, as shown in the figure below.</li>
</ol>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aliyun/cp01_hua616eacb3aebae2f5f78241e609ab820_2687161_900x0_resize_catmullrom_3.png" width="900" height="346">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Cloud account management main page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<ol start="2">
<li>On the cloud account management page, click the Add button to add a cloud account. The interface is as shown below. In this interface, the user enters the cloud account name, selects the corresponding cloud service provider, enters the Access Key and Access Key Secret, and clicks the OK button to complete adding the cloud account. After adding parameters, users can also click the Test Connectivity button to test whether the cloud account is correct. The platform currently supports Alibaba Cloud, which can be selected from the cloud service provider drop-down box. Access Key and Access Key Secret are account information for accessing the cloud service. Please obtain them from the corresponding cloud service provider.</li>
</ol>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 510px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aliyun/cp02_hu69f6a5ed4ee83792d28a08169d2eee0f_35990_500x0_resize_catmullrom_3.png" width="500" height="349">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Add cloud account interface
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<h3 id="add-alibaba-cloud-cluster">Add Alibaba Cloud cluster</h3>
<ol>
<li>
<p>Select the <code>Settings</code> menu and select the cluster tab to enter the cluster management page. By default, this page will display all clusters managed by the platform in pages, including name, cluster ID, cluster region, Access Token name, corresponding cloud service provider and Prometheus address. It also provides an operation bar to facilitate users to perform corresponding operations. As shown in Figure 24.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aliyun/cluster01_hu66289fd8e1bc98ec62da06f0c786c304_2419115_900x0_resize_catmullrom_3.png" width="900" height="382">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Cluster management main page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
</li>
<li>
<p>Click the <code>Import Cluster</code> button to pop up the import dialog box, where you can import the cluster. There are 5 steps to import a cluster. Currently, only Alibaba Cloud clusters are supported.</p>
<ol>
<li>Set Alibaba Cloud access credentials</li>
<li>Connect to the Kubernetes cluster</li>
<li>Connect to Prometheus</li>
<li>View configuration</li>
<li>Complete</li>
</ol>
</li>
<li>
<p>The interface for setting Alibaba Cloud access credentials is as shown in the figure below. In the Alibaba Cloud access credentials interface, set the Alibaba Cloud access credentials by using existing credentials. Here, select the Alibaba Cloud account added in <code>Add Alibaba Cloud Account</code>, as shown in the figure below.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aliyun/cluster02_hu47cab88b789ca4733b076b8b85bee2ef_32066_600x0_resize_catmullrom_3.png" width="600" height="175">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Import cluster interface-set Alibaba Cloud access credentials
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
</li>
<li>
<p>After setting the Alibaba Cloud access credentials, click the Next button to enter the page for connecting to the Kubernetes cluster, as shown in the figure below. The platform supports connecting to two types of Kubernetes clusters, including managed clusters and self-built clusters. The Connect Hosting Cluster page is shown in the figure below. Here we choose the managed cluster, and the platform automatically obtains the user cluster through the cloud account. The user selects the corresponding cluster through the cluster drop-down box, enters the description field, selects whether to use the API Server private network address, selects whether to automatically refresh KubeConfig and the KubeConfig life cycle. Finally enter the node group label.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aliyun/cluster04_hu4cbd76721179e5ab92dd2e7d6890ad68_61167_600x0_resize_catmullrom_3.png" width="600" height="359">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Connect to Kubernetes cluster page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
</li>
<li>
<p>The connection page to Prometheus is as shown in the figure below. After the user enters information on this page, click the Next button to enter the view configuration page. The input information details are shown in the table below.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aliyun/cluster04_hu4cbd76721179e5ab92dd2e7d6890ad68_61167_600x0_resize_catmullrom_3.png" width="600" height="359">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Connect to Prometheus page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

The parameter description for connecting to Prometheus is as shown in the table:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Parameters</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Whether Thanos</td>
<td style="text-align:left">If the backend cluster is Thanos, this should be checked.</td>
</tr>
<tr>
<td style="text-align:left">Prometheus address</td>
<td style="text-align:left">Prometheus address, must be accessible.</td>
</tr>
<tr>
<td style="text-align:left">Limit access rate</td>
<td style="text-align:left">If you need the current platform&rsquo;s access rate to Prometheus, you should check this option.</td>
</tr>
<tr>
<td style="text-align:left">Maximum number of concurrencies</td>
<td style="text-align:left">The maximum number of concurrencies for the platform to access Prometheus.</td>
</tr>
<tr>
<td style="text-align:left">Cluster label</td>
<td style="text-align:left">Cluster label is used to filter the monitoring indicators of the cluster from Prometheus or Thanos</td>
</tr>
<tr>
<td style="text-align:left">Cluster tag value</td>
<td style="text-align:left">Cluster tag value is used to filter the monitoring indicators of the cluster from Prometheus or Thanos</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>View the configuration page as shown in the figure below. This page displays Alibaba Cloud access credentials, detailed parameters for connecting to the Kubernetes cluster and connecting to the Prometheus cluster, which is convenient for users to confirm. When the user completes the confirmation, click the Import button to enter the completion page.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aliyun/cluster04_hu4cbd76721179e5ab92dd2e7d6890ad68_61167_600x0_resize_catmullrom_3.png" width="600" height="359">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
View configuration page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
</li>
<li>
<p>The completed page is as shown in the figure below, and the submission status will be displayed on the page. Click Finish to complete the cluster import.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aliyun/cluster04_hu4cbd76721179e5ab92dd2e7d6890ad68_61167_600x0_resize_catmullrom_3.png" width="600" height="359">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Complete page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
</li>
</ol>
<h2 id="next-steps">Next steps</h2>
<p>After the cluster is imported, wait for a while to view optimization suggestions for the cluster in multiple dimensions.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-cbcde0fe6010529c37131204023b7771">1.3 - Cluster Overview</h1>
    <div class="lead">View the clusters connected in the platform.</div>
	

<div class="pageinfo pageinfo-primary">
<p>View the clusters connected in the platform.</p>

</div>

<p>Click on <code>Clusters</code> in the left menu bar of the platform to display the Cluster Overview page, as shown below. The main display area will show the list of clusters managed by the platform. This includes information such as cluster (cluster name and cluster ID), cluster region, Access Token name, cloud service provider, and Prometheus address.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/overview/overview_huc51d5935651b648a35188d358af3790b_63590_600x0_resize_catmullrom_3.png" width="600" height="264">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Cluster Overview Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-a8e419965395a39fb951fa1137e17781">1.4 - Node Pool Optimization</h1>
    <div class="lead">Provides information and operational recommendations for node pool optimization.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes the cluster optimization operations provided by the one-stop cloud-native Cluster Optimizer platform.</p>

</div>

<p>Click on the <code>Node Group</code> menu in the left menu bar of the platform to display the Node Group page, as shown in Figure 39. The Node Group page is divided into three areas:</p>
<ol>
<li>Cluster Selection Area: Select the corresponding cluster.</li>
<li>Query Area: Filter list items based on node group name and node group ID.</li>
<li>List Area: Displays information about the node groups, their current settings, and optimized settings.</li>
</ol>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/nodegroup/ng1_hu5eadd621fabeabe5401645eb35929a15_31462_600x0_resize_catmullrom_3.png" width="600" height="324">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Node Group Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>After the user selects a cluster, the list area is displayed in four columns:</p>
<ol>
<li>Node Group Column: Displays the node group name and node group ID.</li>
<li>Current Settings Column: Displays the current instance type of the node group, whether it is automatically scaled, and the minimum and maximum number of nodes.</li>
<li>Optimized Settings Column: Displays the instance type of the node group intelligently recommended by the platform, whether to start scaling is recommended, and the recommended minimum and maximum number of nodes.</li>
<li>Operations Column: Displays the corresponding operations for the node group.</li>
</ol>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/nodegroup/ng2_hufb6d4ad30dc137d423e10af768d0301e_59958_600x0_resize_catmullrom_3.png" width="600" height="320">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Node Group Page - Cluster Selected
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>Clicking the <code>Adjust</code> link in the figure above opens the Adjust Node Group dialog box, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 810px">
	<img class="card-img-top" src="/docs/cluster-optimizer/nodegroup/ng3_hu511fdf49d71d51d20b7534d23c9a8b4b_71557_800x0_resize_catmullrom_3.png" width="800" height="410">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Adjust Node Group Dialog Box
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-60fb2e0d684559cca943f114bbb23b17">1.5 - Node Optimization</h1>
    <div class="lead">Describes node-related information and optimization suggestions.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes node-related information and optimization suggestions.</p>

</div>

<p>Click the <code>Nodes</code> menu in the left menu bar of the platform to display the Nodes page, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/node/node1_hucbd1b26c7c372bc6a3c143a2da6ffa06_32634_600x0_resize_catmullrom_3.png" width="600" height="333">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Nodes Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The Nodes page is divided into three sections:</p>
<ol>
<li>Cluster Selection Area: Select the corresponding cluster.</li>
<li>Query Area: Filter list items by Node Group Name and Node Group ID.</li>
<li>List Area: Displays information about Node Groups, their current settings, and optimized settings.</li>
</ol>
<p>The Nodes page for selecting a cluster is shown below:







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/node/node2_hu17fda8b599b1f8ac4ecabc25c3b623cd_82280_600x0_resize_catmullrom_3.png" width="600" height="418">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Nodes Page - Select Cluster
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
<p>The List Area display is divided into five columns:</p>
<ol>
<li>Node Information Column: Displays the Node Name, Instance ID, and Region information.</li>
<li>Current Settings Column: Displays the instance type, CPU cores, and memory size of the node.</li>
<li>Policy Name Column: Displays the policy used for node optimization; currently, only the low utilization node strategy is supported.</li>
<li>Details Column: Displays information provided by the policy. For example, for the low utilization node strategy, it monitors the average utilization of CPU and memory and compares it with the threshold set by the platform to help users adjust the node instance type.</li>
<li>Actions Column: Displays corresponding actions for the node.</li>
</ol>
<p>Clicking the <code>Adjust</code> link opens the Adjust Nodes dialog box, which displays detailed adjustment information and recommended adjustment plans, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/node/node3_huf100fcca64e7c4f80e6e88bb3833e1ea_91312_600x0_resize_catmullrom_3.png" width="600" height="296">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Adjust Nodes Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-41a35fffa4c7fd6466728b424aab2998">1.6 - Disk Optimization</h1>
    <div class="lead">This describes the information related to disks and optimization suggestions.</div>
	

<div class="pageinfo pageinfo-primary">
<p>This describes the information related to disks and optimization suggestions.</p>

</div>

<p>Click the <code>Disk</code> menu in the left menu bar of the platform to display the Disk page, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/disk/disk1_hu8eff269808ad90ec2980f382e0103d36_32479_600x0_resize_catmullrom_3.png" width="600" height="334">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Disk Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The Disk page is divided into three sections:</p>
<ol>
<li>Cluster selection section: Select the corresponding cluster.</li>
<li>Search section: Query the corresponding disks by disk ID, instance ID, and node name.</li>
<li>List section: Displaying disks, instances, usage, and operations column.</li>
</ol>
<p>After selecting the cluster, the Disk page will look like this:</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/disk/disk2_hu5d129aa695fec5b501fbe2af2fc02371_92321_600x0_resize_catmullrom_3.png" width="600" height="406">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Disk Page - Cluster Selected
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The list section shows four columns:</p>
<ol>
<li>Disk column: Displays the disk ID, device name, and creation time.</li>
<li>Instance column: Shows the node ID where the disk resides, the node name, and the region.</li>
<li>Usage column: Shows the disk capacity, maximum utilization rate, average utilization rate, and last update time.</li>
<li>Operation column: Displays operations that can be performed on the disk.</li>
</ol>
<p>When a user clicks the <code>Adjust</code> link, a dialog box for adjusting the size of the disk opens, which displays detailed adjustment information and recommended adjustment plans for the disk, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/disk/disk3_hu8aac8a7a4525283cb7f898defaa8e7e4_130288_600x0_resize_catmullrom_3.png" width="600" height="332">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Adjust Disk Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ec4c2c1254809868f664e7266e289938">1.7 - Persistent Volume Optimization</h1>
    <div class="lead">This describes the information and operational recommendations provided by node pool optimization.</div>
	

<div class="pageinfo pageinfo-primary">
<p>This describes the cluster optimization operations provided by the one-stop cloud-native cluster optimization platform (Cluster Optimizer).</p>

</div>

<p>Click the <code>Persistent Volume</code> menu on the left menu bar of the platform to display the Persistent Volume page, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/pv/pv1_hue512a9c09cea6c77b3077e30f8fff04e_41899_600x0_resize_catmullrom_3.png" width="600" height="365">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Persistent Volume Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The Persistent Volume page is divided into three sections:</p>
<ol>
<li>Cluster selection area: Select the corresponding cluster.</li>
<li>Query area: Filter the list items according to the name, PVC namespace, PVC name, and policy name.</li>
<li>List area: Displays PV, PVC, policy name, usage, last update time, and operation column.</li>
</ol>
<p>The disk page after selecting a cluster is shown below:</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/pv/pv2_hu4f738f43cdbc3a30690ded55f2dfade5_68487_600x0_resize_catmullrom_3.png" width="600" height="395">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Persistent Volume Page - Select Cluster
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The list area displays six columns:</p>
<ol>
<li>PV column: Shows the PV name, region, capacity, and creation time.</li>
<li>PVC column: Shows the PVC namespace and name.</li>
<li>Policy name column: Shows the optimization policy name, currently including two optimization policies for unused PVs and low-usage PVs.</li>
<li>Usage column: Shows the usage of the PV, only effective under the low-usage PV optimization strategy.</li>
<li>Last update time column: Shows the last update time.</li>
<li>Operation column: Shows the corresponding operations for the disk.</li>
</ol>
<p>Users can click the <code>Delete</code> link to open the Delete Persistent Volume dialog box, which displays detailed information about the Persistent Volume and recommended adjustment schemes, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/pv/pv3_huee2a4ef5fd2b1fcd4d17f5564833ef4e_81179_600x0_resize_catmullrom_3.png" width="600" height="263">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Delete Persistent Volume Dialog Box
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-077e156274fb7d892f55e54292de72da">1.8 - Application Optimization</h1>
    <div class="lead">Describes the application details and optimization suggestions.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes the application details and optimization suggestions.</p>

</div>

<p>Click on the <code>Application</code> menu in the left menu bar of the platform to display the application page, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app1_hu0e8572a06a553eaf35c04e55defb382f_42248_600x0_resize_catmullrom_3.png" width="600" height="368">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Application Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The application page is divided into 3 sections:</p>
<ol>
<li>Cluster Selection Area: Select the corresponding cluster.</li>
<li>Query Area: You can query by namespace, load name, load type, container, and policy name. Currently, the platform supports resource recommendation, not set resource quota, and memory overflow policy.</li>
<li>List Area: Displays name, container, current settings, policy name, details, and action columns. The displayed information varies with different policy names.</li>
</ol>
<p>After selecting a cluster in the cluster selection area, the platform defaults to aggregating the results of all policies and displays them in a list, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app2_hu187479d7b507b5da0307817a4d09e4e5_88689_600x0_resize_catmullrom_3.png" width="600" height="355">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Application Page - Select Cluster
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>If the policy name is resource recommendation, the list area will appear as shown above. The list area is divided into 6 columns:</p>
<ol>
<li>Name Column: Displays load name, namespace, and load type.</li>
<li>Container Column: Displays the container name.</li>
<li>Current Settings: Displays the CPU Request, CPU Limit, memory Request, and memory Limit for that container.</li>
<li>Policy Name: Displays the policy name.</li>
<li>Details: Displays the average CPU usage, maximum CPU usage, average memory usage, maximum memory usage, recommended CPU Request value, recommended CPU Limit value, recommended memory Request value, recommended memory Limit value, and the latest update time.</li>
<li>Action Column: Displays the corresponding actions for the application.</li>
</ol>
<p>Users can click the <code>Adjust</code> link to open the dialog box for adjusting resource quotas, which displays application details, recommended values, and corresponding adjustment statements, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app3_hu880b20b69e27095c3257d5800759b1ca_101268_600x0_resize_catmullrom_3.png" width="600" height="354">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Adjust Resource Quotas Dialog Box
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>If the policy name is not set resource quota, the list area will display as follows:</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app2_hu187479d7b507b5da0307817a4d09e4e5_88689_600x0_resize_catmullrom_3.png" width="600" height="355">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Application Page - Select Not Set Resource Quota Policy
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The list area is divided into 6 columns:</p>
<ol>
<li>Name Column: Displays load name, namespace, and load type.</li>
<li>Container Column: Displays the container name.</li>
<li>Current Settings: Displays whether the CPU Request, CPU Limit, memory Request, and memory Limit for that container have been set.</li>
<li>Policy Name: Displays the policy name.</li>
<li>Details: Displays the recommended CPU Request value, recommended CPU Limit value, recommended memory Request value, recommended memory Limit value, and the latest update time.</li>
<li>Action Column: Displays the corresponding actions for the application.</li>
</ol>
<p>Users can click the <code>Adjust</code> link in the above image to open the dialog box for setting application resource quotas, which displays application details, recommended values, and corresponding adjustment statements, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app2_hu187479d7b507b5da0307817a4d09e4e5_88689_600x0_resize_catmullrom_3.png" width="600" height="355">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Set Application Resource Quotas Dialog Box
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>If the policy name is memory overflow, the list area will display as follows:</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app2_hu187479d7b507b5da0307817a4d09e4e5_88689_600x0_resize_catmullrom_3.png" width="600" height="355">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Application Page - Select Memory Overflow Policy
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The list area is divided into 6 columns:</p>
<ol>
<li>Name Column: Displays load name, namespace, and load type.</li>
<li>Container Column: Displays the container name.</li>
<li>Current Settings: Displays the memory Request and memory Limit for that container.</li>
<li>Policy Name: Displays the policy name.</li>
<li>Details: Displays the recent OOM time, recent OOM Pod, number of OOMs, and the latest update time.</li>
<li>Action Column: Displays the corresponding actions for the application.</li>
</ol>
<p>Users can click the adjust link to open the dialog box for adjusting application memory size, which displays application details, recommended memory limit values, and corresponding adjustment statements, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app2_hu187479d7b507b5da0307817a4d09e4e5_88689_600x0_resize_catmullrom_3.png" width="600" height="355">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Adjust Application Memory Size Dialog Box
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ec768fe1731869c4e5952255d641c790">1.9 - Cluster Optimization Operations</h1>
    <div class="lead">Operations related to the one-stop cloud-native cluster optimization platform.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes the cluster optimization operations provided by the one-stop cloud-native cluster optimization platform (Cluster Optimizer).</p>

</div>

<p>The main cluster optimization operations include:</p>
<ul>
<li>Adjusting node pools</li>
<li>Adjusting nodes</li>
<li>Adjusting disks</li>
<li>&hellip;</li>
</ul>
<p>(Note: The translation provided aims to capture the original text&rsquo;s meaning while adhering to English language conventions and idioms.)</p>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-b44e424da94f6990e4d02978cbc967a9">1.9.1 - Adjust Node Pool</h1>
    <div class="lead">Adjust the node pool.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes the operation of adjusting the node pool.</p>

</div>

<h2 id="alibaba-cloud">Alibaba Cloud</h2>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>Have the permission to edit the node pool.</li>
</ul>
<h3 id="operation-steps">Operation Steps</h3>
<ol>
<li>Log in to the container service management console and select Cluster on the left navigation bar.</li>
<li>On the cluster list page, click the target cluster name, and then on the left navigation bar, select Node Management &gt; Node Pool.</li>
<li>On the Node Pool List page, click the Edit button in the operation column of the target Node Pool.</li>
<li>On the Edit Node Pool page, edit the configuration items of the Node Pool. The main focus of Node Pool optimization is the <strong>Instance Specification</strong> and <strong>Auto Scaling</strong> configuration items.
<ol>
<li>Select the corresponding instance specification according to the recommended instance rules in the Adjust Node Pool dialog box.</li>
<li>Make adjustments in the <strong>Auto Scaling</strong> configuration item according to the recommended auto-scaling, minimum number of nodes, and maximum number of nodes in the Adjust Node Pool dialog box. If you have not enabled cluster auto-elasticity, you can refer to <a href="https://help.aliyun.com/zh/ack/ack-managed-and-ack-dedicated/user-guide/auto-scaling-of-nodes#section-i4v-dgt-7wv">Node Auto Scaling</a> for configuration.</li>
</ol>
</li>
</ol>
<p>For more details, please refer to: <a href="https://help.aliyun.com/zh/ack/ack-managed-and-ack-dedicated/user-guide/edit-node-pool">Edit Node Pool</a></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5db2c5107c2c5b867fd9b6b316f9f181">1.9.2 - Adjust Nodes</h1>
    <div class="lead">Adjust nodes.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes the operation of adjusting nodes.</p>

</div>

<h2 id="alibaba-cloud">Alibaba Cloud</h2>
<h3 id="prerequisites">Prerequisites</h3>
<p>TBD&hellip;</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-25ff9c4e42700bf130854451e52d2fb1">1.9.3 - Adjusting disks</h1>
    <div class="lead">Adjusting disks.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes the operation of adjusting disks.</p>

</div>

<h2 id="alibaba-cloud">Alibaba Cloud</h2>
<h3 id="prerequisites">Prerequisites</h3>
<p>TBD&hellip;</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-cf75811c0797e8dc5e66957ac96debfb">1.9.4 - Deleting Persistent Volume</h1>
    <div class="lead">Deleting a Persistent Volume.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes the operation of deleting a Persistent Volume.</p>

</div>

<h2 id="alibaba-cloud">Alibaba Cloud</h2>
<h3 id="prerequisites">Prerequisites</h3>
<p>TBD&hellip;</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-da59e19291384c4c46aa84925c92b66c">1.10 - </h1>
    
	<ol>
<li>An Access Key &amp; Secret needs to be provided, and its permission policy is as follows:</li>
</ol>
<p>{
&ldquo;Version&rdquo;: &ldquo;2012-10-17&rdquo;,
&ldquo;Statement&rdquo;: [
{
&ldquo;Sid&rdquo;: &ldquo;Optimizer&rdquo;,
&ldquo;Effect&rdquo;: &ldquo;Allow&rdquo;,
&ldquo;Action&rdquo;: [
&ldquo;ec2:DescribeInstances&rdquo;,
&ldquo;ec2:DescribeLaunchTemplates&rdquo;,
&ldquo;ec2:DescribeRegions&rdquo;,
&ldquo;ec2:DescribeVolumes&rdquo;,
&ldquo;ec2:DescribeLaunchTemplateVersions&rdquo;,
&ldquo;eks:DescribeNodegroup&rdquo;,
&ldquo;eks:ListNodegroups&rdquo;,
&ldquo;eks:DescribeCluster&rdquo;,
&ldquo;eks:ListClusters&rdquo;
&ldquo;autoscaling:DescribeAutoScalingInstances&rdquo;,
&ldquo;autoscaling:DescribeAutoScalingGroups&rdquo;,
],
&ldquo;Resource&rdquo;: &ldquo;*&rdquo;
}
]
}</p>
<ol start="2">
<li>A Kubeconfig needs to be provided to access cluster-related information. The permission requirements are as follows (if it is only a development and test cluster without sensitive information, for the sake of simplicity, you can also grant all read-only permissions to the cluster):</li>
</ol>
<p>apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
name: optimizer
rules:</p>
<ul>
<li>apiGroups:
<ul>
<li>&quot;&quot;
resources:
-nodes
-pods
-pods/status</li>
<li>persistentvolumes</li>
<li>persistentvolumeclaims</li>
<li>services</li>
<li>namespaces
verbs:</li>
<li>get</li>
<li>list</li>
<li>watch</li>
</ul>
</li>
<li>apiGroups:
<ul>
<li>&ldquo;apps/v1&rdquo;
resources:
-deployments
-replicasets
-replicationcontollers</li>
<li>statefulsets
-daemonsets
verbs:</li>
<li>get</li>
<li>list</li>
<li>watch</li>
</ul>
</li>
<li>apiGroups:
<ul>
<li>&ldquo;batch/v1&rdquo;
resources:</li>
<li>jobs</li>
<li>cronjobs
verbs:</li>
<li>get</li>
<li>list</li>
<li>watch</li>
</ul>
</li>
<li>apiGroups:
<ul>
<li>&ldquo;storage/v1&rdquo;
resources:
-storageclasses
verbs:</li>
<li>get</li>
<li>list</li>
<li>watch</li>
</ul>
</li>
</ul>
<ol start="3">
<li>
<p>The Prometheus/Thanos address corresponding to the cluster is calculated by the platform using monitoring data and provides operation suggestions.</p>
</li>
<li>
<p>A VPN may be required to give access to the EKS cluster and Prometheus/Thanos.</p>
</li>
</ol>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-dacaf1e373c2472c1efbf2a9b2acf54b">2 - Wisecost: A Cloud-native Cost Management and Optimization Platform</h1>
    <div class="lead">One-stop cloud-native application cost monitoring, management, and optimization platform.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Wisecost provides capabilities for monitoring, managing, and optimizing the costs of cloud-native applications.</p>

</div>

<p>Wisecost helps users to monitor, manage, and optimize the costs of cloud-native applications, with key features including:</p>
<ul>
<li>Assess overall cluster costs and breakdown costs.</li>
<li>Evaluate the costs of cloud-native applications, providing cost analysis across multiple dimensions such as namespace, load, department, team, and application environment.</li>
<li>Provide optimization suggestions.</li>
<li>Assess the health of clusters and applications.</li>
</ul>
<hr>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d1501d8c0fcaf4a0c0134a7c69ba635e">2.1 - Installation and Deployment</h1>
    <div class="lead">Describes the detailed steps to install Wisecost.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Wisecost provides cloud-native application cost monitoring, management, and optimization capabilities.</p>

</div>

<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Mysql database, version 5.7 or higher</li>
<li>kubernetes cluster, version 1.20 or higher</li>
</ul>
<h2 id="clone-installation-scripts">Clone Installation Scripts</h2>
<ol>
<li>Open the console, enter <code>git clone https://github.com/wiseinf/setup.git</code>, and clone the installation scripts to your local machine.
We provide 2 repo addresses for you to clone to your local machine according to your needs.</li>
</ol>
<table>
<thead>
<tr>
<th>Repository</th>
<th style="text-align:left">Repository Address</th>
</tr>
</thead>
<tbody>
<tr>
<td>Github</td>
<td style="text-align:left"><a href="https://github.com/wiseinf/setup.git">https://github.com/wiseinf/setup.git</a></td>
</tr>
<tr>
<td>Gitee</td>
<td style="text-align:left"><a href="https://gitee.com/wiseinf/setup.git">https://gitee.com/wiseinf/setup.git</a></td>
</tr>
</tbody>
</table>
<blockquote>
<p>The subsequent steps assume that the <code>setup</code> library has been cloned to the user&rsquo;s home directory. If it hasn&rsquo;t been cloned to the user&rsquo;s home directory, you need to adjust the file paths in the commands accordingly.</p>
</blockquote>
<h2 id="initialize-the-database">Initialize the Database</h2>
<blockquote>
<p>Assuming the Mysql database host address is: <code>127.0.0.1</code>.</p>
</blockquote>
<ol>
<li>
<p>In the console, execute the command <code>mysql -h127.0.0.1 -uroot</code>, enter the password, and log into the mysql database. Where <code>127.0.0.1</code> is the Mysql host address.</p>
</li>
<li>
<p>At the <code>mysql&gt;</code> prompt, execute the following command to create the <code>storage</code> database and <code>wisecost</code> database, and the corresponding tables will be automatically created by the application later.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    mysql&gt; source ~/setup/wisecost/sql/create_database.sql
</span></span></code></pre></div><blockquote>
<p>Note: Please pay attention to the risk of data loss. If the <code>storage</code> database and <code>wisecost</code> database already exist in the mysql database, the above script will delete the <code>storage</code> database and <code>wisecost</code> database and create a new one.</p>
</blockquote>
</li>
<li>
<p>At the <code>mysql&gt;</code> prompt, execute the following command to create the <code>wisecost</code> user (the default password is <code>Wisecost~</code>) and grant it full access permissions to the <code>storage</code> database and <code>wisecost</code> database.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    mysql&gt; source ~/setup/wisecost/sql/create_user.sql
</span></span></code></pre></div></li>
<li>
<p>In the console, execute the command <code>mysql -h127.0.0.1 -uwisecost</code>, enter the password (the default password is <code>Wisecost~</code>), and log into the mysql database.</p>
</li>
<li>
<p>At the <code>mysql&gt;</code> prompt, execute <code>show database</code> to confirm that the <code>storage</code> database and <code>wisecost</code> database have been created. You can query the corresponding data tables in the library with <code>select</code> statements (for example, <code>select * from storage.pv</code>) to confirm whether the user&rsquo;s permissions are normal.</p>
</li>
<li>
<p>At this point, the database initialization is complete.</p>
</li>
</ol>
<h2 id="deploy-the-application">Deploy the Application</h2>
<ol>
<li>Apply the following file to the cluster with <code>kubectl apply -f ~/setup/wisecost/namespace.yaml</code>, creating the namespace <code>wiseinf-system</code>.

    
      
    
    
    
    
    	
    
    
    
    
    
    
      
      
      
    
    
    
    
    
    
      <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Namespace</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>: 
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span></code></pre></div>
    
</li>
<li>Adjust the <strong>ConfigMap</strong> <code>wisecost-conf</code> in the file <code>~/setup/wisecost/wisecost.yaml</code> according to the configuration of Mysql, and adjust the configuration items <code>optimize</code> and <code>kubestore</code> under <code>dataSourceName: &quot;wisecost:Wisecost~@tcp(mysql:3306)/wisecost?charset=utf8mb4&amp;parseTime=true</code> to the corresponding information of Mysql database.</li>
<li>Apply the following file to the cluster with <code>kubectl apply -f ~/setup/wisecost/wisecost.yaml</code>, deploying the application <strong>Wise Cost</strong>.

    
      
    
    
    
    
    	
    
    
    
    
    
    
      
      
      
    
    
    
    
    
    
      <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>---
    </span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx-config</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">default.conf</span>: |-<span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      server {
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        listen 80;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        location / {
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          root /usr/share/nginx/html/;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          include /etc/nginx/mime.types;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          try_files $uri $uri/ /index.html;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          location /api/ {
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            rewrite ^/api/(.*) /$1 break;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_set_header Host $host;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_set_header X-Real-IP $remote_addr;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_set_header X-NginX-Proxy true;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_pass http://localhost:7070;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          }
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      }</span>      
    </span></span><span style="display:flex;"><span>---
    </span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-conf</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">wisecost.yaml</span>: |-<span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    server:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      port: 7070
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    optimize:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      dataSourceName: &#34;wisecost:Wisecost~@tcp(mysql:3306)/wisecost?charset=utf8mb4&amp;parseTime=true&#34;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      maxOpenConns: 10
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    kubestore:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      type: mysql
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      parameters:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        dataSourceName: &#34;wisecost:Wisecost~@tcp(mysql:3306)/storage?charset=utf8mb4&amp;parseTime=true&#34;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        maxOpenConns: 10</span>    
    </span></span><span style="display:flex;"><span>
    </span></span><span style="display:flex;"><span>---
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Deployment</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">apps/v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">1</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">revisionHistoryLimit</span>: <span style="color:#ae81ff">10</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">matchLabels</span>:
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>        <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">hostNetwork</span>: <span style="color:#66d9ef">true</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">dnsPolicy</span>: <span style="color:#ae81ff">ClusterFirstWithHostNet</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">securityContext</span>:
    </span></span><span style="display:flex;"><span>        <span style="color:#f92672">runAsUser</span>: <span style="color:#ae81ff">0</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">containers</span>:
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-ui</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">image</span>: <span style="color:#ae81ff">wiseinf/wisecost-ui:701d19d</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">imagePullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">volumeMounts</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx-config</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/etc/nginx/conf.d</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">ports</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">80</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">resources</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">requests</span>:
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">200m</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">500M</span>
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">limits</span>:
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">1000m</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">2G</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">image</span>: <span style="color:#ae81ff">wiseinf/wisecost:99e308e</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">command</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;/wiseinf/wisecost&#34;</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">imagePullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">volumeMounts</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-data-volume</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/wiseinf/data</span>
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-logs-volume</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/wiseinf/logs</span>
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-conf-volume</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/wiseinf/conf</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#              subPath: wisecost.yml</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">ports</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">7070</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">resources</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">requests</span>:
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">200m</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">500M</span>
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">limits</span>:
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">1000m</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">2G</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">volumes</span>:
    </span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Config for wisecost-ui</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx-config</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">configMap</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx-config</span>
    </span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Configs for wisecost</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-data-volume</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">hostPath</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/wisecost/data</span>
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">type</span>: <span style="color:#ae81ff">DirectoryOrCreate</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-logs-volume</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">hostPath</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/wisecost/logs</span>
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">type</span>: <span style="color:#ae81ff">DirectoryOrCreate</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-conf-volume</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">configMap</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-conf</span>
    </span></span><span style="display:flex;"><span>---
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost-ui</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>:  <span style="color:#ae81ff">wisecost-ui-service</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
    </span></span><span style="display:flex;"><span>    - <span style="color:#f92672">port</span>: <span style="color:#ae81ff">80</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">80</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">NodePort</span></span></span></code></pre></div>
    

<blockquote>
<p>Note:</p>
</blockquote>
</li>
<li>Use <code>kubectl port-forward svc/wisecost-ui-service 80:80</code></li>
<li>Access URL <code>http://localhost</code>, and you can see the Wise Cost homepage.</li>
<li>At this point, the application <strong>Wise Cost</strong> is deployed.</li>
</ol>
<h2 id="next-step-import-cluster">Next Step: Import Cluster</h2>
<p>Next, you can add a cluster and view its various costs. See Import Cluster <a href="/docs/wisecost/import-aliyun">Import Alibaba Cloud Cluster</a> for details.</p>
<h2 id="annex">Annex</h2>
<ul>
<li>Script <code>create_user.sql</code>

    
      
    
    
    
    
    	
    
    
    
    
    
    
      
      
      
    
    
    
    
    
    
      <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">USER</span> wisecost<span style="color:#f92672">@</span><span style="color:#e6db74">&#39;%&#39;</span> IDENTIFIED <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;Wisecost~&#39;</span>;
    </span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">ALL</span> <span style="color:#66d9ef">ON</span> <span style="color:#66d9ef">storage</span>.<span style="color:#f92672">*</span> <span style="color:#66d9ef">TO</span> wisecost<span style="color:#f92672">@</span><span style="color:#e6db74">&#39;%&#39;</span>;
    </span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">ALL</span> <span style="color:#66d9ef">ON</span> wisecost.<span style="color:#f92672">*</span> <span style="color:#66d9ef">TO</span> wisecost<span style="color:#f92672">@</span><span style="color:#e6db74">&#39;%&#39;</span>;</span></span></code></pre></div>
    
</li>
<li>Script <code>create_database.sql</code>

    
      
    
    
    
    
    	
    
    
    
    
    
    
      
      
      
    
    
    
    
    
    
      <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- ----------------------------------------------------------------------------
    </span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- Schema wisecost
    </span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- ----------------------------------------------------------------------------
    </span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">SCHEMA</span> <span style="color:#66d9ef">IF</span> <span style="color:#66d9ef">EXISTS</span> <span style="color:#f92672">`</span>wisecost<span style="color:#f92672">`</span> ;
    </span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">SCHEMA</span> <span style="color:#66d9ef">IF</span> <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">EXISTS</span> <span style="color:#f92672">`</span>wisecost<span style="color:#f92672">`</span> ;
    </span></span><span style="display:flex;"><span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">-- ----------------------------------------------------------------------------
    </span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- Schema storage
    </span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- ----------------------------------------------------------------------------
    </span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">SCHEMA</span> <span style="color:#66d9ef">IF</span> <span style="color:#66d9ef">EXISTS</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">storage</span><span style="color:#f92672">`</span> ;
    </span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">SCHEMA</span> <span style="color:#66d9ef">IF</span> <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">EXISTS</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">storage</span><span style="color:#f92672">`</span> ;
    </span></span></code></pre></div>
    
</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f8724eef5ecfc709ba9ec953f1658ee2">2.2 - Import Alibaba Cloud Cluster</h1>
    <div class="lead">This section describes the detailed steps to import an Alibaba Cloud cluster.</div>
	

<div class="pageinfo pageinfo-primary">
<p>This section describes the detailed steps to import an Alibaba Cloud cluster.</p>

</div>

<ol>
<li>
<p>After completing the installation of Wisecost, log in to the system and select &ldquo;Overview&rdquo; to see the <code>Overview Page</code>.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/import-aliyun/import-aliyun-01_hud8965e357a159a39d1a1f512c93ab966_99152_900x414_fill_catmullrom_smart1_3.png" width="900" height="414">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Overview Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
</li>
<li>
<p>On the <code>Import Alibaba Cloud Cluster - Set Alibaba Cloud Access Credentials Page</code>, set the <code>Access Key</code> and <code>Access Key Secret</code>. The <code>Access Key</code> and <code>Access Key Secret</code> can be obtained from Alibaba Cloud. For specific instructions, please refer to <a href="https://help.aliyun.com/document_detail/116401.htm">Create Access Key</a>. After setting the <code>Access Key</code> and <code>Access Key Secret</code>, click Next. The system will complete the verification of the correctness of the <code>Access Key</code> and <code>Access Key Secret</code>, and enter the &ldquo;Import Alibaba Cloud Cluster - Kubernetes Cluster and Access Settings Page&rdquo;.</p>
</li>
</ol>
<blockquote>
<p>In the &ldquo;Import Alibaba Cloud Cluster - Set Alibaba Cloud Access Credentials Page&rdquo;, you can also choose to use existing credentials and select an existing credential.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/import-aliyun/import-aliyun-02_hu586c8a1becbc05e284939f91daadb27a_113445_900x414_fill_catmullrom_smart1_3.png" width="900" height="414">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Import Alibaba Cloud Cluster - Set Alibaba Cloud Access Credentials Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
</blockquote>
<ol start="3">
<li>On the <code>Import Alibaba Cloud Cluster - Kubernetes Cluster and Access Settings Page</code>, you can choose to select a <code>Managed Cluster</code>, or a <code>Self-built Cluster</code>. Below is described with <code>Self-built Cluster</code> as an example, the corresponding parameters are described. After setting the parameter, click <code>Next</code>, the system completes the validation of the correctness of the parameter, and enters the &ldquo;Import Alibaba Cloud Cluster - Set Prometheus Access Page&rdquo;.</li>
</ol>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cluster Region</td>
<td>The cluster region refers to the region where the cluster is deployed. Be sure to correctly specify the region, otherwise it will cause the cluster to be inaccessible. For specific instructions, please refer to <a href="https://help.aliyun.com/document_detail/40654.htm">Regions and Availability Zones</a></td>
</tr>
<tr>
<td>Cluster ID</td>
<td>A unique identifier ID, used to uniquely identify a cluster</td>
</tr>
<tr>
<td>Cluster Name</td>
<td>Cluster name</td>
</tr>
<tr>
<td>Description</td>
<td>Cluster related description</td>
</tr>
<tr>
<td>Kubeconfig</td>
<td>Access to the Kubeconfig file of the cluster, you need to open read-only access permissions for the cluster. Incorrect settings will cause the cluster to be inaccessible or fail to obtain objects in the cluster.</td>
</tr>
</tbody>
</table>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/import-aliyun/import-aliyun-03_huc147e3acda1852672af64d72e460f678_213466_900x414_fill_catmullrom_smart1_3.png" width="900" height="414">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Import Alibaba Cloud Cluster - Kubernetes Cluster and Access Settings Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<ol start="4">
<li>On the <code>Import Alibaba Cloud Cluster - Set Prometheus Access Page</code>, set the Prometheus access address. After setting the parameter, click <code>Next</code>, and enter the <code>Import Alibaba Cloud Cluster - Import Page</code>.</li>
</ol>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/import-aliyun/import-aliyun-04_hu3a9e998635effd9d0941e230833f287d_99312_900x414_fill_catmullrom_smart1_3.png" width="900" height="414">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Import Alibaba Cloud Cluster - Set Prometheus Access Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<ol start="5">
<li>On the <code>Import Alibaba Cloud Cluster - Import Page</code>, click the <code>Import</code> button. After the system submits the information, it displays the <code>Import Alibaba Cloud Cluster - Import Success Page</code>. At this point, the Alibaba Cloud cluster has been successfully imported.</li>
</ol>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/import-aliyun/import-aliyun-05_huc147e3acda1852672af64d72e460f678_178791_900x414_fill_catmullrom_smart1_3.png" width="900" height="414">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Import Alibaba Cloud Cluster - Import Success Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<ol start="6">
<li>Return to the &ldquo;Overview Page&rdquo;, you can see that the imported cluster is already in the list.</li>
</ol>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/import-aliyun/import-aliyun-06_hud8965e357a159a39d1a1f512c93ab966_107599_900x414_fill_catmullrom_smart1_3.png" width="900" height="414">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Overview Page - Imported Alibaba Cloud Cluster
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<ol start="7">
<li>After completing the cluster import, you can go to the &ldquo;Cluster&rdquo; and &ldquo;Cost&rdquo; tabs to view the overall cost of the cluster and the corresponding namespace cost.</li>
</ol>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-8aaf6cb4995450b6fc76e7ad887b0eb3">2.3 - View Node Cost</h1>
    <div class="lead">Describes how to view and analyze the overall cost of a node.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Wisecost provides cloud-native application cost monitoring, management, and optimization capabilities. This document describes how to view the cost of a node and the meaning of each indicator.</p>

</div>

<h2 id="view-the-overall-cost-of-the-node">View the overall cost of the node</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/node-cost/node-1_hu75571daf753b1528af155b01a3a46732_216015_900x0_resize_catmullrom_3.png" width="900" height="387">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Overall cost of the node
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>








<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/node-cost/node-2_hud14bc57c8e8b54563bbb85fde7d79e40_218471_900x0_resize_catmullrom_3.png" width="900" height="412">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Breakdown of the overall cost of the node
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<h2 id="view-the-cost-of-a-single-node">View the cost of a single node</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/node-cost/node-3_hu68f4c02bdee6f069f5706d794bd1b072_255353_900x0_resize_catmullrom_3.png" width="900" height="418">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Cost of a single node
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-79c3c5401e75cd51b9d3c28865234518">2.4 - Viewing Cluster Costs</h1>
    <div class="lead">Describes how to view and analyze the overall cost of a cluster.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Wisecost offers capabilities for monitoring, managing, and optimizing the costs of cloud-native applications. This document describes how to view cluster costs and the meanings of various metrics.</p>

</div>

<h2 id="viewing-overall-cluster-costs">Viewing Overall Cluster Costs</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cluster-cost/cluster-1_hu9386f43e6fffa22228347f34146fc35b_156504_900x0_resize_catmullrom_3.png" width="900" height="388">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Overall Cluster Costs
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>








<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cluster-cost/cluster-2_hu8df7dfe3748412eed29420f91a32e85c_137781_900x0_resize_catmullrom_3.png" width="900" height="358">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Breakdown of Overall Cluster Costs
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<h2 id="viewing-costs-of-an-individual-cluster">Viewing Costs of an Individual Cluster</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cluster-cost/cluster-3_hu41d2df885f0270c87d1ee7b4ec2c5e92_144315_900x0_resize_catmullrom_3.png" width="900" height="417">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Costs of an Individual Cluster
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<h2 id="key-takeaways">Key Takeaways</h2>
<ul>
<li>Wisecost provides a visual interface for understanding and analyzing the costs associated with clusters.</li>
<li>The ability to view both overall and individual cluster costs is essential for effective cost management.</li>
<li>Utilizing tools like Wisecost can help optimize resource allocation and reduce unnecessary expenditure.</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-aea197f3575cb0df1ded1df55290950c">2.5 - View Application Costs</h1>
    <div class="lead">Describes how to view and analyze application costs.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Wisecost provides cloud-native application cost monitoring, management, and optimization capabilities. This document describes how to view and analyze application costs.</p>

</div>

<h2 id="view-namespace-costs">View Namespace Costs</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cost/namespace-1_hud84a5484e7411474683c506fc18d85bf_185074_900x0_resize_catmullrom_3.png" width="900" height="323">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Cumulative cost and utilization of the namespace
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>








<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cost/namespace-2_hu0683868b0a89a61f2790babad8579e94_272727_900x0_resize_catmullrom_3.png" width="900" height="260">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Time-phased cost of the namespace
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<h2 id="view-product-costs">View Product Costs</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cost/product-1_hue482c5ef76f206dad3043c87478904a0_168742_900x0_resize_catmullrom_3.png" width="900" height="298">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Cumulative cost and utilization of the product
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>








<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cost/product-2_hudcb30c2598ce67584624d0fbc71b184a_155549_900x0_resize_catmullrom_3.png" width="900" height="262">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Time-phased cost of the product
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<h2 id="custom-query">Custom Query</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cost/custom-1_hubb8eef4e201ee755282e6123f8f7c76d_282976_900x0_resize_catmullrom_3.png" width="900" height="456">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Time-phased cost of the namespace
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0d313d792f0ef08d3b1695b67d8bddea">2.6 - Cost Optimization</h1>
    <div class="lead">Describes the process of optimizing costs based on Wisecost&rsquo;s built-in strategies.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Wisecost provides cloud-native application cost monitoring, management, and optimization capabilities. This document describes the process of optimizing costs based on Wisecost&rsquo;s built-in strategies.</p>

</div>

<hr>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-eb8dcf79b1b7f912ed56305be6f0297f">2.7 - Development Manual</h1>
    <div class="lead">A one-stop cloud-native application cost monitoring, management, and optimization platform.</div>
	

<div class="pageinfo pageinfo-primary">
<p>This section includes the Wisecost API related interface usage instructions. For detailed interface documentation, please see: API URL</p>

</div>


</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-ac38a1975f478ccb8a2806eda6f684b8">2.7.1 - API Reference</h1>
    <div class="lead">Cost management API reference.</div>
	
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="SwaggerUI"
  />
  <title>Wisecost API Reference</title>
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@4.5.0/swagger-ui.css" />
</head>
<body>
<div id="swagger-ui"></div>
<script src="https://unpkg.com/swagger-ui-dist@4.5.0/swagger-ui-bundle.js" crossorigin></script>
<script>
  window.onload = () => {
    window.ui = SwaggerUIBundle({
      url: '/api/v1/openapi.json',
      dom_id: '#swagger-ui',
    });
  };
</script>
</body>
</html>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7498afe225cc47a707df513f40a91ac6">2.7.2 - </h1>
    
	<h2 id="容器成本分解api">容器成本分解API</h2>
<h3 id="查询容器成本分解">查询容器成本分解</h3>
<p>端点：<code>/api/cost/breakdown</code></p>
<p>示例：查询容器<code>test1/kube-system/kube-state-metrics-678c95bd66-zpxhr/kube-state-metrics/d222ea5b968281735981465d393dc140fae2fa6c82bca4ce7b0551094542b6cc</code>的成本分解。</p>
<p>请求如下：</p>
<pre tabindex="0"><code>${HOST}/api/cost/breakdown?container=test1/kube-system/kube-state-metrics-678c95bd66-zpxhr/kube-state-metrics/d222ea5b968281735981465d393dc140fae2fa6c82bca4ce7b0551094542b6cc
</code></pre><p>响应如下，包含CPU、内存、存储和网络的成本分解。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;cpuCoreHours&#34;</span>: <span style="color:#ae81ff">0.0006655009861111111</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;cpuCoreUsageAverage&#34;</span>: <span style="color:#ae81ff">0.0006655009861111111</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;cpuUsage&#34;</span>: <span style="color:#ae81ff">0.00018150026893939394</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;memoryByteHours&#34;</span>: <span style="color:#ae81ff">30465849.806451615</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;memoryByteUsageAverage&#34;</span>: <span style="color:#ae81ff">30465849.806451615</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;memoryUsage&#34;</span>: <span style="color:#ae81ff">0.0025794121526902724</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;networkTransferBytes&#34;</span>: <span style="color:#ae81ff">155958130.4459916</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;networkReceiveBytes&#34;</span>: <span style="color:#ae81ff">7025546.93011364</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;networkUsage&#34;</span>: <span style="color:#ae81ff">0.12143230242737027</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-01e1381825635108c13ad0b6aeb191c7">3 - Ruyi: Cloud native cluster autoscaling engine</h1>
    <div class="lead">Ruyi: Cloud native cluster autoscaling engine.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Ruyi provides an automated and intelligent cloud-native cluster expansion and contraction engine.</p>

</div>

<p>Ruyi provides an automated and intelligent cloud-native cluster expansion and contraction engine. Its main functions include:</p>
<ul>
<li>Autoscaling: Provides automatic expansion and contraction based on Pod Request.</li>
<li>Virtual capacity: Use automated and intelligent technology to elastically scale node capacity to support scheduling as many Pods as possible.</li>
<li>Multi-cloud support: Supports AWS, Alibaba Cloud, and more cloud service providers are being integrated.</li>
<li>Monitoring management: Provide multi-dimensional monitoring its metrics.</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-cc7d60fb60c1ccaac59ce2ceb1c8f961">3.1 - Installation and Deployment</h1>
    <div class="lead">Describes the detailed steps to install Ruyi: Cloud Native Autoscaling Engine.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Ruyi: Cloud Native Scaling Engine.</p>

</div>

<p>TBD&hellip;</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-802a1bd58ef9bdae22313856241b0f7f">3.2 - Automatic Scaling</h1>
    <div class="lead">Describes the detailed steps for installing Ruyi: the cloud-native cluster scaling engine.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Ruyi: The cloud-native cluster scaling engine.</p>

</div>

<h2 id="scaling-principles">Scaling Principles</h2>
<p>Updating, please stand by.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1d9cdd8985d61af6eb19f64872c6238c">3.3 - Configuration</h1>
    <div class="lead">Description of the configuration of Ruyi: the cloud-native cluster scaling and expansion engine.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Ruyi: Cloud-native cluster scaling and expansion engine.</p>

</div>

<h2 id="configuring-ruyi-cloud-native-cluster-scaling-and-expansion-engine">Configuring Ruyi: Cloud-native Cluster Scaling and Expansion Engine</h2>
<p>Ruyi: Cloud-native cluster scaling and expansion engine provides two main features: automatic scaling and virtual capacity. You can use either feature individually or use both features at the same time.</p>
<p>You can specify the features using the command line parameter <code>--features</code>.</p>
<p>The following describes the main configuration parameters for configuring the automatic scaling feature or the virtual capacity feature separately.</p>
<h3 id="configuring-the-automatic-scaling-feature">Configuring the Automatic Scaling Feature</h3>
<pre tabindex="0"><code>$ ruyi --features=Autoscaling --cloud-provider=alicloud --loglevel=debug --kubeconfig=/opt/ruyi/config/kubeconfig --config=/opt/ruyi/config/config.yaml
</code></pre><h3 id="configuring-the-virtual-capacity-feature">Configuring the Virtual Capacity Feature</h3>
<pre tabindex="0"><code>$ ruyi --features=VirtualCapacity --cloud-provider=alicloud --loglevel=debug --kubeconfig=/opt/ruyi/config/kubeconfig --config=/opt/ruyi/config/config.yaml --webhook-cert-dir=/opt/ruyi/certs/
</code></pre><p>The virtual capacity feature involves a virtual capacity controller and a webhook. You can control them separately using parameters.</p>
<p>For example, you can enable the virtual capacity controller alone by running the following command:</p>
<pre tabindex="0"><code>$ ruyi --features=VirtualCapacity --cloud-provider=alicloud --loglevel=debug --kubeconfig=/opt/ruyi/config/kubeconfig --config=/opt/ruyi/config/config.yaml --enable-virtual-capacity-controller=true  --enable-webhook=false
      
</code></pre><p>Or, you can start the webhook alone by running the following command:</p>
<pre tabindex="0"><code>$ ruyi --features=VirtualCapacity --cloud-provider=alicloud --loglevel=debug --kubeconfig=/opt/ruyi/config/kubeconfig --config=/opt/ruyi/config/config.yaml
--enable-virtual-capacity-controller=false  --enable-webhook=true --webhook-cert-dir=/opt/ruyi/certs/
</code></pre><p>When configuring the webhook, you must specify the <code>MutatingWebhookConfiguration</code>, as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">admissionregistration.k8s.io/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">MutatingWebhookConfiguration</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wiseinf-webhooks</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">webhooks</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">ruyi.wiseinf-system.svc</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">admissionReviewVersions</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">clientConfig</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">caBundle</span>: <span style="color:#ae81ff">&lt;CA Bundle&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">service</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">name</span>: <span style="color:#ae81ff">ruyi</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">wiseinf-system</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/mutate--v1-node</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">rules</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">apiVersions</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">operations</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#e6db74">&#34;UPDATE&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#ae81ff">nodes/status</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">scope</span>: <span style="color:#e6db74">&#34;Cluster&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">failurePolicy</span>: <span style="color:#ae81ff">Ignore</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">sideEffects</span>: <span style="color:#ae81ff">None</span>
</span></span></code></pre></div><blockquote>
<p>Note: You must correctly specify the <code>caBundle</code> in the <code>MutatingWebhookConfiguration</code> to make the webhook work properly.</p>
</blockquote>
<h3 id="environment-variables">Environment Variables</h3>
<p>When using the automatic scaling feature, you need to provide cloud service provider-related information through environment variables.</p>
<p>If you are using Alibaba Cloud, you need to configure the AccessKey and its region through environment variables.</p>
<table>
<thead>
<tr>
<th>Environment Variable Name</th>
<th>Description</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>ALIBABA_CLOUD_ACCESS_KEY_ID</td>
<td>Alibaba Cloud AccessKeyID</td>
<td>No default value</td>
</tr>
<tr>
<td>ALIBABA_CLOUD_ACCESS_KEY_SECRET</td>
<td>Alibaba Cloud AccessKeySecret</td>
<td>No default value</td>
</tr>
<tr>
<td>ALIBABA_CLOUD_REGION_ID</td>
<td>The ID of the region where the Alibaba Cloud cluster is located</td>
<td>cn-hangzhou</td>
</tr>
</tbody>
</table>
<p>If you are using AWS, you need to configure the AccessKey through environment variables.</p>
<table>
<thead>
<tr>
<th>Environment Variable Name</th>
<th>Description</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>AWS_ACCESS_KEY_ID or AWS_ACCESS_KEY</td>
<td>AWS AccessKeyID</td>
<td>No default value</td>
</tr>
<tr>
<td>AWS_SECRET_ACCESS_KEY or AWS_SECRET_KEY</td>
<td>AWS AccessKeySecret</td>
<td>No default value</td>
</tr>
<tr>
<td>AWS_ASSUME_ROLE_ARN</td>
<td>AWS ASSUME_ROLE_ARN</td>
<td>No default value</td>
</tr>
</tbody>
</table>
<p>For more detailed configuration items, please refer to:</p>
<ul>
<li><a href="/docs/ruyi/configuration/command-line">Command Line Configuration</a></li>
<li><a href="/docs/ruyi/configuration/nodegroup">Node Group Configuration</a></li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-743cd90d3c1ba1709b66bd0042c39a58">3.3.1 - Command Line Arguments</h1>
    <div class="lead">Describes the command line arguments of Ruyi: Cloud Native Cluster Autoscaling Engine.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Ruyi: Cloud Native Cluster Autoscaling Engine.</p>

</div>

<h2 id="command-line-arguments">Command Line Arguments</h2>
<p>You can get the usage of Ruyi engine by <code>--help</code>, as follows:</p>
<pre tabindex="0"><code>$ruyi --help
usage: ruyi --config=CONFIG [&lt;flags&gt;]

Flags:
      --help                     Show context-sensitive help (also try --help-long and --help-man).
  -f, --features=&#34;Autoscaling,VirtualCapacity&#34;  
                                 Enable ruyi features. Available options are Autoscaling, VirtualCapacity
      --cloud-provider=aws       Set cloud provider to use. Available options are (aws, alicloud)
      --config=CONFIG            Set config file location
      --kubeconfig=KUBECONFIG    Set kubeconfig file location
      --interval=60s             Set interval for evaluating node scale up or down
      --metrics-address=&#34;:8080&#34;  Set address for /metrics
      --health-probe-address=&#34;:8090&#34;  
                                 Set address for health probe
      --port=8443                Set port
      --dry-run                  Set dry-run argument. If true, forces dry run on all nodegroups
  -v, --loglevel=info            Set logging level. Available options are (trace, debug, info, warning, error, fatal, panic)
      --logfmt=text              Set logging format. Available options are (text, json)
      --enable-virtual-capacity-controller  
                                 Set enable virtual capacity controller
      --enable-webhook           Set enable webhook for virtual capacity
      --webhook-cert-dir=&#34;&#34;      Set webhook certificate directory
      --concurrency=5            Set concurrency
      --leader-elect             Enable leader election
      --leader-elect-lease-duration=15s  
                                 Set leader election lease duration
      --leader-elect-renew-deadline=10s  
                                 Set leader election renew deadline
      --leader-elect-retry-period=2s  
                                 Set leader election retry period
      --leader-elect-lease-namespace=&#34;wiseinf-system&#34;  
                                 Set leader election lease object namespace
      --leader-elect-lease-name=&#34;ruyi-lease&#34;  
                                 Set leader election lease object name
</code></pre><p>The following describes the parameters in detail.</p>
<h2 id="parameter-description">Parameter Description</h2>
<h3 id="--help"><code>--help</code></h3>
<p>The <code>--help</code> parameter provides the usage of the command line.</p>
<h3 id="-f---features"><code>-f, --features</code></h3>
<p>The <code>-f, --features</code> parameter indicates the features enabled by the engine. The <code>Autoscaling</code> option enables the autoscaling feature, and the <code>VirtualCapacity</code> option enables the virtual capacity feature.</p>
<p>The default value is <code>Autoscaling,VirtualCapacity</code>, which means both autoscaling and virtual capacity features are enabled by default.</p>
<h3 id="--cloud-provider"><code>--cloud-provider</code></h3>
<p>The <code>--cloud-provider</code> parameter indicates the cloud service provider used by the engine. Its value can be <code>aws</code> or <code>alicloud</code>, and the default value is <code>aws</code>.</p>
<h3 id="--config"><code>--config</code></h3>
<p>The <code>--config</code> parameter indicates the location of the node group configuration file used by the engine. For more information on the node group configuration, please see <a href="/docs/ruyi/configuration/nodegroup">Node Group Configuration</a>.</p>
<h3 id="--kubeconfig"><code>--kubeconfig</code></h3>
<p>The <code>--kubeconfig</code> parameter indicates the location of the kubeconfig file used by the engine. The default value is empty, in which case the cluster access configuration will be used.</p>
<h3 id="--interval"><code>--interval</code></h3>
<p>The <code>--interval</code> parameter indicates the scheduling interval used by the function features of the engine. For example, the autoscaling feature evaluates whether to expand or shrink the node pool at this time interval.</p>
<p>The default value is 60 seconds.</p>
<h3 id="--metrics-address"><code>--metrics-address</code></h3>
<p>The <code>--metrics-address</code> parameter indicates the port used by the monitoring metrics of the engine, from which you can obtain specific metric data at the <code>/metrics</code> endpoint.</p>
<h3 id="--health-probe-address"><code>--health-probe-address</code></h3>
<p>The <code>--health-probe-address</code> parameter indicates the monitoring probe address used by the engine, from which you can perform health probe and readiness probe at the <code>/healthz</code> and <code>/readyz</code> endpoints respectively.</p>
<h3 id="--port"><code>--port</code></h3>
<p>The <code>--port</code> parameter is the port used by the Webhook of the engine, and the default value is 8443.</p>
<h3 id="--dry-run"><code>--dry-run</code></h3>
<p>The <code>--dry-run</code> parameter indicates that the engine only runs without making any changes to the environment or nodes.</p>
<h3 id="-v---loglevelinfo"><code>-v, --loglevel=info</code></h3>
<p>The <code>--dry-run</code> parameter sets the log level. The available options are <code>trace</code>, <code>debug</code>, <code>info</code>, <code>warning</code>, <code>error</code>, <code>fatal</code>, <code>panic</code>, and the default value is <code>info</code>.</p>
<h3 id="--logfmt"><code>--logfmt</code></h3>
<p>The <code>--dry-run</code> parameter sets the output format of the log. The available options are <code>text</code>, <code>json</code>, and the default value is <code>text</code>, which means the output is in text format.</p>
<h3 id="--enable-virtual-capacity-controller"><code>--enable-virtual-capacity-controller</code></h3>
<p>The <code>--enable-virtual-capacity-controller</code> parameter indicates whether to enable the virtual capacity controller, and the default value is <code>true</code>.</p>
<h3 id="--enable-webhook"><code>--enable-webhook</code></h3>
<p>The <code>--enable-webhook</code> parameter indicates whether to enable Webhook, and the default value is <code>true</code>.</p>
<h3 id="--webhook-cert-dir"><code>--webhook-cert-dir</code></h3>
<p>The <code>--webhook-cert-dir</code> parameter indicates the directory location of the certificate when enabling Webhook. The engine will initialize the certificate of the Webhook through the files <code>tls.crt</code> and <code>tls.key</code> in this directory location.
If its value is empty, the Webhook will find the certificate in the directory <code>/tmp/k8s-webhook-server/serving-certs</code>.</p>
<h3 id="--concurrency"><code>--concurrency</code></h3>
<p>The <code>--concurrency</code> parameter indicates the number of concurrent processes. The default value is 5, but it is currently not used.</p>
<h3 id="--leader-elect"><code>--leader-elect</code></h3>
<p>The <code>--leader-elect</code> parameter sets whether to enable leader election. It is generally used in high availability environments.</p>
<h3 id="leader-elect-lease-duration"><code>leader-elect-lease-duration</code></h3>
<p>The <code>leader-elect-lease-duration</code> parameter sets the waiting time for non-master nodes to obtain the leader lease. The default value is 15 seconds.</p>
<h3 id="--leader-elect-renew-deadline"><code>--leader-elect-renew-deadline</code></h3>
<p>The <code>--leader-elect-renew-deadline</code> parameter sets the timeout for the master node to update the lease. The default value is 10 seconds.</p>
<h3 id="--leader-elect-retry-period"><code>--leader-elect-retry-period</code></h3>
<p>The <code>--leader-elect-retry-period</code> parameter sets the waiting time for nodes to retry when there is an error. The default value is 2 seconds.</p>
<h3 id="--leader-elect-lease-namespace"><code>--leader-elect-lease-namespace</code></h3>
<p>The <code>--leader-elect-lease-namespace</code> parameter sets the namespace where the lease is stored. The default value is <code>wiseinf-system</code>.</p>
<h3 id="--leader-elect-lease-name"><code>--leader-elect-lease-name</code></h3>
<p>The <code>--leader-elect-lease-name</code> parameter sets the name of the lease. The default value is <code>ruyi-lease</code>.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-311560d092771780a32c6c35dc00ad8c">3.3.2 - </h1>
    
	<h2 id="节点组配置参数">节点组配置参数</h2>
<p>Ruyi：云原生集群扩缩容引擎的节点组配置参数。</p>
<h3 id="配置示例">配置示例</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">nodeGroups</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;default-pool&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">nodeGroupId</span>: <span style="color:#e6db74">&#34;np1234567890&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">key</span>: <span style="color:#ae81ff">spot_type</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">value</span>: <span style="color:#ae81ff">cpu</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">dryRun</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enableAutoscaling</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">autoscaling</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">minNodes</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">maxNodes</span>: <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">enableScaleDown</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">scaleUp</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">threshold</span>: <span style="color:#ae81ff">0.70</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">scaleOnPodPending</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">silencePeriod</span>: <span style="color:#ae81ff">2m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">scaleDown</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">threshold</span>: <span style="color:#ae81ff">0.40</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">softDeleteGracePeriod</span>: <span style="color:#ae81ff">1m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">hardDeleteGracePeriod</span>: <span style="color:#ae81ff">10m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">maxNodeRemovalRate</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">taintEffect</span>: <span style="color:#ae81ff">NoExecute</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enableVirtualCapacity</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">virtualCapacity</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">prometheusAddress</span>: <span style="color:#e6db74">&#34;http://prometheus:9090&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">prometheusWindow</span>: <span style="color:#e6db74">&#34;2m&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">isThanos</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">thanosClusterKey</span>: <span style="color:#ae81ff">cluster</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">thanosClusterValue</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">reservationRatio</span>: <span style="color:#ae81ff">0.1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">increaseSilencePeriod</span>: <span style="color:#ae81ff">2m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">decreaseSilencePeriod</span>: <span style="color:#ae81ff">2m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">stabilityWindow</span>: <span style="color:#ae81ff">5m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">tolerance</span>: <span style="color:#ae81ff">0.1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">cpuMaxUsage</span>: <span style="color:#ae81ff">0.7</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">maxValue</span>: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">minValue</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">resourceReservation</span>: 
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">kubeReserved</span>: <span style="color:#ae81ff">200m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">systemReserved</span>: <span style="color:#ae81ff">200m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">reservedPercentage</span>: <span style="color:#ae81ff">0.1</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">alicloud</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">clusterId</span>: <span style="color:#ae81ff">c1234567890</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">lifecycle</span>: <span style="color:#ae81ff">spot</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">resourceTagging</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div><h3 id="配置参数说明">配置参数说明</h3>
<h4 id="name"><code>name</code></h4>
<p>节点组名称，用于输出日志等。不同的节点组名称必须唯一。</p>
<h4 id="labels和labelkey以及labelvalue"><code>labels</code>和<code>label.Key</code>以及<code>label.Value</code></h4>
<p>标签键值对数组，引擎通过此标签键值对数组来选择节点组。其中，<code>label.Key</code>和<code>label.Value</code>分别是键值对中的键和值。</p>
<h4 id="dryrun"><code>dryRun</code></h4>
<p>是否仅运行，不对实际环境做任何修改。该值为<code>false</code>时，可被子命令行参数的<code>dryRun</code>覆盖。</p>
<h4 id="nodegroupid"><code>nodeGroupId</code></h4>
<p>节点组ID，在云服务商的节点组ID，云服务商通过此参数来从对应云服务商获取改节点组信息。</p>
<h4 id="enableautoscaling"><code>enableAutoscaling</code></h4>
<p>指示是否启用自动扩缩容特性，默认为<code>true</code>。</p>
<h4 id="autoscaling"><code>autoscaling</code></h4>
<p>自动扩缩容配置，具体请参见<a href="#%E8%87%AA%E5%8A%A8%E6%89%A9%E7%BC%A9%E5%AE%B9%E9%85%8D%E7%BD%AE">自动扩缩容配置</a>。</p>
<h4 id="enablevirtualcapacity"><code>enableVirtualCapacity</code></h4>
<p>指示是否启用虚拟容量特性，默认为<code>true</code>。</p>
<h4 id="virtualcapacity"><code>virtualCapacity</code></h4>
<p>虚拟容量配置，具体请参见<a href="#%E8%99%9A%E6%8B%9F%E5%AE%B9%E9%87%8F%E9%85%8D%E7%BD%AE">虚拟容量配置</a>。</p>
<h4 id="alicloud"><code>alicloud</code></h4>
<p>阿里云服务商配置，具体请参见<a href="#%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%95%86%E9%85%8D%E7%BD%AE">阿里云服务商配置</a>。</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-db1b774ac87b4e433a86ed299f8a808f">3.4 - Monitoring</h1>
    <div class="lead">Describes the monitoring mechanism related to Ruyi: Cloud-Native Scaling Engine</div>
	

<div class="pageinfo pageinfo-primary">
<p>Monitoring of Ruyi: Cloud-Native Cluster Scaling Engine.</p>

</div>

<h2 id="monitoring">Monitoring</h2>
<p>The cloud-native scaling engine provides a series of monitoring metrics, supporting monitoring through Prometheus/Thanos.</p>
<h3 id="auto-scaling-metrics">Auto-Scaling Metrics</h3>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>Tags</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ruyi_autoscaling_run_count</td>
<td>None</td>
<td>Number of auto-scaling runs</td>
</tr>
<tr>
<td>ruyi_nodegroup_nodes</td>
<td>nodegroup: Node group name<br/>type: Node type</td>
<td>Number of nodes of each type in the node group</td>
</tr>
<tr>
<td>ruyi_nodegroup_pods</td>
<td>nodegroup: Node group name</td>
<td>Number of Pods of each type in the node group</td>
</tr>
<tr>
<td>ruyi_nodegroup_request</td>
<td>nodegroup: Node group name<br/>resource: Resource type</td>
<td>Request volume of the node group</td>
</tr>
<tr>
<td>ruyi_nodegroup_capacity</td>
<td>nodegroup: Node group name<br/>resource: Resource type</td>
<td>Capacity of the node group</td>
</tr>
<tr>
<td>ruyi_nodegroup_percent</td>
<td>nodegroup: Node group name<br/>resource: Resource type</td>
<td>Percentage of request volume of the node group</td>
</tr>
<tr>
<td>ruyi_nodegroup_scale_delta</td>
<td>nodegroup: Node group name</td>
<td>Node adjustment amount of the node group</td>
</tr>
<tr>
<td>ruyi_nodegroup_size</td>
<td>nodegroup: Node group name<br/>id: Node group ID<br/>cloud_provider: Cloud provider<br/>type: Type</td>
<td>Size of the node group</td>
</tr>
</tbody>
</table>
<h3 id="virtual-capacity-metrics">Virtual Capacity Metrics</h3>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>Tags</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ruyi_virtual_capacity_run_count</td>
<td></td>
<td>Number of virtual capacity runs</td>
</tr>
<tr>
<td>ruyi_node_request_sum</td>
<td>node: Node name<br/>id: Node group ID<br/>nodegroup: Node group name<br/>resource: Resource type</td>
<td>Node request volume</td>
</tr>
<tr>
<td>ruyi_node_allocatable</td>
<td>node: Node name<br/>id: Node group ID<br/>nodegroup: Node group name<br/>resource: Resource type</td>
<td>Allocatable of node virtual capacity</td>
</tr>
<tr>
<td>ruyi_virtual_capacity_ratio</td>
<td>node: Node name<br/>id: Node group ID<br/>nodegroup: Node group name<br/>type: Type</td>
<td>Virtual capacity ratio</td>
</tr>
</tbody>
</table>
<p>Additionally, users can also view the actual changes in virtual capacity through the Kubernetes metric <code>kube_node_status_allocatable</code>.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-583a7f09d0feaa261a5b4bd84a75d62a">3.5 - FAQ</h1>
    <div class="lead">Common questions and troubleshooting processes for using Ruyi: the cloud-native cluster scaling engine.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Common questions and troubleshooting processes for using Ruyi: the cloud-native cluster scaling engine.</p>

</div>

<p>Updating, please wait.</p>
<!-- ## Issue 1:

## Issue 2:

## Issue 3: -->
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9bc01fd7dcd71c629d9b0497e453387a">3.6 - </h1>
    
	<p>Virtual capacity is a technology that increases the node capacity by three times (or even more) of its original capacity under certain conditions, thereby supporting the scheduling of more Pods (applications) on the node. With virtual capacity, users can significantly save on their IT costs.</p>
<p>To understand virtual capacity, you must first understand the scheduling mechanism of Kubernetes. In Kubernetes, scheduling is the process of assigning an application&rsquo;s Pods to the nodes on which they will run. When a Pod is scheduled, its resource requirements are usually specified. For CPU resources, its Request and Limit attributes (referred to as CPU Request and CPU Limit respectively) are specified. For nodes in Kubernetes, they generally have capacity attributes and allocable capacity upper limit attributes. The capacity attributes include: 1. Capacity: the upper limit of the node’s capacity; 2. Allocatable: the upper limit of the node’s allocable capacity, which will be removed based on the upper limit of the node capacity. It is obtained from some resources used by the system and some reserved resources. When Kubernetes schedules, in terms of capacity, it mainly considers whether the Pod&rsquo;s CPU Request and the node&rsquo;s Allocatable match. The meaning of matching means: the remaining capacity of the current node Allocatable should be greater than or equal to the CPU Request of the current Pod.</p>
<p>When the remaining capacity of the node Allocatable is less than the current Pod&rsquo;s CPU Request, the Pod cannot be scheduled to this node. At this time, scheduling will consider other nodes. When all nodes do not meet the requirements, the Pod will be suspended directly and wait for suitable resources to be scheduled again. When a Pod is suspended, some Kubernetes providers provide a cluster expansion and contraction mechanism. When users enable this mechanism, new nodes will be expanded in the cluster and the Pod will be scheduled to the new node.</p>
<p>In fact, when the remaining capacity of the node Allocatable is less than the current Pod&rsquo;s CPU Request, the usage on the current node may be low, and the actual remaining resources on the node are greater than the current Pod&rsquo;s CPU Request. Theoretically, the Pod can be scheduled to this node. Virtual capacity provides a mechanism to expand the Allocatable value of a node under certain conditions, allowing the scheduler to consider that the remaining capacity of the Allocatable of the current node is still greater than or equal to the CPU Request of the current Pod, thereby scheduling the Pod to the node.</p>
<p>By expanding the virtual capacity of nodes, IT costs can be significantly saved, especially in situations such as development and testing where resource utilization is low.</p>
<p>It should be noted that scheduling too many Pods on a node may have a certain impact on the stability of the node and application. Therefore, it is necessary to set appropriate values according to actual conditions and use some balanced scheduling algorithms.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="帮助和支持" aria-label="帮助和支持">
    <a class="text-white" target="_blank" rel="noopener" href="mailto:help@wiseinf.com?subject=%e5%b8%ae%e5%8a%a9%e5%92%8c%e6%94%af%e6%8c%81" aria-label="帮助和支持">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="商务合作" aria-label="商务合作">
    <a class="text-white" target="_blank" rel="noopener" href="mailto:business@wiseinf.com?subject=%e5%95%86%e5%8a%a1%e5%90%88%e4%bd%9c" aria-label="商务合作">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="网站源码" aria-label="网站源码">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/wiseinf/wiseinf.github.io" aria-label="网站源码">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2024 Wiseinf Inc. All Rights Reserved</small>
        
        
        
	
		<p class="mt-2"><a href="/about/">About Us</a></p>
	
      </div>
    </div>
  </div>
</footer>

    </div>
    
<script src="/local/cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="/local/stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>











<script src="/js/main.min.604e1b596f799449dffc6f056b597a5d8c1bfedb73f2844175ff85802887b69d.js" integrity="sha256-YE4bWW95lEnf/G8Fa1l6XYwb/ttz8oRBdf&#43;FgCiHtp0=" crossorigin="anonymous"></script>




  </body>
</html>
