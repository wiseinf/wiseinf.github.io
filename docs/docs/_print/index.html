<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.121.2">
<link rel="canonical" type="text/html" href="/docs/">
<link rel="alternate" type="application/rss&#43;xml" href="/docs/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Documentation | Wiseinf</title>
<meta name="description" content="Cloud Native Application Cost Management And Optimization Platform">
<meta property="og:title" content="Documentation" />
<meta property="og:description" content="Cloud Native Application Cost Management And Optimization Platform" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/" /><meta property="og:site_name" content="Wiseinf" />

<meta itemprop="name" content="Documentation">
<meta itemprop="description" content="Cloud Native Application Cost Management And Optimization Platform"><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Documentation"/>
<meta name="twitter:description" content="Cloud Native Application Cost Management And Optimization Platform"/>




<link rel="preload" href="/scss/main.min.b9f908f9939278827beae3d5d8ede093dde52fd2c4bcdf7ba620a3d524d46875.css" as="style">
<link href="/scss/main.min.b9f908f9939278827beae3d5d8ede093dde52fd2c4bcdf7ba620a3d524d46875.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-STB7S5D1BR"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-STB7S5D1BR');
}
</script>
  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="90" height="60" viewBox="0 0 90 60" enable-background="new 0 0 90 60"><image id="image0" width="90" height="60" x="0" y="0" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAAA8CAMAAADR2113AAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUVBMVEUAAAA/R8s/ScwAoeci u1UisEwisEwzzGYhsUshsUwisUsAf38hsUshsEsisEwAqlUhsEwhsEshsU0isUoisUwA/wA/SMwA ougisUyZ2er///8l8mu7AAAAFnRSTlMAmUyZD4XZBWzxfQKoqKMDgutMd6EBrgesWwAAAAFiS0dE GnVn5DIAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAHdElNRQfmCwIILDYpiAQqAAAAuElEQVRYw+3V yQ7CMAxFUQMZmpZOKQXz/z8KRYLSxrCAFwkJ322ks4jimGhqc5TaTke7kxTNGet4yllDQp/Tvgh8 L5QVkt7zczWO9kuZuWlRdMHrOhBtQkL3HkNbTrMY2gm0w9AsBaGjSMf/pTPedc4XkvFdZ5xGKhN6 QH1PVb2SDyOKJmqWMhGObrt+vudhRNLXdfDYjZ4IS9/mMkZ60bf0m5T+efospbTSSiuttNJKK620 0kpnoC8F20SzlPhKcAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMi0xMS0wMlQwODo0NDo1NCswMDow MEh3G+0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjItMTEtMDJUMDg6NDQ6NTQrMDA6MDA5KqNRAAAA KHRFWHRkYXRlOnRpbWVzdGFtcAAyMDIyLTExLTAyVDA4OjQ0OjU0KzAwOjAwbj+CjgAAAABJRU5E rkJggg=="/></svg></span><span class="navbar-brand__name">Wiseinf</span></a>
<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
  <ul class="navbar-nav mt-2 mt-lg-0">
    <li class="nav-item dropdown mr-4 d-none d-lg-block">
      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
      aria-haspopup="true" aria-expanded="false"><span>Product</span></a>
      <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
        <a class="dropdown-item" href="/products/cluster-optimizer"> Cluster Optimizer: Cloud Native Optimization Platform </a>
        <a class="dropdown-item" href="/products/wisecost"> Wisecost: Cloud Native Cost Management Platform </a>
        <a class="dropdown-item" href="/products/ruyi"> Ruyi: Cloud Native Cluster Autoscaling Engine</a>
      </div>
      </li>
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
      <a class="nav-link active" href="/docs/"><span class="active">Documentation</span></a>
      </li>
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
      <a class="nav-link" href="/pricing/"><span>Price</span></a>
      </li>
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
      <a class="nav-link" href="/services/"><span>Service</span></a>
      </li>
      <li class="nav-item dropdown mr-4 d-none d-lg-block">
      

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	English
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/zh-cn/docs/">中文</a>
	
</div></li>
    </ul>
</div>
<div class="navbar-nav d-none d-lg-block">
  
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/docs/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Documentation</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-f5c816802ec0d033e8fcd3e337a29c96">Cluster Optimizer</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>1.1: <a href="#pg-319d547359ece75bc8828c67e98da1cf">Setup</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.2: <a href="#pg-da59e19291384c4c46aa84925c92b66c">Import Cluster from AWS</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.3: <a href="#pg-ab611226a338ba3cf65a94042e8aa36a">Import Cluster from Alibaba Cloud</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.4: <a href="#pg-cbcde0fe6010529c37131204023b7771">Cluster Overview</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.5: <a href="#pg-a8e419965395a39fb951fa1137e17781">Node Group Optimization</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.6: <a href="#pg-60fb2e0d684559cca943f114bbb23b17">Node Optimization</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.7: <a href="#pg-41a35fffa4c7fd6466728b424aab2998">Disk Optimization</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.8: <a href="#pg-ec4c2c1254809868f664e7266e289938">Persistent Volume Optimization</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.9: <a href="#pg-077e156274fb7d892f55e54292de72da">Application Optimization</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.10: <a href="#pg-59433918ea6352feee5c1be31d444da6">Actions</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>1.10.1: <a href="#pg-e5317a50be5f60389a870e53936cc8fe">Adjusting Node Group</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.10.2: <a href="#pg-03f9f5793f01d1a5c0d73ab6c2188f62">Adjustment Node</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.10.3: <a href="#pg-dd0a6bec28b976f1e6fcb2ed4dd92dce">Adjust Disk</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>1.10.4: <a href="#pg-a9d4bc444784b49b0ea98c5b3948d07d">Delete Persistent Volume</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-dacaf1e373c2472c1efbf2a9b2acf54b">Wisecost</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.1: <a href="#pg-d1501d8c0fcaf4a0c0134a7c69ba635e">Installation and Deployment</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.2: <a href="#pg-f8724eef5ecfc709ba9ec953f1658ee2">Import Alibaba Cloud Cluster</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3: <a href="#pg-79c3c5401e75cd51b9d3c28865234518">View cluster costs</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.4: <a href="#pg-8aaf6cb4995450b6fc76e7ad887b0eb3">View node costs</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.5: <a href="#pg-aea197f3575cb0df1ded1df55290950c">View application costs</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.6: <a href="#pg-0d313d792f0ef08d3b1695b67d8bddea">Cost Optimization</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.7: <a href="#pg-eb8dcf79b1b7f912ed56305be6f0297f">Development Manual</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.7.1: <a href="#pg-7498afe225cc47a707df513f40a91ac6">API Documentation</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.7.2: <a href="#pg-ac38a1975f478ccb8a2806eda6f684b8">API interface reference</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-01e1381825635108c13ad0b6aeb191c7">Ruyi</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.1: <a href="#pg-cc7d60fb60c1ccaac59ce2ceb1c8f961">Installation and Deployment</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.2: <a href="#pg-802a1bd58ef9bdae22313856241b0f7f">Autoscaling</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.3: <a href="#pg-9bc01fd7dcd71c629d9b0497e453387a">Virtual Capacity</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.4: <a href="#pg-1d9cdd8985d61af6eb19f64872c6238c">Configuration</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.4.1: <a href="#pg-743cd90d3c1ba1709b66bd0042c39a58">Command line parameters</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.4.2: <a href="#pg-311560d092771780a32c6c35dc00ad8c">Node group configurations</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>3.5: <a href="#pg-db1b774ac87b4e433a86ed299f8a808f">Monitoring</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.6: <a href="#pg-583a7f09d0feaa261a5b4bd84a75d62a">FAQ</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  

    </ul>


<div class="content">
      

<div class="pageinfo pageinfo-primary">
<p>This section includes documentation related to all products, services, and solutions.</p>

</div>


</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-f5c816802ec0d033e8fcd3e337a29c96">1 - Cluster Optimizer</h1>
    <div class="lead">Cloud native cluster optimization platform.</div>
	

<div class="pageinfo pageinfo-primary">
<p><strong>Cluster Optimizer</strong> is a cloud native cluster optimization platform, provides cluster optimization capabilities to help users better optimize clusters and applications, ensure stability, and avoid waste.</p>

</div>

<p>Cluster optimizer can assist users in optimizing their kubernetes clustersand its workloads, with key features including:</p>
<ul>
<li>Providing a variety of optimization strategies, including recommendations for node groups, nodes, disks, Persistent volumes, and applications.</li>
<li>Cloud account (credential) management and cluster management.</li>
</ul>
<p>We provides more features in business version:</p>
<ul>
<li>High availibility.</li>
<li>Authentication and authorization.</li>
<li>Alert.</li>
<li>Advanced optimization strategies with more intelligent models.</li>
<li>Automated actions on adjust nodes, reduce persistet volumes, and reduce application resource and so on.</li>
<li>&hellip;</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-319d547359ece75bc8828c67e98da1cf">1.1 - Setup</h1>
    <div class="lead">Instructions for installing the <strong>Cluster Optimizer</strong>  on Kubernetes.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Instructions for installing the <strong>Cluster Optimizer</strong>  on Kubernetes.</p>

</div>

<h2 id="preconditions">Preconditions</h2>
<ul>
<li>Mysql database, version 5.7 and above</li>
<li>kubernetes cluster, version 1.22 and above</li>
<li>Git</li>
</ul>
<h2 id="clone-installation-script">Clone installation script</h2>
<blockquote>
<p>We assume the installation script library has been cloned into <code>setup</code> subdirectory of user&rsquo;s home directory.</p>
</blockquote>
<ol>
<li>Clone installation script into local using git:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    cd ~
</span></span><span style="display:flex;"><span>    git clone https://github.com/wiseinf/setup.git
</span></span></code></pre></div></li>
<li>Navigate to the <code>setup</code> directory.
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>   cd setup
</span></span></code></pre></div>The installation directory contains:
<ul>
<li>SQL script in <code>clusteroptimizer/sql/</code></li>
<li>Kubernetes YAML files in <code>clusteroptimizer/</code></li>
</ul>
</li>
</ol>
<h2 id="setup-optimizer-database">Setup <code>optimizer</code> database</h2>
<blockquote>
<p>Assume the Mysql database host address is: <code>127.0.0.1</code>.</p>
</blockquote>
<ol>
<li>Login into mysql database using:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    mysql -h127.0.0.1 -uroot
</span></span></code></pre></div></li>
<li>Create <code>optimizer</code> database and its user <code>optimizer</code> with default password <code>Optimizer~</code> :
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    mysql&gt; source ~/setup/clusteroptimizer/sql/create_database.sql
</span></span><span style="display:flex;"><span>    mysql&gt; source ~/setup/clusteroptimizer/sql/create_user.sql
</span></span></code></pre></div><blockquote>
<p>Note: Please be aware of the risk of data loss. The script will drop <code>optimizer</code> database/schema first and then create a new <code>optimizer</code>. If you already have an <code>optimizer</code> database, your data in this database will be lost.</p>
</blockquote>
</li>
<li>Check if <code>optimizer</code> database is created using:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    mysql -h127.0.0.1 -uoptimizer 
</span></span><span style="display:flex;"><span>    mysql&gt; show databases;
</span></span></code></pre></div>When propmted to input password, you can use the default password <code>Optimizer~</code>.</li>
<li>Check permission by create a <code>test</code> table:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    mysql&gt; USE optimizer;
</span></span><span style="display:flex;"><span>    mysql&gt; CREATE TABLE test <span style="color:#f92672">(</span>id int<span style="color:#f92672">)</span>;
</span></span></code></pre></div>If the table is created successfully, the permission is granted.</li>
<li>Congratulations! You have successfully setup <code>optimizer</code> database.</li>
</ol>
<h2 id="setup-deployment-cluster-optimizer">Setup deployment <strong>Cluster Optimizer</strong></h2>
<ol>
<li>Create namespace <code>wiseinf-system</code> using:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    kubectl apply -f ~/setup/clusteroptimizer/namespace.yaml
</span></span></code></pre></div></li>
<li>Create deployment <code>optimizer</code> using:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    kubectl apply -f ~/setup/clusteroptimizer/namespace.yaml
</span></span></code></pre></div><blockquote>
<p>NOTE: you should adjust the <strong>ConfigMap</strong> <code>optimizer-conf</code> in the file <code>~/setup/clusteroptimizer/optimizer.yaml</code>, change the value of <code>storage.dataSource.name</code> and <code>optimize.dataSource.name</code> according to your <code>optimizer</code> database&rsquo;s information.</p>
</blockquote>
</li>
<li>Check if <code>optimizer</code> is running:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    kubectl get pods -n wiseinf-system
</span></span></code></pre></div>You can get:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    NAME                         READY   STATUS    RESTARTS   AGE
</span></span><span style="display:flex;"><span>    optimizer-5b956655df-gspq6   2/2     Running   <span style="color:#ae81ff">0</span>          1m
</span></span></code></pre></div></li>
<li>Create a <strong>port-forward</strong> to access <code>optimizer</code> service:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    kubectl port-forward svc/optimizer 80:80
</span></span></code></pre></div></li>
<li>Open your browser and visit url <code>http://localhost/</code>.</li>
<li>If you can see the home page of <strong>Cluster Optimizer</strong>, you have successfully setup <code>optimizer</code>.</li>
</ol>
<h2 id="next-import-a-cluster">Next: Import a cluster</h2>
<p>Next, you can import a cluster and view its optimization recommendations. For details, please visit following links:</p>
<ul>
<li><a href="/docs/cluster-optimizer/import-aws">Import Cluster from AWS</a></li>
<li><a href="/docs/cluster-optimizer/import-aliyun">Import Cluster from Alibaba Cloud</a></li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-da59e19291384c4c46aa84925c92b66c">1.2 - Import Cluster from AWS</h1>
    <div class="lead">Instructions for importing an AWS EKS cluster into <strong>Cluster Optimizer</strong>.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Instructions for importing an kubernetes cluster from AWS into <strong>Cluster Optimizer</strong>.</p>

</div>

<h2 id="preconditions">Preconditions</h2>
<ol>
<li>
<p>An IAM user and its associated AWS access key are needed. The IAM user should have following permissions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;Version&#34;</span>: <span style="color:#e6db74">&#34;2012-10-17&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;Statement&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Sid&#34;</span>: <span style="color:#e6db74">&#34;Optimizer&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Effect&#34;</span>: <span style="color:#e6db74">&#34;Allow&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Action&#34;</span>: [
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ec2:DescribeInstances&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ec2:DescribeRegions&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ec2:DescribeVolumes&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ec2:DescribeLaunchTemplates&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;ec2:DescribeLaunchTemplateVersions&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;eks:ListClusters&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;eks:DescribeCluster&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;eks:ListNodegroups&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;eks:DescribeNodegroup&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;autoscaling:DescribeAutoScalingInstances&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;autoscaling:DescribeAutoScalingGroups&#34;</span>,
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Resource&#34;</span>: <span style="color:#e6db74">&#34;*&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>NOTE: more information about access keys and permissions, you can refer to <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html">Managing access keys for IAM users</a>
and <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_permissions.html">Managing permissions for IAM users</a>.</p>
</blockquote>
</li>
<li>
<p>An kubernetes cluster, version 1.22 or above. ACK cluster is recommended.</p>
</li>
<li>
<p>You need to provide a kubeconfig file associate with the IAM user to access kubernetes cluster. Meanwhile, you need to grant following cluster roles to the IAM user.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">rbac.authorization.k8s.io/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterRole</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">rules</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">nodes</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">pods</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">pods/status</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">persistentvolumes</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">persistentvolumeclaims</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">services</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">namespaces</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">verbs</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">get</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">list</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">watch</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;apps/v1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">deployments</span>
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">replicasets</span>
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">replicationcontollers</span>
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">statefulsets</span>
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">daemonsets</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">verbs</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">get</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">list</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">watch</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;batch/v1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">jobs</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">cronjobs</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">verbs</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">get</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">list</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">watch</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;storage/v1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">storageclasses</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">verbs</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">get</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">list</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">watch</span>
</span></span></code></pre></div></li>
<li>
<p>Prometheus/Thanos address related to the kubernetes cluster.</p>
</li>
<li>
<p>The <strong>Cluster Optimizer</strong> application can access to the EKS cluster and Prometheus/Thanos.</p>
</li>
</ol>
<h2 id="import-kuberentes-cluster">Import Kuberentes Cluster</h2>
<h3 id="add-cloud-account">Add Cloud Account</h3>
<ol>
<li>
<p>Go to cloud account management page from <code>Settings --&gt; Cloud Accounts</code>, as shown below.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aws/cp01_hu5c4c06a7df7a988825c412e165e21447_52180_900x0_resize_catmullrom_3.png" width="900" height="249">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
  Cloud account management
  <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
</li>
<li>
<p>Click the <code>New</code> button to add a cloud account. You can input <code>Name</code>, select <code>Amazon AWS</code> as <code>Cloud Provider</code>, then input <code>Access Key</code> and <code>Access Key Secret</code>, and finally click <code>Confirm</code>. You can also test connectivity by click <code>Test Connectivity</code> after input the <code>Access Key</code> and <code>Access Key Secret</code>.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 510px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aws/cp02_hud87fef13bd345c9648ce469534f5fe27_28084_500x0_resize_catmullrom_3.png" width="500" height="349">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
  Add cloud account
  <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
</li>
</ol>
<h3 id="import-cluster">Import Cluster</h3>
<ol>
<li>
<p>Go to cluster management page from <code>Settings --&gt; Clusters</code>, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aws/cluster01_huc5910487c86921173b505abee2b88bd6_56131_900x0_resize_catmullrom_3.png" width="900" height="255">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
    Cluster Management
    <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

</li>
<li>
<p>Click <code>Import Cluster</code> button, then click <code>AWS</code> cloud provider logo to start importing a cluster from AWS. It contains five steps:</p>
<ol>
<li>Connect to AWS</li>
<li>Connect to kubernetes</li>
<li>Connect to metrics server</li>
<li>View configurations</li>
<li>Finish</li>
</ol>
</li>
<li>
<p>In the <code>Connect to AWS</code> step, choose <code>Using Existing Access Token</code>, select cloud account created in section <code>Add Cloud Account</code>, as shown below.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aws/cluster02_hud14b9d8e86b48083788dc10ebd59a5cf_31834_600x0_resize_catmullrom_3.png" width="600" height="144">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Import Cluster: Connect to AWS
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

Then click &lsquo;Next&rsquo; button to go to step <code>Connect to kubernetes</code>.</p>
</li>
<li>
<p>In the <code>Connect to kubernetes</code> step, choose <code>Managed cluster</code>, select <code>Region</code> first, select <code>Cluster</code>, and fill following fields, as shown below.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Field</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Description</code></td>
<td style="text-align:left">Details about the cluster</td>
</tr>
<tr>
<td style="text-align:left"><code>Using Private API Server Address</code></td>
<td style="text-align:left">Whether to use private API Server address which is more secure.</td>
</tr>
<tr>
<td style="text-align:left"><code>Kubeconfig</code></td>
<td style="text-align:left">The kubeconfig content to connect to the cluster.</td>
</tr>
<tr>
<td style="text-align:left"><code>Auto Refresh Kubeconfig</code></td>
<td style="text-align:left">Indicate whether to automatically refresh the kubeconfig content.</td>
</tr>
<tr>
<td style="text-align:left"><code>Node Group Label</code></td>
<td style="text-align:left">Used to identify the node group of a node. For EKS, the default value is <code>eks.amazonaws.com/nodegroup</code>.</td>
</tr>
</tbody>
</table>
<p>






<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aws/cluster03_huaede05d06ebd4715af67a2cc4d16efe0_65191_600x0_resize_catmullrom_3.png" width="600" height="401">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
    Import Cluster: Connect to kubernetes cluster
    <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

Then click &lsquo;Next&rsquo; button to go to step <code>Connect to metrics server</code> step.</p>
</li>
<li>
<p>In the <code>Connect to metrics server</code> step, fill following fields, as shown below.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Field</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Is Thanos</code></td>
<td style="text-align:left">If the metric server is Thanos, this should be checked.</td>
</tr>
<tr>
<td style="text-align:left"><code>Prometheus address</code></td>
<td style="text-align:left">Prometheus address, must be accessible.</td>
</tr>
<tr>
<td style="text-align:left"><code>Enable Rate Limit</code></td>
<td style="text-align:left">You shoud enable it when you want to control rate limit to metrics server.</td>
</tr>
<tr>
<td style="text-align:left"><code>Max Burst</code></td>
<td style="text-align:left">Specify the maximum number of concurrencies to metrics server.</td>
</tr>
<tr>
<td style="text-align:left"><code>Cluster Label</code></td>
<td style="text-align:left">Used as label name to filter metrics of the cluster from metrics server.</td>
</tr>
<tr>
<td style="text-align:left"><code>Cluster Label Value</code></td>
<td style="text-align:left">Used as label value to filter metrics of the cluster from metrics server.</td>
</tr>
</tbody>
</table>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aws/cluster04_hu1d55b1ab6eb4dcdf74815194b18983c1_48046_600x0_resize_catmullrom_3.png" width="600" height="293">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
    Import Cluster: Connect to metrics server
    <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>Then click &lsquo;Next&rsquo; button to go to <code>View configurations</code> step.</p>
</li>
<li>
<p>In the <code>View configurations</code> step, it displays configurations on connecting to AWS cloud, connecting to kubernetes cluster, connecting to metrics server. You can check if the configuration is as expected.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aws/cluster05_hu52d4d6dc9594716aff3c6430809bdb8a_83632_600x0_resize_catmullrom_3.png" width="600" height="352">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
    Import Cluster: View configurations
    <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

When you confirm these configurations, you can click <code>Import</code> button to go to <code>Finish</code> step.</p>
</li>
<li>
<p>In the <code>Finish</code> step, it will disply the submission status, as shown below. You can click <code>Finish</code> button when the submission status showns the cluster is imported.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-aws/cluster06_hudedf721fa512f165b8ccadb4b0dd51f5_40940_600x0_resize_catmullrom_3.png" width="600" height="181">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
    Import Cluster: Finish
    <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

</li>
</ol>
<h2 id="next">Next</h2>
<p>After imported the cluster, you can view optimization recommendations of the cluster in many aspect.</p>
<ul>
<li><a href="/docs/clusteroptimizer/nodegroup">Node group</a></li>
<li><a href="/docs/clusteroptimizer/node">Node</a></li>
<li><a href="/docs/clusteroptimizer/disk">Disk</a></li>
<li><a href="/docs/clusteroptimizer/pv">Persistent volume</a></li>
<li><a href="/docs/clusteroptimizer/application">Application</a></li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ab611226a338ba3cf65a94042e8aa36a">1.3 - Import Cluster from Alibaba Cloud</h1>
    <div class="lead">Instructions for importing an ACK cluster from alibaba cloud into <strong>Cluster Optimizer</strong>.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Instructions for importing an ACK cluster from alibaba cloud into <strong>Cluster Optimizer</strong>.</p>

</div>

<h2 id="preconditions">Preconditions</h2>
<ol>
<li>Obtain the Alibaba Cloud Access Key and Access Key Secret with following permissions. For the specific application process, please refer to <a href="https://help.aliyun.com/document_detail/116401.htm">Create Access Key</a>.
<table>
<thead>
<tr>
<th>Services</th>
<th>Permissions</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cloud Server (ECS)</td>
<td>ecs:DescribeDisks<br/> ecs:DescribeInstances<br/> ecs:DescribeRegions</td>
<td>These permissions are required to obtain disk, instance and region information</td>
</tr>
<tr>
<td>Container Service Kubernetes version (CS)</td>
<td>cs:DescribeClusterNodePools<br/> cs:DescribeClusterNodePoolDetail<br/> cs:DescribeClusters <br/> cs:DescribeClusterUserKubeconfig<br/> cs:DescribeClusterNodes</td>
<td>These permission are required to obtain the cluster, node pool, node, kubeconfig, etc.</td>
</tr>
</tbody>
</table>
</li>
</ol>
<p>The permission policy file is described as follows. You can import the policy directly in the Alibaba Cloud console. For details, please refer to [Creating a custom permission policy through script editing mode](<a href="https://help.aliyun.com/zh/ram/user-">https://help.aliyun.com/zh/ram/user-</a> guide/create-a-custom-policy#section-kwn-gu8-48m)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;Version&#34;</span>: <span style="color:#e6db74">&#34;1&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;Statement&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;Effect&#34;</span>: <span style="color:#e6db74">&#34;Allow&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;Action&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;ecs:DescribeDisks&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;ecs:DescribeInstances&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;ecs:DescribeRegions&#34;</span>
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;Resource&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;*&#34;</span>
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;Condition&#34;</span>: {}
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;Effect&#34;</span>: <span style="color:#e6db74">&#34;Allow&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;Action&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;cs:DescribeClusterNodePools&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;cs:DescribeClusterNodePoolDetail&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;cs:DescribeClusters&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;cs:DescribeClusterUserKubeconfig&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;cs:DescribeClusterNodes&#34;</span>
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;Resource&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;*&#34;</span>
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;Condition&#34;</span>: {}
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol start="2">
<li>
<p>An kubernetes cluster, version 1.22 or above. ACK cluster is recommended. For details, please see <a href="https://help.aliyun.com/zh/ack/">Container Service Kubernetes version</a></p>
</li>
<li>
<p>An kubeconfig for connecting above kubernetes cluster. It requires the following permissions.</p>
<table>
<thead>
<tr>
<th>Resources</th>
<th>Permissions</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Node</td>
<td>List<br/>Get<br/> Watch</td>
<td>Get node information</td>
</tr>
<tr>
<td>Pod</td>
<td>List<br/>Get<br/> Watch</td>
<td>Get Pod information</td>
</tr>
<tr>
<td>Namespace</td>
<td>List<br/>Get<br/> Watch</td>
<td>Get Namespace information</td>
</tr>
<tr>
<td>Service</td>
<td>List<br/>Get<br/> Watch</td>
<td>Get Service information</td>
</tr>
<tr>
<td>Persistent Volume<br/> Persistent Volume Claim</td>
<td>List<br/>Get<br/> Watch</td>
<td>Get Persistent Volume, Persistent Volume Claim information</td>
</tr>
<tr>
<td>Deployment<br/>StatefulSet<br/>DaemonSet<br/><br/>ReplicaSet<br>ReplicationControllers<br/></td>
<td>List<br/>Get<br/> Watch</td>
<td>Get Deployment, StatefulSet, DaemonSet, ReplicaSet , ReplicationContoller information</td>
</tr>
<tr>
<td>Job<br/>CronJob</td>
<td>List<br/>Get<br/> Watch</td>
<td>Get Job and CronJob information</td>
</tr>
</tbody>
</table>
</li>
</ol>
<p>The permissions file is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">rbac.authorization.k8s.io/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterRole</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">optimizer</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">rules</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">nodes</span>
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">pods</span>
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">pods/status</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">persistentvolumes</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">persistentvolumeclaims</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">services</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">namespaces</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">verbs</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">get</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">list</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">watch</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;apps/v1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">deployments</span>
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">replicasets</span>
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">replicationcontollers</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">statefulsets</span>
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">daemonsets</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">verbs</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">get</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">list</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">watch</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;batch/v1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">jobs</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">cronjobs</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">verbs</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">get</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">list</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">watch</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;storage/v1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">storageclasses</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">verbs</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">get</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">list</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">watch</span>
</span></span></code></pre></div><ol start="4">
<li>
<p>Prometheus/Thanos address related to the kubernetes cluster.</p>
</li>
<li>
<p>The <strong>Cluster Optimizer</strong> application can access to the EKS cluster and Prometheus/Thanos.</p>
</li>
</ol>
<h2 id="import-steps">Import steps</h2>
<h3 id="add-cloud-account">Add Cloud Account</h3>
<ol>
<li>
<p>Go to cloud account management page from <code>Settings --&gt; Cloud Accounts</code>, as shown below.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-alibaba/cp01_hu5c4c06a7df7a988825c412e165e21447_52180_900x0_resize_catmullrom_3.png" width="900" height="249">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
  Cloud account management
  <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
</li>
<li>
<p>Click the <code>New</code> button to add a cloud account. You can input <code>Name</code>, select <code>Amazon AWS</code> as <code>Cloud Provider</code>, then input <code>Access Key</code> and <code>Access Key Secret</code>, and finally click <code>Confirm</code>. You can also test connectivity by click <code>Test Connectivity</code> after input the <code>Access Key</code> and <code>Access Key Secret</code>.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 510px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-alibaba/cp02_hu99c19586e0a6535f99dd58fb40b73fe9_28035_500x0_resize_catmullrom_3.png" width="500" height="349">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
  Add cloud account
  <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
</li>
</ol>
<h3 id="import-cluster">Import Cluster</h3>
<ol>
<li>
<p>Go to cluster management page from <code>Settings --&gt; Clusters</code>, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-alibaba/cluster01_huc5910487c86921173b505abee2b88bd6_56131_900x0_resize_catmullrom_3.png" width="900" height="255">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
    Cluster Management
    <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

</li>
<li>
<p>Click <code>Import Cluster</code> button, then click <code>Alibaba Cloud</code> cloud provider logo to start importing a cluster from alibaba cloud. It contains five steps:</p>
<ol>
<li>Connect to alibaba cloud</li>
<li>Connect to kubernetes</li>
<li>Connect to metrics server</li>
<li>View configurations</li>
<li>Finish</li>
</ol>
</li>
<li>
<p>In the <code>Connect to alibaba cloud</code> step, choose <code>Using Existing Access Token</code>, select cloud account created in section <code>Add Cloud Account</code>, as shown below.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-alibaba/cluster02_hua091243aa094dc1c2f50e2a977f9c069_33806_600x0_resize_catmullrom_3.png" width="600" height="180">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Import Cluster: Connect to alibaba cloud
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

Then click &lsquo;Next&rsquo; button to go to step <code>Connect to kubernetes</code>.</p>
</li>
<li>
<p>In the <code>Connect to kubernetes</code> step, choose <code>Managed cluster</code>, select <code>Region</code> first, select <code>Cluster</code>, and fill following fields, as shown below.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Field</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Description</code></td>
<td style="text-align:left">Details about the cluster</td>
</tr>
<tr>
<td style="text-align:left"><code>Using Private API Server Address</code></td>
<td style="text-align:left">Whether to use private API Server address which is more secure.</td>
</tr>
<tr>
<td style="text-align:left"><code>Kubeconfig</code></td>
<td style="text-align:left">The kubeconfig content to connect to the cluster.</td>
</tr>
<tr>
<td style="text-align:left"><code>Auto Refresh Kubeconfig</code></td>
<td style="text-align:left">Indicate whether to automatically refresh the kubeconfig content.</td>
</tr>
<tr>
<td style="text-align:left"><code>Kubeconfig Lifecycle</code></td>
<td style="text-align:left">The time span that kubeconfig is valid.</td>
</tr>
<tr>
<td style="text-align:left"><code>Node Group Label</code></td>
<td style="text-align:left">Used to identify the node group of a node. For EKS, the default value is <code>eks.amazonaws.com/nodegroup</code>.</td>
</tr>
</tbody>
</table>
<p>






<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-alibaba/cluster03_hu0d3e99a77564efcf84ee485eafa4e0c3_66164_600x0_resize_catmullrom_3.png" width="600" height="402">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
    Import Cluster: Connect to kubernetes cluster
    <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

Then click &lsquo;Next&rsquo; button to go to step <code>Connect to metrics server</code> step.</p>
</li>
<li>
<p>In the <code>Connect to metrics server</code> step, fill following fields, as shown below.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Field</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Is Thanos</code></td>
<td style="text-align:left">If the metric server is Thanos, this should be checked.</td>
</tr>
<tr>
<td style="text-align:left"><code>Prometheus address</code></td>
<td style="text-align:left">Prometheus address, must be accessible.</td>
</tr>
<tr>
<td style="text-align:left"><code>Enable Rate Limit</code></td>
<td style="text-align:left">You shoud enable it when you want to control rate limit to metrics server.</td>
</tr>
<tr>
<td style="text-align:left"><code>Max Burst</code></td>
<td style="text-align:left">Specify the maximum number of concurrencies to metrics server.</td>
</tr>
<tr>
<td style="text-align:left"><code>Cluster Label</code></td>
<td style="text-align:left">Used as label name to filter metrics of the cluster from metrics server.</td>
</tr>
<tr>
<td style="text-align:left"><code>Cluster Label Value</code></td>
<td style="text-align:left">Used as label value to filter metrics of the cluster from metrics server.</td>
</tr>
</tbody>
</table>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-alibaba/cluster04_hu0f07a59cea54ffed2550be8db5ab4643_48228_600x0_resize_catmullrom_3.png" width="600" height="292">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
    Import Cluster: Connect to metrics server
    <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>Then click &lsquo;Next&rsquo; button to go to <code>View configurations</code> step.</p>
</li>
<li>
<p>In the <code>View configurations</code> step, it displays configurations on connecting to AWS cloud, connecting to kubernetes cluster, connecting to metrics server. You can check if the configuration is as expected.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-alibaba/cluster05_hu66a8f172ee76588fe83c64432f7569b4_100175_600x0_resize_catmullrom_3.png" width="600" height="421">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
    Import Cluster: View configurations
    <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

When you confirm these configurations, you can click <code>Import</code> button to go to <code>Finish</code> step.</p>
</li>
<li>
<p>In the <code>Finish</code> step, it will disply the submission status, as shown below. You can click <code>Finish</code> button when the submission status showns the cluster is imported.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/import-alibaba/cluster06_hud397b74eb32a2a9dc1aa4d258c97199b_45425_600x0_resize_catmullrom_3.png" width="600" height="199">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
    Import Cluster: Finish
    <small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

</li>
</ol>
<h2 id="next">Next</h2>
<p>After imported the cluster, you can view optimization recommendations of the cluster in many aspect.</p>
<ul>
<li><a href="/docs/clusteroptimizer/nodegroup">Node group</a></li>
<li><a href="/docs/clusteroptimizer/node">Node</a></li>
<li><a href="/docs/clusteroptimizer/disk">Disk</a></li>
<li><a href="/docs/clusteroptimizer/pv">Persistent volume</a></li>
<li><a href="/docs/clusteroptimizer/application">Application</a></li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-cbcde0fe6010529c37131204023b7771">1.4 - Cluster Overview</h1>
    <div class="lead">View managed clusters in the platform.</div>
	

<div class="pageinfo pageinfo-primary">
<p>View managed clusters in the platform.</p>

</div>

<p>Click <code>Cluster</code> on the left menu bar of the platform to display the cluster overview page, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/overview/overview_hu1965570f547c74b43dc179305c719b04_123493_600x0_resize_catmullrom_3.png" width="600" height="218">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Cluster Overview
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The main display area will display the list of clusters managed by the platform. Including information such as cluster (cluster name and cluster ID), cluster region, access token name, cloud provider and metrics server address.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-a8e419965395a39fb951fa1137e17781">1.5 - Node Group Optimization</h1>
    <div class="lead">Provides recommended settings and actions for node group.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Provides recommended settings and actions for node group.</p>

</div>

<h2 id="view-node-group-recommended-settings">View node group recommended settings</h2>
<p>Click the <code>Node Groups</code> menu on the left menu bar to display the node group page, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/nodegroup/ng1_hu57170a98ebe6ce10f665738af21b1dfa_69789_600x0_resize_catmullrom_3.png" width="600" height="260">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Node group
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The node group page is divided into 3 areas:</p>
<ol>
<li><strong>Cluster selection area</strong>: Used for select a cluster.</li>
<li><strong>Query area</strong>: Used for filtering node group by node group name and node group ID.</li>
<li><strong>List area</strong>: Displays node group information, its current settings and optimization settings.</li>
</ol>
<p>After select a cluster, the list area will display node groups of the selected cluster scaned by <strong>Cluster Optimizer</strong>&rsquo;s optimization strategy, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/nodegroup/ng2_hud5e03c5a36581ec1547108675dd87a38_101790_600x0_resize_catmullrom_3.png" width="600" height="268">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Node group: cluster selected
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The list area is divided into four columns:</p>
<ol>
<li><strong>Node group column</strong>: Displays the node group name and node group ID.</li>
<li><strong>Current settings column</strong>: Displays node group&rsquo;s current settings, includes current instance type of the node group, whether autoscaling is enabled, the minimum number of nodes, and the maximum number of nodes.</li>
<li><strong>Optimization settings column</strong>: Displays recommended settings for node group, includess the recommended node group instance types, whether autoscaling is enabled,, and the recommended minimum and maximum number of nodes.</li>
<li><strong>Action column</strong>: Displays the corresponding operations on the node group.</li>
</ol>
<h2 id="adjust-node-group">Adjust node group</h2>
<p>Click <code>Adjust</code> in action colum above, it will open the <code>Adjust Node Group</code> dialog, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 810px">
	<img class="card-img-top" src="/docs/cluster-optimizer/nodegroup/ng3_hu8b98e96be9842fc2adc5bd1af3ce35e0_74792_800x0_resize_catmullrom_3.png" width="800" height="419">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Adjust Node Group Dialog
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<blockquote>
<p>NOTE: Currently, it only shows tips on adjusting node group. In the future, we will provide automatic action on it which can adjust node group&rsquo;s settings automatically according to settting provided.</p>
</blockquote>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-60fb2e0d684559cca943f114bbb23b17">1.6 - Node Optimization</h1>
    <div class="lead">Describes node information and details provided by optimization strategy.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes node information and details provided by optimization strategy.</p>

</div>

<h2 id="view-node-information">View node information</h2>
<p>Click the <code>Nodes</code> menu on the left menu bar to display the node page, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/node/node1_hu2c53deb4231ea2a8699f95c38ba1f137_72885_600x0_resize_catmullrom_3.png" width="600" height="280">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Node
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The node page is divided into three areas:</p>
<ol>
<li><strong>Cluster selection area</strong>: Used for select a cluster.</li>
<li><strong>Query area</strong>: Used for filtering node by instance Id, instance type and node name.</li>
<li><strong>List area</strong>: Displays node information, its current settings and recommendations.</li>
</ol>
<p>After select a cluster, the list area will display node of the selected cluster scaned by <strong>Cluster Optimizer</strong>&rsquo;s optimization strategy, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/node/node2_hu51efa93672742c92b05ae62a4461ee92_120186_600x0_resize_catmullrom_3.png" width="600" height="305">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Node: cluster selected
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The list area is divided into five columns:</p>
<ol>
<li><strong>Node column</strong>: displays node name, instance ID and region.</li>
<li><strong>Current settings column</strong>: displays node’s instance type, number of CPU cores, and memory size.</li>
<li><strong>Strategy name column</strong>: displays the strategy used for node optimization.</li>
<li><strong>Details column</strong>: displays the information provided by the strategy in <strong>strategy name column</strong>. For example, for low utilization node strategy, the average utilization of CPU and memory will be listed and compared with the thresholds set by the platform to help users adjust node instance types.</li>
<li><strong>Action bar</strong>: displays the corresponding operations on the node</li>
</ol>
<h2 id="adjust-node">Adjust node</h2>
<p>Click the <code>Adjust</code> in action colum above, it will open the <code>Adjust Node</code> dialog, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/node/node3_hu29cdc9b91cbb0d3bd0ca206d860bab44_86212_600x0_resize_catmullrom_3.png" width="600" height="283">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Node: Adjust node
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<blockquote>
<p>NOTE: Currently, it only shows tips on adjusting node group. In the future, we will provide automatic action on it which can adjust node group&rsquo;s settings automatically according to settting provided.</p>
</blockquote>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-41a35fffa4c7fd6466728b424aab2998">1.7 - Disk Optimization</h1>
    <div class="lead">Describes disk information and details provided by optimization strategy.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes disk information and details provided by optimization strategy.</p>

</div>

<h2 id="view-disk-information">View disk information</h2>
<p>Click the <code>Disks</code> menu on the left menu bar to display the disk page, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/disk/disk1_hua57c8dbd7330694b4f5ae3925cf4f78b_69060_600x0_resize_catmullrom_3.png" width="600" height="280">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Disk
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>Disk page are divided into tree areas:</p>
<ol>
<li><strong>Cluster selection area</strong>: Used for select a cluster.</li>
<li><strong>Query area</strong>: Used for filtering disk by disk ID, instance ID and node name.</li>
<li><strong>List area</strong>: Displays disk information, such as instances, usages and actions.</li>
</ol>
<p>After select a cluster, the list area will display node of the selected cluster scaned by <strong>Cluster Optimizer</strong>&rsquo;s optimization strategy, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/disk/disk2_hud98cc24762463067dbef8b620b8c9443_123173_600x0_resize_catmullrom_3.png" width="600" height="308">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Disk: cluster selected
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The list area is divided into four columns:</p>
<ol>
<li><strong>Disk column</strong>: displays disk ID, device name, storage size and creation time.</li>
<li><strong>Instance column</strong>: displays the node ID, node name and region associate with the disk.</li>
<li><strong>Usage column</strong>: displays disk capacity, maximum utilization, average utilization and last update time.</li>
<li><strong>Action bar</strong>: displays actions on the disk.</li>
</ol>
<h2 id="adjust-disk">Adjust disk</h2>
<p>Click <code>Adjust</code> link to in action colum above, it will open the <code>Adjust Disk Size</code> dialog, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/disk/disk3_huc497cd330fcd67249832763c798ad846_88237_600x0_resize_catmullrom_3.png" width="600" height="258">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Disk: adjust disk size
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ec4c2c1254809868f664e7266e289938">1.8 - Persistent Volume Optimization</h1>
    <div class="lead">Describes persistent volume information and details provided by optimization strategy.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes persistent volume information and details provided by optimization strategy.</p>

</div>

<h2 id="view-persistent-volume">View <code>Persistent Volume</code></h2>
<p>Click <code>Persistent Volume</code> menu on the left menu bar to display the persistent volume page, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/pv/pv1_hucc5c08c08f6d52121947a6be0784ee01_87268_600x0_resize_catmullrom_3.png" width="600" height="285">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Persistent Volume
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The persistent volume page is divided into thress areas:</p>
<ol>
<li><strong>Cluster selection area</strong>: Used for select a cluster.</li>
<li><strong>Query area</strong>: Used for filtering persistent volume by name, persistent volume claim namespace and name, strategy name and so on.</li>
<li><strong>List area</strong>: Displays persistent volume, persistent volume claim, strategy name, usage, latest update time and realted actions.</li>
</ol>
<p>After select a cluster, the list area will display persistent volumes of the selected cluster scaned by <strong>Cluster Optimizer</strong>&rsquo;s optimization strategies, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/pv/pv2_hu9e44c682a240125c901463ce98c3b340_95509_600x0_resize_catmullrom_3.png" width="600" height="265">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Persistent Volume: cluster selected
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The list area is divided into six columns:</p>
<ol>
<li><strong>PV column</strong>: displays the PV name, region, capacity and creation time.</li>
<li><strong>PVC column</strong>: displays the PVC namespace and name.</li>
<li><strong>Strategy name column</strong>: displays the name of the optimization strategy. it includes two optimization strategies: <code>unused PV</code> and <code>low utilization PV</code>.</li>
<li><strong>Usage column</strong>: displays the usage of PV, which is only valid for the low utilization PV optimization strategy.</li>
<li><strong>Last updated time column</strong>: displays the last updated time scaned by the optimization strategies.</li>
<li><strong>Action column</strong>: displays the actions on the persistent volume.</li>
</ol>
<h2 id="delete-persistent-volume">Delete persistent volume</h2>
<p>Click <code>Delete</code> in action column in the row with <code>Unused PV</code> strategy name above, it will open the <code>Delete Persistent Volume</code> dialog, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/pv/pv3_huab26b7ec4eb695da86a41436be4f5126_65855_600x0_resize_catmullrom_3.png" width="600" height="215">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Persistent Volume: delete persistent volume dialog
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>It shows instructions on deleting persistent volume carefully.</p>
<h2 id="adjust-persistent-volume-size">Adjust persistent volume size</h2>
<p>Click <code>Adjust</code> in action column in the row with <code>Low Utilization PV</code> strategy name above, it will open the <code>Adjust Persistent Volume Size</code> dialog, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/pv/pv4_hu40af59ab1d1b093aa299d9f21b874d7b_92240_600x0_resize_catmullrom_3.png" width="600" height="267">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Persistent Volume: adjust persistent volume size
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>It shows steps on resizing a persistent volume carefully.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-077e156274fb7d892f55e54292de72da">1.9 - Application Optimization</h1>
    <div class="lead">Describes application details and recommendations.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes application details and recommendations.</p>

</div>

<h2 id="view-applications">View Applications</h2>
<p>Click the <code>Applications</code> menu on the left menu bar to display the application page, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app1_hudb92ed43c43b41b5faaee833823d9815_83959_600x0_resize_catmullrom_3.png" width="600" height="288">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Application
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The application page is divided into three areas:</p>
<ol>
<li><strong>Cluster selection area</strong>: Used for select a cluster.</li>
<li><strong>Query area</strong>: Used for filtering applications by namespace, workload name, workload type, container and strategy name. The platform currently supports three startegies: <code>resource recommendation</code>, <code>resource quota unset</code> and <code>out of memory</code>.</li>
<li><strong>List area</strong>: Displays name, container, current settings, strategy name, details and related actions. Different strategy will have differences details information.</li>
</ol>
<p>After select a cluster, the list area will display applications of the selected cluster scaned by <strong>Cluster Optimizer</strong>&rsquo;s optimization strategies, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app2_hueb8c299751b5b2ca133e2a8c742eefbe_171932_600x0_resize_catmullrom_3.png" width="600" height="387">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Application: cluster selected
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>For different strategies, the list area and action are different.</p>
<h2 id="resource-recommendation"><code>Resource Recommendation</code></h2>
<h3 id="list-area-for-resource-recommendation">List area for <code>Resource Recommendation</code></h3>
<p>For <code>Resource Recommendation</code> strategy, the list area display is divided into six columns, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app2_hueb8c299751b5b2ca133e2a8c742eefbe_171932_600x0_resize_catmullrom_3.png" width="600" height="387">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Application: `Resource Recommendation` strategy
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<ol>
<li><strong>Name column</strong>: displays the workload name, type and namespace.</li>
<li><strong>Container column</strong>: displays the container name.</li>
<li><strong>Current settings</strong>: displays the CPU request, CPU limit, memory request and memory limit of the container.</li>
<li><strong>Strategy name</strong>: displays the strategy name.</li>
<li><strong>Details</strong>: displays average CPU usage, maximum CPU usage, average memory usage, maximum memory usage, recommended CPU request, recommended CPU Limit, recommended memory request, recommended memory limit and the latest update time.</li>
<li><strong>Action column</strong>: displays the related actions on the application.</li>
</ol>
<h2 id="adjust-resource-quota">Adjust resource quota</h2>
<p>Clicks <code>Adjust</code> link to open the <code>Adjust Resource Quota</code> dialog, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app3_hu06395c21d7ea7f52ffc8996b839f5d11_100892_600x0_resize_catmullrom_3.png" width="600" height="371">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Application: adjust resource quota dialog
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<h2 id="resource-quota-unset"><code>Resource Quota Unset</code></h2>
<h3 id="list-area-for-resource-quota-unset">List area for <code>Resource Quota Unset</code></h3>
<p>Select <code>Resource quota unset</code> in the strategy name in <strong>query area</strong>, it will display the list area as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app2_hueb8c299751b5b2ca133e2a8c742eefbe_171932_600x0_resize_catmullrom_3.png" width="600" height="387">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Application: filted by strategy  `Resource Quota Unset`
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The list area display is divided into six columns, as shown below.</p>
<p>If the policy name is No resource quota set, the list area is displayed as shown below:</p>
<p>The list area display is divided into six columns:</p>
<ol>
<li><strong>Name column</strong>: displays the workload name, type and namespace.</li>
<li><strong>Container column</strong>: displays the container name.</li>
<li><strong>Current settings</strong>: displays whether the CPU request, CPU limit, memory request and memory limit of the container is set.</li>
<li><strong>Strategy name</strong>: displays the strategy name.</li>
<li><strong>Details</strong>: displays recommended CPU request, recommended CPU Limit, recommended memory request, recommended memory limit and the latest update time.</li>
<li><strong>Action column</strong>: displays the related actions on the application.</li>
</ol>
<h3 id="setting-application-resource-quota">Setting application resource quota</h3>
<p>Clicks <code>Adjust</code> link to open the <code>Setting application resource quota</code> dialog, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app2_hueb8c299751b5b2ca133e2a8c742eefbe_171932_600x0_resize_catmullrom_3.png" width="600" height="387">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Application: Setting application resource quota dialog
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>It displays application details, recommended values ​​and corresponding adjustment statements. You can take the recommended values ​​as the basis for adjustment.</p>
<h2 id="out-of-memory-oom">Out of Memory (OOM)</h2>
<h3 id="list-area-for-out-of-memory">List area for Out of Memory</h3>
<p>Select <code>OOM</code> in the strategy name in <strong>query area</strong>, it will display the list area as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app2_hueb8c299751b5b2ca133e2a8c742eefbe_171932_600x0_resize_catmullrom_3.png" width="600" height="387">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Application: filted by strategy `Out of Memory`
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>The list area display is divided into 6 columns, which are:</p>
<ol>
<li><strong>Name column</strong>: displays the workload name, type and namespace.</li>
<li><strong>Container column</strong>: displays the container name.</li>
<li><strong>Current settings</strong>: displays memory request and memory limit of the container.</li>
<li><strong>Strategy name</strong>: displays the strategy name.</li>
<li><strong>Details</strong>: displays the latest OOM time, recent OOM Pod, OOM times and latest update time.</li>
<li><strong>Action column</strong>: displays the related actions on the application.</li>
</ol>
<h3 id="adjust-application-memory-size">Adjust application memory size</h3>
<p>Click <code>Adjust</code> link to open the <code>Adjust Application Memory Size</code> dialog, as shown below.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
	<img class="card-img-top" src="/docs/cluster-optimizer/app/app2_hueb8c299751b5b2ca133e2a8c742eefbe_171932_600x0_resize_catmullrom_3.png" width="600" height="387">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Application: Adjust application memory size dialog
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>which displays application details, recommended memory limit values, and corresponding adjustment statements</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-59433918ea6352feee5c1be31d444da6">1.10 - Actions</h1>
    <div class="lead">Describes actions provided by cloud native cluster optimization platform.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes actions provided by cloud native cluster optimization platform <strong>Cluster Optimizer</strong>.</p>

</div>

<p>Cluster optimization actions include:</p>
<ul>
<li><a href="/docs/cluster-optimizer/actions/adjust-nodegroup/">Adjust node group</a></li>
<li><a href="/docs/cluster-optimizer/actions/adjust-node/">Adjust nodes</a></li>
<li><a href="/docs/cluster-optimizer/actions/adjust-disk/">Adjust disk</a></li>
<li><a href="/docs/cluster-optimizer/actions/adjust-pv/">Adjust pv</a></li>
<li>&hellip;</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-e5317a50be5f60389a870e53936cc8fe">1.10.1 - Adjusting Node Group</h1>
    <div class="lead">Adjust node pool.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes the actions on adjusting a node pool.</p>

</div>

<h2 id="amazon-aws">Amazon AWS</h2>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>Permission on modifying corresponding cluster&rsquo;s node group.</li>
</ul>
<h3 id="instructions">Instructions</h3>
<p>TBD&hellip;</p>
<h2 id="alibaba-cloud">Alibaba Cloud</h2>
<h3 id="prerequisites-1">Prerequisites</h3>
<ul>
<li>Permission on modifying corresponding cluster&rsquo;s node pool.</li>
</ul>
<h3 id="instructions-1">Instructions</h3>
<ol>
<li>Log in to the <code>Container Service Management Console</code> and select the cluster in the left navigation bar.</li>
<li>On the cluster list page, click the target cluster name, and then select <code>Node Management &gt; Node Pool </code>in the left navigation bar.</li>
<li>On the node pool list page, click Edit in the Action column of the row where the target node pool is located.</li>
<li>On the <code>Edit Node Pool</code> page, edit the configuration items of the node pool. Node pool optimization mainly focuses on <strong>instance specifications</strong> and <strong>Auto Scaling</strong> configuration items.
<ol>
<li>According to the recommended instance types in the <code>Adjust Node Pool</code> dialog, select the corresponding instance type in <strong>Instance Type</strong>.</li>
<li>Make adjustments in the <strong>Auto Scaling</strong> configuration item according to the recommended values of autoscaling, minimum number of nodes, and maximum number of nodes in the <code>Adjust Node Pool</code> dialog box. If cluster autoscaling is not enabled, you can enable it according to <a href="https://help.aliyun.com/zh/ack/ack-managed-and-ack-dedicated/user-guide/auto-scaling-of-nodes#section-i4v-dgt-7wv">Node autoscaling</a>.</li>
</ol>
</li>
</ol>
<blockquote>
<p>Please refer to <a href="https://help.aliyun.com/zh/ack/ack-managed-and-ack-dedicated/user-guide/edit-node-pool">Edit Node Pool</a> for more details.</p>
</blockquote>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-03f9f5793f01d1a5c0d73ab6c2188f62">1.10.2 - Adjustment Node</h1>
    <div class="lead">Adjust nodes.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes the operation of adjusting nodes.</p>

</div>

<h2 id="alibaba-cloud">Alibaba Cloud</h2>
<h3 id="prerequisites">Prerequisites</h3>
<p>TBD&hellip;</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-dd0a6bec28b976f1e6fcb2ed4dd92dce">1.10.3 - Adjust Disk</h1>
    <div class="lead">Adjust the disk.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes the operation of resizing a disk.</p>

</div>

<h2 id="alibaba-cloud">Alibaba Cloud</h2>
<h3 id="prerequisites">Prerequisites</h3>
<p>TBD&hellip;</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-a9d4bc444784b49b0ea98c5b3948d07d">1.10.4 - Delete Persistent Volume</h1>
    <div class="lead">Delete Persistent Volume.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Describes the operation of deleting a Persistent Volume.</p>

</div>

<h2 id="alibaba-cloud">Alibaba Cloud</h2>
<h3 id="prerequisites">Prerequisites</h3>
<p>TBD&hellip;</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-dacaf1e373c2472c1efbf2a9b2acf54b">2 - Wisecost</h1>
    <div class="lead">Cloud native cost management platform&quot;</div>
	

<div class="pageinfo pageinfo-primary">
<p>Wisecost provides cloud native application cost monitoring, management and optimization capabilities.</p>

</div>

<p>Wisecost can help users monitor, manage and optimize the cost of cloud native applications. Its main functions include:</p>
<ul>
<li>Evaluate overall cluster costs and breakdown costs.</li>
<li>Evaluate the cost of cloud native applications and provide cost analysis based on multiple dimensions such as namespace, load, department, group, application environment, etc.</li>
<li>Provide optimization suggestions.</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d1501d8c0fcaf4a0c0134a7c69ba635e">2.1 - Installation and Deployment</h1>
    <div class="lead">Detailed steps on how to install Wisecost are described.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Wisecost provides cloud native application cost monitoring, management and optimization capabilities.</p>

</div>

<h2 id="preconditions">Preconditions</h2>
<ul>
<li>Mysql database, version 5.7 and above</li>
<li>kubernetes cluster, version 1.20 and above</li>
</ul>
<h2 id="clone-installation-script">Clone installation script</h2>
<ol>
<li>Open the console and enter <code>git clone https://github.com/wiseinf/setup.git</code> to clone the installation script locally.
We provide 2 warehouse addresses for everyone to clone locally according to their needs.</li>
</ol>
<table>
<thead>
<tr>
<th>Warehouse</th>
<th style="text-align:left">Warehouse address</th>
</tr>
</thead>
<tbody>
<tr>
<td>Github</td>
<td style="text-align:left"><a href="https://github.com/wiseinf/setup.git">https://github.com/wiseinf/setup.git</a></td>
</tr>
<tr>
<td>Gitee</td>
<td style="text-align:left"><a href="https://gitee.com/wiseinf/setup.git">https://gitee.com/wiseinf/setup.git</a></td>
</tr>
</tbody>
</table>
<blockquote>
<p>The subsequent steps assume that the <code>setup</code> library has been cloned to the user&rsquo;s home directory. If it has not been cloned to the user&rsquo;s home directory, the file path in the command needs to be adjusted according to the actual situation.</p>
</blockquote>
<h2 id="initialize-database">Initialize database</h2>
<blockquote>
<p>Assume that the Mysql database host address is: <code>127.0.0.1</code>.</p>
</blockquote>
<ol>
<li>
<p>Execute the command <code>mysql -h127.0.0.1 -uroot</code> on the console, enter the password, and log in to the mysql database. Among them, <code>127.0.0.1</code> is the Mysql host address.</p>
</li>
<li>
<p>Execute the following command at the <code>mysql&gt;</code> prompt to create the <code>storage</code> library and the <code>wisecost</code> library. The corresponding tables will be automatically created by the application later.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    mysql&gt; source ~/setup/wisecost/sql/create_database.sql
</span></span></code></pre></div><blockquote>
<p>Note: Please be aware of the risk of data loss. If the <code>storage</code> library and <code>wisecost</code> library already exist in the mysql database, the above script will delete the <code>storage</code> library and <code>wisecost</code> library and create a new library.</p>
</blockquote>
</li>
<li>
<p>Execute the following command at the <code>mysql&gt;</code> prompt to create the <code>wisecost</code> user (the default password is <code>Wisecost~</code>) and grant it full access permissions to the <code>storage</code> library and the <code>wisecost</code> library.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    mysql&gt; source ~/setup/wisecost/sql/create_user.sql
</span></span></code></pre></div></li>
<li>
<p>Execute the command <code>mysql -h127.0.0.1 -uwisecost</code> on the console, enter the password (the default password is <code>Wisecost~</code>), and log in to the mysql database.</p>
</li>
<li>
<p>Execute <code>show database</code> at the <code>mysql&gt;</code> prompt and confirm that the <code>storage</code> library and the <code>wisecost</code> library have been created. You can use the <code>select</code> statement (such as <code>select * from storage.pv</code>) to query the corresponding data table in the library to confirm whether the user&rsquo;s permissions are normal.</p>
</li>
<li>
<p>At this point, the database initialization is completed.</p>
</li>
</ol>
<h2 id="deploy-application">Deploy application</h2>
<ol>
<li>Use <code>kubectl apply -f ~/setup/wisecost/namespace.yaml</code> to apply the following file to the cluster and create the namespace <code>wiseinf-system</code>.

    
      
    
    
    
    
    	
    
    
    
    
    
    
      
      
      
    
    
    
    
    
    
      <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Namespace</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>: 
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span></code></pre></div>
    
</li>
<li>Adjust the <strong>ConfigMap</strong> <code>wisecost-conf</code> in the file <code>~/setup/wisecost/wisecost.yaml</code> according to the configuration of Mysql, and change the <code>dataSourceName under its configuration items </code>optimize<code>and</code>kubestore<code>: &quot;wisecost The user name, user password, database address and port in :Wisecost~@tcp(mysql:3306)/wisecost?charset=utf8mb4&amp;parseTime=true</code> are adjusted to the corresponding information of the Mysql database.</li>
<li>Use <code>kubectl apply -f ~/setup/wisecost/wisecost.yaml</code> to apply the following file to the cluster and deploy the application <strong>Wise Cost</strong>.

    
      
    
    
    
    
    	
    
    
    
    
    
    
      
      
      
    
    
    
    
    
    
      <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>---
    </span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx-config</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">default.conf</span>: |-<span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      server {
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        listen 80;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        location / {
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          root /usr/share/nginx/html/;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          include /etc/nginx/mime.types;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          try_files $uri $uri/ /index.html;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          location /api/ {
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            rewrite ^/api/(.*) /$1 break;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_set_header Host $host;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_set_header X-Real-IP $remote_addr;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_set_header X-NginX-Proxy true;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            proxy_pass http://localhost:7070;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          }
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      }</span>      
    </span></span><span style="display:flex;"><span>---
    </span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-conf</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">wisecost.yaml</span>: |-<span style="color:#e6db74">
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    server:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      port: 7070
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    optimize:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      dataSourceName: &#34;wisecost:Wisecost~@tcp(mysql:3306)/wisecost?charset=utf8mb4&amp;parseTime=true&#34;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      maxOpenConns: 10
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    kubestore:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      type: mysql
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      parameters:
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        dataSourceName: &#34;wisecost:Wisecost~@tcp(mysql:3306)/storage?charset=utf8mb4&amp;parseTime=true&#34;
    </span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        maxOpenConns: 10</span>    
    </span></span><span style="display:flex;"><span>
    </span></span><span style="display:flex;"><span>---
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Deployment</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">apps/v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">wiseinf-system</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">1</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">revisionHistoryLimit</span>: <span style="color:#ae81ff">10</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">matchLabels</span>:
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>        <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">hostNetwork</span>: <span style="color:#66d9ef">true</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">dnsPolicy</span>: <span style="color:#ae81ff">ClusterFirstWithHostNet</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">securityContext</span>:
    </span></span><span style="display:flex;"><span>        <span style="color:#f92672">runAsUser</span>: <span style="color:#ae81ff">0</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">containers</span>:
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-ui</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">image</span>: <span style="color:#ae81ff">wiseinf/wisecost-ui:701d19d</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">imagePullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">volumeMounts</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx-config</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/etc/nginx/conf.d</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">ports</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">80</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">resources</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">requests</span>:
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">200m</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">500M</span>
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">limits</span>:
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">1000m</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">2G</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">image</span>: <span style="color:#ae81ff">wiseinf/wisecost:99e308e</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">command</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;/wiseinf/wisecost&#34;</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">imagePullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">volumeMounts</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-data-volume</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/wiseinf/data</span>
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-logs-volume</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/wiseinf/logs</span>
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-conf-volume</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/wiseinf/conf</span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">#              subPath: wisecost.yml</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">ports</span>:
    </span></span><span style="display:flex;"><span>            - <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">7070</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">protocol</span>: <span style="color:#ae81ff">TCP</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">resources</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">requests</span>:
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">200m</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">500M</span>
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">limits</span>:
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">1000m</span>
    </span></span><span style="display:flex;"><span>              <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">2G</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">volumes</span>:
    </span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Config for wisecost-ui</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx-config</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">configMap</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx-config</span>
    </span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Configs for wisecost</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-data-volume</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">hostPath</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/wisecost/data</span>
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">type</span>: <span style="color:#ae81ff">DirectoryOrCreate</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-logs-volume</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">hostPath</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/wisecost/logs</span>
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">type</span>: <span style="color:#ae81ff">DirectoryOrCreate</span>
    </span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-conf-volume</span>
    </span></span><span style="display:flex;"><span>          <span style="color:#f92672">configMap</span>:
    </span></span><span style="display:flex;"><span>            <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wisecost-conf</span>
    </span></span><span style="display:flex;"><span>---
    </span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost-ui</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>:  <span style="color:#ae81ff">wisecost-ui-service</span>
    </span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">ports</span>:
    </span></span><span style="display:flex;"><span>    - <span style="color:#f92672">port</span>: <span style="color:#ae81ff">80</span>
    </span></span><span style="display:flex;"><span>      <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">80</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
    </span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">wisecost</span>
    </span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">NodePort</span></span></span></code></pre></div>
    

<blockquote>
<p>Note:</p>
</blockquote>
</li>
<li>Pass <code>kubectl port-forward svc/wisecost-ui-service 80:80</code></li>
<li>Visit the URL <code>http://localhost</code> and you will see the Wise Cost homepage.</li>
<li>At this point, the application <strong>Wise Cost</strong> has been deployed.</li>
</ol>
<h2 id="next-step-import-the-cluster">Next step: Import the cluster</h2>
<p>Next, you can add a cluster and view its various costs. For details, see Import Cluster <a href="/docs/wisecost/import-aliyun">Import Alibaba Cloud Cluster</a></p>
<h2 id="appendix">Appendix</h2>
<ul>
<li>Script <code>create_user.sql</code>

    
      
    
    
    
    
    	
    
    
    
    
    
    
      
      
      
    
    
    
    
    
    
      <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">USER</span> wisecost<span style="color:#f92672">@</span><span style="color:#e6db74">&#39;%&#39;</span> IDENTIFIED <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;Wisecost~&#39;</span>;
    </span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">ALL</span> <span style="color:#66d9ef">ON</span> <span style="color:#66d9ef">storage</span>.<span style="color:#f92672">*</span> <span style="color:#66d9ef">TO</span> wisecost<span style="color:#f92672">@</span><span style="color:#e6db74">&#39;%&#39;</span>;
    </span></span><span style="display:flex;"><span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">ALL</span> <span style="color:#66d9ef">ON</span> wisecost.<span style="color:#f92672">*</span> <span style="color:#66d9ef">TO</span> wisecost<span style="color:#f92672">@</span><span style="color:#e6db74">&#39;%&#39;</span>;</span></span></code></pre></div>
    
</li>
<li>Script <code>create_database.sql</code>

    
      
    
    
    
    
    	
    
    
    
    
    
    
      
      
      
    
    
    
    
    
    
      <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- ----------------------------------------------------------------------------
    </span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- Schema wisecost
    </span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- ----------------------------------------------------------------------------
    </span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">SCHEMA</span> <span style="color:#66d9ef">IF</span> <span style="color:#66d9ef">EXISTS</span> <span style="color:#f92672">`</span>wisecost<span style="color:#f92672">`</span> ;
    </span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">SCHEMA</span> <span style="color:#66d9ef">IF</span> <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">EXISTS</span> <span style="color:#f92672">`</span>wisecost<span style="color:#f92672">`</span> ;
    </span></span><span style="display:flex;"><span>
    </span></span><span style="display:flex;"><span><span style="color:#75715e">-- ----------------------------------------------------------------------------
    </span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- Schema storage
    </span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- ----------------------------------------------------------------------------
    </span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">SCHEMA</span> <span style="color:#66d9ef">IF</span> <span style="color:#66d9ef">EXISTS</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">storage</span><span style="color:#f92672">`</span> ;
    </span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">SCHEMA</span> <span style="color:#66d9ef">IF</span> <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">EXISTS</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">storage</span><span style="color:#f92672">`</span> ;
    </span></span></code></pre></div>
    
</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f8724eef5ecfc709ba9ec953f1658ee2">2.2 - Import Alibaba Cloud Cluster</h1>
    <div class="lead">This section describes the detailed steps for importing Alibaba Cloud clusters.</div>
	

<div class="pageinfo pageinfo-primary">
<p>This section describes the detailed steps for importing Alibaba Cloud clusters.</p>

</div>

<ol>
<li>
<p>After completing the Wisecost installation, log in to the system, select &ldquo;Overview&rdquo;, and the <code>Overview Page</code> will be visible.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/import-aliyun/import-aliyun-01_hud8965e357a159a39d1a1f512c93ab966_99152_900x414_fill_catmullrom_smart1_3.png" width="900" height="414">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Overview page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
</li>
<li>
<p>Set <code>Access Key</code> and <code>Access Key Secret</code> on the &ldquo;Import Alibaba Cloud Cluster - Set Alibaba Cloud Access Credentials Page&rdquo;. <code>Access Key</code> and <code>Access Key Secret</code> can be obtained from Alibaba Cloud. For details, please refer to <a href="https://help.aliyun.com/document_detail/116401.htm">Create Access Key</a>. After setting up <code>Access Key</code> and <code>Access Key Secret</code>, click Next. After the system completes verifying the correctness of <code>Access Key</code> and <code>Access Key Secret</code>, it enters the &ldquo;Import Alibaba Cloud Cluster-Kubernetes Cluster and Access Settings Page&rdquo;.</p>
</li>
</ol>
<blockquote>
<p>On the &ldquo;Import Alibaba Cloud Cluster-Set Alibaba Cloud Access Credentials Page&rdquo;, you can also select &ldquo;Use Existing Credentials&rdquo; to select an existing credential.







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/import-aliyun/import-aliyun-02_hu586c8a1becbc05e284939f91daadb27a_113445_900x414_fill_catmullrom_smart1_3.png" width="900" height="414">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Import Alibaba Cloud Cluster-Set Alibaba Cloud Access Credentials page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>
</p>
</blockquote>
<ol start="3">
<li>On the &ldquo;Import Alibaba Cloud Cluster-Kubernetes Cluster and Access Settings Page&rdquo;, you can select <code>Hosted Cluster</code> or <code>Self-Built Cluster</code>. The following takes <code>self-built cluster</code> as an example to explain the corresponding parameters. After completing the parameter settings, click <code>Next</code>. After the system completes the parameter correctness verification, enter the &ldquo;Import Alibaba Cloud Cluster-Set Prometheus Access Page&rdquo;</li>
</ol>
<table>
<thead>
<tr>
<th>Parameters</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cluster region</td>
<td>Cluster region refers to the region where the cluster is deployed. The region must be specified correctly, otherwise the cluster will be inaccessible. For details, please see <a href="https://help.aliyun.com/document_detail/40654.htm">Region and Availability Zone</a></td>
</tr>
<tr>
<td>Cluster ID</td>
<td>Unique identification ID, used to uniquely identify a cluster</td>
</tr>
<tr>
<td>cluster name</td>
<td>cluster name</td>
</tr>
<tr>
<td>Description</td>
<td>Cluster related description</td>
</tr>
<tr>
<td>Kubeconfig</td>
<td>To access the Kubeconfig file of the cluster, you need to enable read-only access to the cluster. Incorrect settings may result in inability to access the cluster or errors in obtaining objects in the cluster.</td>
</tr>
</tbody>
</table>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/import-aliyun/import-aliyun-03_huc147e3acda1852672af64d72e460f678_213466_900x414_fill_catmullrom_smart1_3.png" width="900" height="414">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Import the Alibaba Cloud cluster-Kubernetes cluster and access the settings page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<ol start="4">
<li>In &ldquo;Import Alibaba Cloud Cluster-Set Prometheus Access Page&rdquo;, set the Prometheus access address. After completing the parameter settings, click <code>Next</code> to enter the <code>Import Alibaba Cloud Cluster-Import Page</code>.</li>
</ol>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/import-aliyun/import-aliyun-04_hu3a9e998635effd9d0941e230833f287d_99312_900x414_fill_catmullrom_smart1_3.png" width="900" height="414">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Import Alibaba Cloud Cluster-Set Prometheus access page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<ol start="5">
<li>Click the <code>Import</code> button on the <code>Import Alibaba Cloud Cluster-Import page</code>. After the system submits the information, the <code>Import Alibaba Cloud Cluster-Import Successful Page</code> is displayed. At this point, the Alibaba Cloud cluster has been successfully imported.</li>
</ol>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/import-aliyun/import-aliyun-05_huc147e3acda1852672af64d72e460f678_178791_900x414_fill_catmullrom_smart1_3.png" width="900" height="414">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Import Alibaba Cloud Cluster-Import Success Page
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<ol start="6">
<li>Return to the &ldquo;Overview Page&rdquo; and you can see the imported clusters in the list.</li>
</ol>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/import-aliyun/import-aliyun-06_hud8965e357a159a39d1a1f512c93ab966_107599_900x414_fill_catmullrom_smart1_3.png" width="900" height="414">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Overview page-Imported to Alibaba Cloud cluster
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<ol start="7">
<li>After completing the cluster import, you can enter the &ldquo;Cluster&rdquo; and &ldquo;Cost&rdquo; tabs to view the overall cost of the cluster and the corresponding namespace.</li>
</ol>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-79c3c5401e75cd51b9d3c28865234518">2.3 - View cluster costs</h1>
    <div class="lead">Describes how to view and analyze overall cluster costs.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Wisecost provides cloud native application cost monitoring, management and optimization capabilities. This document describes how to view cluster costs and the meaning of each indicator.</p>

</div>

<h2 id="view-the-overall-cost-of-the-cluster">View the overall cost of the cluster</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cluster-cost/cluster-1_hu9386f43e6fffa22228347f34146fc35b_156504_900x0_resize_catmullrom_3.png" width="900" height="388">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Overall cluster cost
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>








<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cluster-cost/cluster-2_hu8df7dfe3748412eed29420f91a32e85c_137781_900x0_resize_catmullrom_3.png" width="900" height="358">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Cluster overall cost breakdown
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<h2 id="view-the-cost-of-a-single-cluster">View the cost of a single cluster</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cluster-cost/cluster-3_hu41d2df885f0270c87d1ee7b4ec2c5e92_144315_900x0_resize_catmullrom_3.png" width="900" height="417">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Single cluster cost
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-8aaf6cb4995450b6fc76e7ad887b0eb3">2.4 - View node costs</h1>
    <div class="lead">Describes how to view and analyze overall node costs.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Wisecost provides cloud native application cost monitoring, management and optimization capabilities. This document describes how to view node costs and the meaning of each indicator.</p>

</div>

<h2 id="view-the-overall-cost-of-the-node">View the overall cost of the node</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/node-cost/node-1_hu75571daf753b1528af155b01a3a46732_216015_900x0_resize_catmullrom_3.png" width="900" height="387">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Overall node cost
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>








<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/node-cost/node-2_hud14bc57c8e8b54563bbb85fde7d79e40_218471_900x0_resize_catmullrom_3.png" width="900" height="412">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Node overall cost breakdown
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<h2 id="view-the-cost-of-a-single-node">View the cost of a single node</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/node-cost/node-3_hu68f4c02bdee6f069f5706d794bd1b072_255353_900x0_resize_catmullrom_3.png" width="900" height="418">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Single node cost
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-aea197f3575cb0df1ded1df55290950c">2.5 - View application costs</h1>
    <div class="lead">Describes how to view and analyze application costs.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Wisecost provides cloud native application cost monitoring, management and optimization capabilities. This document describes how to view and analyze application costs.</p>

</div>

<h2 id="view-namespace-cost">View namespace cost</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cost/namespace-1_hud84a5484e7411474683c506fc18d85bf_185074_900x0_resize_catmullrom_3.png" width="900" height="323">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Namespace cumulative cost and utilization
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>








<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cost/namespace-2_hu0683868b0a89a61f2790babad8579e94_272727_900x0_resize_catmullrom_3.png" width="900" height="260">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Namespace timeshare costs
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<h2 id="view-product-cost">View product cost</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cost/product-1_hue482c5ef76f206dad3043c87478904a0_168742_900x0_resize_catmullrom_3.png" width="900" height="298">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Product cumulative cost and utilization rate
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>








<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cost/product-2_hudcb30c2598ce67584624d0fbc71b184a_155549_900x0_resize_catmullrom_3.png" width="900" height="262">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Product time-sharing cost
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<h2 id="custom-query">Custom query</h2>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/wisecost/cost/custom-1_hubb8eef4e201ee755282e6123f8f7c76d_282976_900x0_resize_catmullrom_3.png" width="900" height="456">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Namespace timeshare cost
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0d313d792f0ef08d3b1695b67d8bddea">2.6 - Cost Optimization</h1>
    <div class="lead">Describes the process of cost optimization based on Wisecost&rsquo;s built-in strategy.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Wisecost provides cloud native application cost monitoring, management and optimization capabilities. This document describes the process of cost optimization based on Wisecost&rsquo;s built-in strategy.</p>

</div>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-eb8dcf79b1b7f912ed56305be6f0297f">2.7 - Development Manual</h1>
    <div class="lead">One-stop cloud native application cost monitoring, management and optimization platform.</div>
	

<div class="pageinfo pageinfo-primary">
<p>This section includes instructions for using Wisecost API related interfaces. For detailed interface documentation, please see: API URL</p>

</div>


</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-7498afe225cc47a707df513f40a91ac6">2.7.1 - API Documentation</h1>
    <div class="lead">One-stop cloud native application cost monitoring, management and optimization platform API documentation.</div>
	

<div class="pageinfo pageinfo-primary">
<p>This section describes Wisecsost API related documentation.</p>

</div>

<h2 id="overview">Overview</h2>
<p>Wisecost API mainly provides multi-dimensional cost query and cost decomposition query for clusters, nodes and containers.</p>
<p>Wisecost API is mainly implemented through HTTP. For its API documentation, please see the link: Users can generate client code through tools such as Swagger Editor/Codegen.</p>
<p>For details, see Import Cluster <a href="/docs/wisecost/import-aliyun">Import Alibaba Cloud Cluster</a></p>
<p>The download address of the API interface document is as follows: <a href="/api/v1/openapi.json">Wisecost API interface</a></p>
<h2 id="general-parameter-description">General parameter description</h2>
<p>| Parameter name | Description | Default value | Example |
|&mdash;&mdash;&mdash;&ndash;|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;|&mdash;&mdash;&mdash;&ndash;|&mdash;&mdash;- &mdash;&mdash;&mdash;-|
| window | Query window range | None | 1. Time range format: mainly used to describe absolute time, such as 2023-05-24T18%3A00%3A00%2B08%3A00%2C2023-05-25T00%3A00%3A00%2B08%3A00 <br>2. Time expression: 1d, 1h, lastday, lastweek, etc. |
| align | Time alignment, mainly used for time expressions, truncates the current time, and uses the truncated time as the current time to calculate the time expression. When the truncated time does not change, the query results will not change. | 1m | For example 1h, 1m |
| step | Query step size, this value must be less than or equal to the time window range | Query window range | 1d |
| resolution | Prometheus resolution | 2m | 2m |
| aggregate | Aggregation parameters, cluster cost, node cost and container cost aggregation parameter have different values ​​| None | 1. cluster: Aggregate by cluster. <br/>2. namespace: Aggregation by namespace<br/> 3. cluster,namespace: Aggregation by cluster and namespace |
| filter | Filter parameters, cluster cost, node cost and container cost filter parameter values ​​are different | None | |</p>
<p>All parameters are URL encoded.</p>
<h2 id="cluster-cost-api">Cluster cost API</h2>
<h3 id="query-cluster-cost">Query cluster cost</h3>
<p>Endpoint: /api/cluster</p>
<h4 id="example-1-query-the-cost-of-cluster-test1-in-the-past-hour">Example 1: Query the cost of cluster <code>test1</code> in the past hour</h4>
<p>ask:</p>
<pre tabindex="0"><code>${HOST}/api/cluster/window=1h&amp;filter=cluster:test1`
</code></pre><p>The response includes the time window of the query, the corresponding cost of CPU, memory, storage and network.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;test1&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;window&#34;</span>: {
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-05-04T14:37:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-05-04T15:37:00Z&#34;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-05-04T14:37:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-05-04T15:37:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuCoreHours&#34;</span>: <span style="color:#ae81ff">0.1022572407401936</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuCoreUsageAverage&#34;</span>: <span style="color:#ae81ff">0.0511286203700968</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuUsage&#34;</span>: <span style="color:#ae81ff">0.004876883689704125</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuLimitCost&#34;</span>: <span style="color:#ae81ff">0.09538461343964662</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.00024035371519684083</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuActualCost&#34;</span>: <span style="color:#ae81ff">0.00024035371519684083</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryByteHours&#34;</span>: <span style="color:#ae81ff">1970868694.0327873</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryBytesUsageAverage&#34;</span>: <span style="color:#ae81ff">1970868694.0327873</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryUsage&#34;</span>: <span style="color:#ae81ff">0.029179973608599755</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryLimitCost&#34;</span>: <span style="color:#ae81ff">0.06358974229309775</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.0014381140729231169</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryActualCost&#34;</span>: <span style="color:#ae81ff">0.0014381140729231169</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageByteHours&#34;</span>: <span style="color:#ae81ff">12.501899906846337</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;networkUsage&#34;</span>: <span style="color:#ae81ff">0.0523391093881065</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;networkDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.0026294713433894375</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;networkActualCost&#34;</span>: <span style="color:#ae81ff">0.0026294713433894375</span>,
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><h4 id="example-2-query-the-cost-of-the-cluster-in-april-2023-in-steps-of-1-day">Example 2: Query the cost of the cluster in April 2023, in steps of 1 day</h4>
<p>The request is as follows, where, <code>window=2023-04-01T00%3A00%3A00%2B08%3A00%2C2023-04-30T23%3A59%3A59%2B08%3A00</code> is <code>window=2023-04-01T00:00: 00+08:00,2023-05-01T00:00:00+08:00</code> URL encoding, <code>step=1d</code> means the step is 1 day.</p>
<pre tabindex="0"><code>${HOST}/api/cluster?window=2023-04-01T00%3A00%3A00%2B08%3A00%2C2023-04-30T23%3A59%3A59%2B08%3A00&amp;step=1d
</code></pre><p>The response includes a daily cost.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;test1&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;window&#34;</span>: {
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-04-16T00:00:00+08:00&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-04-17T00:00:00+08:00&#34;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-04-16T00:00:00+08:00&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-04-17T00:00:00+08:00&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuCoreHours&#34;</span>: <span style="color:#ae81ff">2.39842986589827</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuCoreUsageAverage&#34;</span>: <span style="color:#ae81ff">0.049967288872880634</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuUsage&#34;</span>: <span style="color:#ae81ff">0.114386652810405</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuLimitCost&#34;</span>: <span style="color:#ae81ff">2.289230722551519</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.0056374641515348455</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuActualCost&#34;</span>: <span style="color:#ae81ff">0.0056374641515348455</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryByteHours&#34;</span>: <span style="color:#ae81ff">46971476835.98894</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryBytesUsageAverage&#34;</span>: <span style="color:#ae81ff">1957144868.1662054</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryUsage&#34;</span>: <span style="color:#ae81ff">0.6954428057947072</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryLimitCost&#34;</span>: <span style="color:#ae81ff">1.5261538150343459</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.034274399947769485</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryActualCost&#34;</span>: <span style="color:#ae81ff">0.034274399947769485</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageByteHours&#34;</span>: <span style="color:#ae81ff">296.0557048723639</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageLimitCost&#34;</span>: <span style="color:#ae81ff">0.38230305987834323</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageUsage&#34;</span>: <span style="color:#ae81ff">0.11789896027827546</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.005920212076830545</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageActualCost&#34;</span>: <span style="color:#ae81ff">0.005920212076830545</span>,<span style="color:#f92672">&#34;networkUsage&#34;</span>: <span style="color:#ae81ff">1.2561386253145561</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;networkDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.0631073122413465</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;networkActualCost&#34;</span>: <span style="color:#ae81ff">0.0631073122413465</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;test1&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;window&#34;</span>: {
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-04-17T00:00:00+08:00&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-04-18T00:00:00+08:00&#34;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-04-17T00:00:00+08:00&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-04-18T00:00:00+08:00&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuCoreHours&#34;</span>: <span style="color:#ae81ff">2.4017858534989167</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuCoreUsageAverage&#34;</span>: <span style="color:#ae81ff">0.05003720528122743</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuUsage&#34;</span>: <span style="color:#ae81ff">0.11454670760040295</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuLimitCost&#34;</span>: <span style="color:#ae81ff">2.289230722551519</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.005645352337076829</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuActualCost&#34;</span>: <span style="color:#ae81ff">0.005645352337076829</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryByteHours&#34;</span>: <span style="color:#ae81ff">46969022844.09973</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryBytesUsageAverage&#34;</span>: <span style="color:#ae81ff">1957042618.5041554</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryUsage&#34;</span>: <span style="color:#ae81ff">0.6954064728726917</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryLimitCost&#34;</span>: <span style="color:#ae81ff">1.5261538150343459</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.03427260930576406</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryActualCost&#34;</span>: <span style="color:#ae81ff">0.03427260930576406</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageByteHours&#34;</span>: <span style="color:#ae81ff">296.51888150455557</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageLimitCost&#34;</span>: <span style="color:#ae81ff">0.38230305987834323</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageUsage&#34;</span>: <span style="color:#ae81ff">0.11808341219884944</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.005929474198270796</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageActualCost&#34;</span>: <span style="color:#ae81ff">0.005929474198270796</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;networkUsage&#34;</span>: <span style="color:#ae81ff">1.2561386253145561</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;networkDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.0631073122413465</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;networkActualCost&#34;</span>: <span style="color:#ae81ff">0.0631073122413465</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><h3 id="query-cluster-cost-breakdown">Query cluster cost breakdown</h3>
<p>Endpoint: /api/cluster/breakdown</p>
<blockquote>
<p>TBD</p>
</blockquote>
<h2 id="node-cost-api">Node Cost API</h2>
<h3 id="query-node-cost">Query node cost</h3>
<p>Example: Query the costs on May 21, 2023, and aggregate them in the cluster dimension</p>
<p>The query request is as follows, <code>aggregate=cluster</code> means to aggregate the cost in the cluster dimension.</p>
<pre tabindex="0"><code>${HOST}/api//node?window=2023-05-21T00%3A00%3A00%2B08%3A00%2C2023-05-22T00%3A00%3A00%2B08%3A00&amp;aggregate=cluster&amp;step=1d
</code></pre><p>The response is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;test1&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;window&#34;</span>: {
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-05-21T00:00:00+08:00&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-05-22T00:00:00+08:00&#34;</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-05-21T00:00:00+08:00&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-05-22T00:00:00+08:00&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuCoreHours&#34;</span>: <span style="color:#ae81ff">10191.999645820562</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuCoreUsageAverage&#34;</span>: <span style="color:#ae81ff">11.849338429255141</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuUsage&#34;</span>: <span style="color:#ae81ff">1398.9775682219886</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuLimitCost&#34;</span>: <span style="color:#ae81ff">15249.214211755743</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuDiscountedCost&#34;</span>: <span style="color:#ae81ff">381.60351525705556</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;cpuActualCost&#34;</span>: <span style="color:#ae81ff">28.957126887351876</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryByteHours&#34;</span>: <span style="color:#ae81ff">75542324732065.4</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryBytesUsageAverage&#34;</span>: <span style="color:#ae81ff">3204178398788.0137</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryUsage&#34;</span>: <span style="color:#ae81ff">1112.9733948614235</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryLimitCost&#34;</span>: <span style="color:#ae81ff">3346.309071231689</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryDiscountedCost&#34;</span>: <span style="color:#ae81ff">319.71875931585464</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;memoryActualCost&#34;</span>: <span style="color:#ae81ff">30.702726624974325</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;gpuLimitCost&#34;</span>: <span style="color:#ae81ff">8510.219221802927</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageByteHours&#34;</span>: <span style="color:#ae81ff">325888.80723224004</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageLimitCost&#34;</span>: <span style="color:#ae81ff">930.4165497908426</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageUsage&#34;</span>: <span style="color:#ae81ff">260.05386312757275</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageDiscountedCost&#34;</span>: <span style="color:#ae81ff">5527.065766508991</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;storageActualCost&#34;</span>: <span style="color:#ae81ff">589.8840784941499</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><h3 id="query-node-cost-decomposition">Query node cost decomposition</h3>
<blockquote>
<p>TBD</p>
</blockquote>
<h2 id="container-cost-api">Container Cost API</h2>
<h3 id="query-container-cost">Query container cost</h3>
<p>Endpoint: /api/cost</p>
<h4 id="example-1-query-the-container-cost-in-the-past-hour">Example 1: Query the container cost in the past hour</h4>
<p>The request is as follows:</p>
<pre tabindex="0"><code>${HOST}/api/cost?window=1h
</code></pre><p>The response is as follows, where <code>test1/kube-system/kube-state-metrics-678c95bd66-zpxhr/kube-state-metrics/d222ea5b968281735981465d393dc140fae2fa6c82bca4ce7b0551094542b6cc</code> is the container key, which can uniquely locate the container in the cluster, and its cluster is <code>test1 </code>,name The space is <code>kube-system</code>, the Pod is <code>kube-state-metrics-678c95bd66-zpxhr</code>, the container name is <code>kube-state-metrics</code>, and the container ID is <code>d222ea5b968281735981465d393dc140fae2fa6c82bca4ce7b0551094542b6cc</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;test1/kube-system/kube-state-metrics-678c95bd66-zpxhr/kube-state-metrics/d222ea5b968281735981465d393dc140fae2fa6c82bca4ce7b0551094542b6cc&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;window&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-05-21T00:00:00+08:00&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-05-22T00:00:00+08:00&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-05-21T00:00:00+08:00&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-05-22T00:00:00+08:00&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;cpuCoreHours&#34;</span>: <span style="color:#ae81ff">0.0006655009861111111</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;cpuCoreUsageAverage&#34;</span>: <span style="color:#ae81ff">0.0006655009861111111</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;cpuUsage&#34;</span>: <span style="color:#ae81ff">0.00018150026893939394</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;memoryByteHours&#34;</span>: <span style="color:#ae81ff">30465849.806451615</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;memoryByteUsageAverage&#34;</span>: <span style="color:#ae81ff">30465849.806451615</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;memoryUsage&#34;</span>: <span style="color:#ae81ff">0.0025794121526902724</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;networkTransferBytes&#34;</span>: <span style="color:#ae81ff">155958130.4459916</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;networkReceiveBytes&#34;</span>: <span style="color:#ae81ff">7025546.93011364</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;networkUsage&#34;</span>: <span style="color:#ae81ff">0.12143230242737027</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">]</span>
</span></span></code></pre></div><h4 id="example-2-query-costs-for-the-past-1-hour-and-aggregate-by-namespace">Example 2: Query costs for the past 1 hour and aggregate by namespace</h4>
<p>The request is as follows, <code>aggregate=cluster,namespace</code> means aggregation according to the two dimensions of cluster <code>cluster</code> and namespace <code>namespace</code>.</p>
<pre tabindex="0"><code>${HOST}/api/cost?window=1h&amp;aggregate=cluster,namespace
</code></pre><p>The response is as follows, expressed in the form of key-value pairs, where <code>test1/default</code> and <code>test1/wiseinf-system</code> are the aggregated cluster and namespace composition (for example, <code>test1/wiseinf-system</code> means that the cluster is <code>test1</code>, the namespace is <code>wiseinf-system</code>), its value is the query time window and the cost of CPU, memory, storage, and network.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;test1/default&#34;</span>: {
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;window&#34;</span>: {
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-05-16T03:12:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-05-17T03:12:00Z&#34;</span>
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-05-16T03:12:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-05-17T03:12:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;cpuCoreHours&#34;</span>: <span style="color:#ae81ff">110.37890957267645</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;cpuCoreUsageAverage&#34;</span>: <span style="color:#ae81ff">4.599121232194852</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;cpuUsage&#34;</span>: <span style="color:#ae81ff">14.534367730634747</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;cpuDiscountedCost&#34;</span>: <span style="color:#ae81ff">5.087019014821965</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;memoryByteHours&#34;</span>: <span style="color:#ae81ff">855736964377.1166</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;memoryBytesUsageAverage&#34;</span>: <span style="color:#ae81ff">35655706849.04652</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;memoryUsage&#34;</span>: <span style="color:#ae81ff">16.161382539369775</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;memoryDiscountedCost&#34;</span>: <span style="color:#ae81ff">5.656134320229584</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;storageByteHours&#34;</span>: <span style="color:#ae81ff">71415669997.57649</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;storageBytesUsageAverage&#34;</span>: <span style="color:#ae81ff">2975652916.565687</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;storageUsage&#34;</span>: <span style="color:#ae81ff">0.03335223778525009</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;storageDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.8787704581851865</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;networkTransferBytes&#34;</span>: <span style="color:#ae81ff">1719133463220.9966</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;networkReceiveBytes&#34;</span>: <span style="color:#ae81ff">5342028979687.877</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;networkUsage&#34;</span>: <span style="color:#ae81ff">1436.257368277605</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;test1/wiseinf-system&#34;</span>: {
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;window&#34;</span>: {
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-05-16T03:12:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-05-17T03:12:00Z&#34;</span>
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;2023-05-16T03:12:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#e6db74">&#34;2023-05-17T03:12:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;cpuCoreHours&#34;</span>: <span style="color:#ae81ff">0.473797171047238</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;cpuCoreUsageAverage&#34;</span>: <span style="color:#ae81ff">0.01974154879363492</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;cpuUsage&#34;</span>: <span style="color:#ae81ff">0.08657493662239153</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;cpuDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.030290465709544856</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;memoryByteHours&#34;</span>: <span style="color:#ae81ff">74778025427.29366</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;memoryBytesUsageAverage&#34;</span>: <span style="color:#ae81ff">3115751059.4705696</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;memoryUsage&#34;</span>: <span style="color:#ae81ff">1.4158569605645943</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;memoryDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.4953997082063547</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;storageByteHours&#34;</span>: <span style="color:#ae81ff">1515201139.4631371</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;storageBytesUsageAverage&#34;</span>: <span style="color:#ae81ff">63133380.81096403</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;storageUsage&#34;</span>: <span style="color:#ae81ff">0.0011343806651708506</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;storageDiscountedCost&#34;</span>: <span style="color:#ae81ff">0.06193233856164118</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;networkTransferBytes&#34;</span>: <span style="color:#ae81ff">11732534100151.451</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;networkReceiveBytes&#34;</span>: <span style="color:#ae81ff">15567186905652.652</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&#34;networkUsage&#34;</span>: <span style="color:#ae81ff">7666.392896312047</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ac38a1975f478ccb8a2806eda6f684b8">2.7.2 - API interface reference</h1>
    <div class="lead">Cost management API interface reference.</div>
	
<!DOCTYPE html>
<html lang="ZH-cn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="SwaggerUI"
  />
  <title>Wisecost API interface</title>
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@4.5.0/swagger-ui.css" />
</head>
<body>
<div id="swagger-ui"></div>
<script src="https://unpkg.com/swagger-ui-dist@4.5.0/swagger-ui-bundle.js" crossorigin></script>
<script>
  window.onload = () => {
    window.ui = SwaggerUIBundle({
      url: '/api/v1/openapi.json',
      dom_id: '#swagger-ui',
    });
  };
</script>
</body>
</html>
</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-01e1381825635108c13ad0b6aeb191c7">3 - Ruyi</h1>
    <div class="lead">Ruyi: Cloud native cluster scaling engine.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Ruyi is a cloud native cluster autoscaling engine.</p>

</div>

<p>Its main functions include:</p>
<ul>
<li>Cluster autoscaling: Provides autoscaling based on pod request.</li>
<li>Virtual capacity: Automatic scale node capacity based on intelligent model to support scheduling as many pods as possible.</li>
<li>Multi-cloud support: Supports AWS, Alibaba Cloud, and more cloud service providers are being integrated.</li>
<li>Monitoring management: Provide multi-dimensional monitoring indicator data.</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-cc7d60fb60c1ccaac59ce2ceb1c8f961">3.1 - Installation and Deployment</h1>
    <div class="lead">Describes the detailed steps for installing Ruyi: a cloud native cluster scaling engine.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Ruyi: Cloud native cluster expansion and contraction engine.</p>

</div>

<p>Updating, please wait.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-802a1bd58ef9bdae22313856241b0f7f">3.2 - Autoscaling</h1>
    <div class="lead">How to use autocaling of <strong>Ruyi</strong>.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Ruyi: Cloud native cluster autoscaling engine.</p>

</div>

<h2 id="principle-of-autoscaling">Principle of autoscaling</h2>
<p>Updating, please wait.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9bc01fd7dcd71c629d9b0497e453387a">3.3 - Virtual Capacity</h1>
    <div class="lead">Describes Ruyi: The principle and application process of expanding and shrinking virtual capacity of cloud native clusters.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Ruyi: The virtual capacity of the cloud native cluster expansion and contraction engine is based on the analysis of node requests, usage, etc., and dynamically expands node capacity to support users to schedule more applications while ensuring stability as much as possible.</p>

</div>

<h2 id="virtual-capacity-overview">Virtual Capacity Overview</h2>
<p>Virtual capacity can increase the node capacity by three times (or even more) of its original capacity under certain conditions, thereby supporting the scheduling of more Pods (applications) on the node.</p>
<p>With virtual capacity, users can significantly save on their IT costs.</p>
<h2 id="virtual-capacity-principle">Virtual capacity principle</h2>
<p>To understand virtual capacity, you must first understand Kuberente&rsquo;s scheduling mechanism. In Kubernetes, scheduling is the process of assigning an application&rsquo;s Pods to the nodes on which they will run. Pods generally specify their resource requirements when being scheduled. For CPU resources, their Request and Limit attributes are specified (hereinafter referred to as <code>CPU Request</code> and <code>CPU Limit</code>). For nodes in Kubernetes, they generally have capacity attributes. The capacity attributes are divided into two types: 1. <code>Capacity</code>: the upper limit of the node&rsquo;s capacity; 2. <code>Allocatable</code>: the upper limit of the node&rsquo;s allocable capacity, which will be based on the upper limit of the node&rsquo;s capacity. Obtained by removing the resources used by the system and some reserved resources. When Kubernetes schedules, in terms of capacity, whether the Pod&rsquo;s <code>CPU Request</code> and the node&rsquo;s <code>Allocatable</code> match. The meaning of matching means: the remaining capacity of the current node <code>Allocatable</code> should be greater than or equal to the <code>CPU Request</code> of the current Pod.</p>
<p>When the remaining capacity of the node <code>Allocatable</code> is less than the <code>CPU Request</code> of the current Pod, the Pod cannot be scheduled to this node. At this time, scheduling will consider other nodes. When all nodes do not meet the requirements, the Pod will be suspended directly and wait for suitable resources to be scheduled again. When a Pod is suspended, some Kubernetes providers provide a cluster expansion and contraction mechanism. When users enable this mechanism, new nodes will be expanded in the cluster and the Pod will be scheduled to the new node.</p>
<p>In fact, when the remaining capacity of the node <code>Allocatable</code> is less than the <code>CPU Request</code> of the current Pod, the usage on the current node may be low, and the actual remaining resources on the node are greater than the <code>CPU Request</code> of the current Pod. Theoretically, the Pod can be scheduled to this node. Virtual capacity provides a mechanism that can expand the <code>Allocatable</code> value of a node under certain conditions, allowing the scheduler to consider that the remaining capacity of the current node <code>Allocatable</code> is still greater than or equal to the <code>CPU Request</code> of the current Pod, thereby scheduling the Pod to the node.</p>
<p>By expanding the virtual capacity of nodes, IT costs can be significantly saved, especially in situations such as development and testing where resource utilization is low.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Note</h4>

    Scheduling too many Pods on a node may have a certain impact on the stability of the node and application. Therefore, it is necessary to set appropriate values ​​according to actual conditions and use some balanced scheduling algorithms.

</div>

<h2 id="case">Case</h2>
<p>Below we use a case to illustrate how to virtualize capacity.</p>
<p>In the case, the node resource is 4 cores and 8G. We will schedule 4 Nginx Pods on it through <code>kubectl apply -f nginx.yaml</code> (the <code>CPU Request</code> of the Pod is 2 cores), as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">apps/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">Kind</span>: <span style="color:#ae81ff">Deployment</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx-deployment</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">matchLabels</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">app</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">app</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">image</span>: <span style="color:#ae81ff">nginx:1.14.2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">requests</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">500Mi</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">limits</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">cpu</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">1024Mi</span>
</span></span></code></pre></div><p>Check the status through <code>kubectl get po</code> and you can see that a Pod is in the Pending state, indicating that the <code>Allocatable</code> of the current node cannot meet the resource requirements of <code>nginx-deployment</code>.</p>
<pre tabindex="0"><code>********:~/src/nginx$ kubectl get po
NAME READY STATUS RESTARTS AGE
nginx-deployment-7dc45fbc49-5k9gd 1/1 Running 0 6s
nginx-deployment-7dc45fbc49-gpq77 1/1 Running 0 2d14h
nginx-deployment-7dc45fbc49-snj6k 0/1 Pending 0 6s
nginx-deployment-7dc45fbc49-v4xsq 1/1 Running 0 41h
</code></pre><p>After waiting for a period of time, execute <code>kubectl get po</code> to view the status. You can see that all Pods are running on the node.</p>
<pre tabindex="0"><code>********:~/src/nginx$ kubectl get po
NAME READY STATUS RESTARTS AGE
nginx-deployment-7dc45fbc49-5k9gd 1/1 Running 0 23m
nginx-deployment-7dc45fbc49-gpq77 1/1 Running 0 2d14h
nginx-deployment-7dc45fbc49-snj6k 1/1 Running 0 23m
nginx-deployment-7dc45fbc49-v4xsq 1/1 Running 0 41h

WUYING\wiseinf_131347202297@6w49f6pbp2eeds8:~/src/nginx$ kubectl describe node 6w49f6pbp2eeds8
Name: 6w49f6pbp2eeds8
Roles: control-plane,master
Labels: beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/arch=amd64kubernetes.io/hostname=6w49f6pbp2eeds8
                    ...
Annotations: virtualcapacity.wiseinf.com/allocatable: 10200
                    virtualcapacity.wiseinf.com/last-decrease-timestamp: 2023-08-31T10:34:57+08:00
                    virtualcapacity.wiseinf.com/last-increase-timestamp: 2023-08-31T10:37:57+08:00
                    virtualcapacity.wiseinf.com/ratio: 3.000
                    ...
CreationTimestamp: Fri, 25 Aug 2023 16:23:13 +0800
Taints: &lt;none&gt;
Unschedulable: false
Lease:
  HolderIdentity: 6w49f6pbp2eeds8
  AcquireTime: &lt;unset&gt;
  RenewTime: Thu, 31 Aug 2023 10:52:51 +0800
Conditions:
  Type Status LastHeartbeatTime LastTransitionTime Reason Message
  ---- ------ ----------------- ------------------ ----- - -------
  ...
Addresses:
  InternalIP: 198.19.3.220
  Hostname: 6w49f6pbp2eeds8
Capacity:
  CPU: 4
  ephemeral-storage: 82437788Ki
  hugepages-1Gi: 0
  hugepages-2Mi: 0
  memory: 7784472Ki
  pods: 110
Allocable:
  cpu: 10200m
  ephemeral-storage: 75974665296
  hugepages-1Gi: 0
  hugepages-2Mi: 0
  memory: 7682072Ki
  pods: 110
System Info:
  Machine ID: 20220524174107033216151293301385
  System UUID: eddd0796-49a7-4094-afd0-961b8a826663
  Boot ID: 1b9bde42-fadf-4e83-8af8-3f6cc44a0b99
  Kernel Version: 5.4.0-113-generic
  OS Image: Ubuntu 20.04.4 LTS
  Operating System: linux
  Architecture: amd64
  Container Runtime Version: docker://24.0.5
  Kubelet Version: v1.22.17
  Kube-Proxy Version: v1.22.17
PodCIDR: 10.244.0.0/24
PodCIDRs: 10.244.0.0/24
Non-terminated Pods: (16 in total)
  Namespace Name CPU Requests CPU Limits Memory Requests Memory Limits Age
  --------- ---- ------------ ---------- --------------- ------------- ---
  default nginx-deployment-7dc45fbc49-5k9gd 2 (19%) 2 (19%) 500Mi (6%) 1Gi (13%) 39m
  default nginx-deployment-7dc45fbc49-gpq77 2 (19%) 2 (19%) 500Mi (6%) 1Gi (13%) 2d15h
  default nginx-deployment-7dc45fbc49-snj6k 2 (19%) 2 (19%) 500Mi (6%) 1Gi (13%) 39m
  default nginx-deployment-7dc45fbc49-v4xsq 2 (19%) 2 (19%) 500Mi (6%) 1Gi (13%) 41h
  ...
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource Requests Limits
  -------- -------- ------
  cpu 9650m (94%) 11100m (108%)
  memory 3901239040 (49%) 7595365Ki (98%)
  ephemeral-storage 0 (0%) 0 (0%)
  hugepages-1Gi 0 (0%) 0 (0%)
  hugepages-2Mi 0 (0%) 0 (0%)
Events: &lt;none&gt;
</code></pre><p>From the monitoring indicator <code>kube_node_status_allocatable</code>, you can see that the number of allocable CPU cores <code>Allocatable</code> of node <code>6w49f6pbp2eeds8</code> has been growing until <strong>10.2</strong> cores. At the same time, it can be seen from the monitoring indicator <code>kube_node_status_capacity</code> that the node&rsquo;s capacity has always been <strong>4</strong> cores. It can be seen that the CPU capacity of node <code>6w49f6pbp2eeds8</code> has been expanded by approximately 2.55 times.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/ruyi/virtualcapacity/node-allocatable_hu31e328ed3036e9882644702f546ce89e_132311_900x0_resize_catmullrom_3.png" width="900" height="433">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Node’s CPU Allocatable
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>








<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/ruyi/virtualcapacity/node-capacity_hub4e37652f76e254a84e610246b6d8089_55563_900x0_resize_catmullrom_3.png" width="900" height="434">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
The CPU Capacity of the node
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>From the monitoring indicator <code>ruyi_node_request_sum</code>, you can see that the sum of CPU requests of the Pod on node <code>6w49f6pbp2eeds8</code> has been growing until 4 copies of <code>nginx-deployment</code> are scheduled to the node and run.</p>







<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 910px">
	<img class="card-img-top" src="/docs/ruyi/virtualcapacity/node-cpu-request-sum_huf30fc5671e2b9ef5baf3f476ab942257_107595_900x0_resize_catmullrom_3.png" width="900" height="457">
	
	<figcaption class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
The total CPU requests of the node
<small class="text-muted"><br/>Wiseinf Inc.</small></p>
	</figcaption>
	
</figure>

<p>Through this case, we can see that if virtual capacity can be used rationally, a lot of CPU costs can be saved.</p>
<p>To learn how to configure virtual capacity for a node pool, please refer to [Virtual Capacity Configuration](/docs/ruyi/configuration/nodegroup/#Virtual Capacity Configuration)</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1d9cdd8985d61af6eb19f64872c6238c">3.4 - Configuration</h1>
    <div class="lead">Describe Ruyi: Configuration of cloud native cluster scaling engine.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Ruyi: Cloud native cluster expansion and contraction engine.</p>

</div>

<h2 id="configure-ruyi-cloud-native-cluster-expansion-and-contraction-engine">Configure Ruyi: cloud native cluster expansion and contraction engine</h2>
<p>Ruyi: The cloud native cluster expansion and contraction engine provides two major features: automatic expansion and contraction and virtual capacity. You can use one feature alone or both features together.</p>
<p>Can be specified via the command line parameter <code>--features</code>.</p>
<p>The following describes the main configuration parameters for individually configuring the automatic expansion and contraction feature or the virtual capacity feature.</p>
<h3 id="configure-automatic-expansion-and-contraction-features">Configure automatic expansion and contraction features</h3>
<pre tabindex="0"><code>$ ruyi --features=Autoscaling --cloud-provider=alicloud --loglevel=debug --kubeconfig=/opt/ruyi/config/kubeconfig --config=/opt/ruyi/config/config.yaml
</code></pre><h3 id="configure-virtual-capacity-characteristics">Configure virtual capacity characteristics</h3>
<pre tabindex="0"><code>$ ruyi --features=VirtualCapacity --cloud-provider=alicloud --loglevel=debug --kubeconfig=/opt/ruyi/config/kubeconfig --config=/opt/ruyi/config/config.yaml --webhook-cert -dir=/opt/ruyi/certs/
</code></pre><p>The virtual capacity feature involves the virtual capacity controller and Webhook, which can be controlled separately through parameters.</p>
<p>For example, the virtual capacity controller can be enabled individually with the following command:</p>
<pre tabindex="0"><code>$ ruyi --features=VirtualCapacity --cloud-provider=alicloud --loglevel=debug --kubeconfig=/opt/ruyi/config/kubeconfig --config=/opt/ruyi/config/config.yaml --enable-virtual -capacity-controller=true --enable-webhook=false
      
</code></pre><p>Or, start the webhook separately with the following command:</p>
<pre tabindex="0"><code>$ ruyi --features=VirtualCapacity --cloud-provider=alicloud --loglevel=debug --kubeconfig=/opt/ruyi/config/kubeconfig --config=/opt/ruyi/config/config.yaml
--enable-virtual-capacity-controller=false --enable-webhook=true --webhook-cert-dir=/opt/ruyi/certs/
</code></pre><p>When configuring Webhook, you must specify <code>MutatingWebhookConfiguration</code>, as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">admissionregistration.k8s.io/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">MutatingWebhookConfiguration</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">wiseinf-webhooks</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">webhooks</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">ruyi.wiseinf-system.svc</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">admissionReviewVersions</span>:
</span></span><span style="display:flex;"><span>      -<span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">clientConfig</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">caBundle</span>: <span style="color:#ae81ff">&lt;CA Bundle&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">service</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">name</span>: <span style="color:#ae81ff">ruyi</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">wiseinf-system</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/mutate--v1-node</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">rules</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">apiGroups</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">apiVersions</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">operations</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#e6db74">&#34;UPDATE&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">resources</span>:
</span></span><span style="display:flex;"><span>          -<span style="color:#ae81ff">nodes/status</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">scope</span>: <span style="color:#e6db74">&#34;Cluster&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">failurePolicy</span>: <span style="color:#ae81ff">Ignore</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">sideEffects</span>: <span style="color:#ae81ff">None</span>
</span></span></code></pre></div><blockquote>
<p>Note: The <code>caBundle</code> of <code>MutatingWebhookConfiguration</code> must be specified correctly, otherwise the Webhook will not take effect.</p>
</blockquote>
<h3 id="environment-variables">Environment variables</h3>
<p>When using the automatic expansion and contraction feature, you need to provide relevant information about the cloud service provider through environment variables.</p>
<p>If you use Alibaba Cloud, you need to configure Alibaba Cloud&rsquo;s AccessKey and its Region through environment variables.</p>
<table>
<thead>
<tr>
<th>Environment variable name</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>ALIBABA_CLOUD_ACCESS_KEY_ID</td>
<td>Alibaba Cloud AccessKeyID</td>
<td>No default value</td>
</tr>
<tr>
<td>ALIBABA_CLOUD_ACCESS_KEY_SECRET</td>
<td>Alibaba Cloud AccessKeySecret</td>
<td>No default value</td>
</tr>
<tr>
<td>ALIBABA_CLOUD_REGION_ID</td>
<td>Region ID of Alibaba Cloud cluster</td>
<td>cn-hangzhou</td>
</tr>
</tbody>
</table>
<p>If you use AWS, you need to configure AWS&rsquo;s AccessKey through environment variables.</p>
<table>
<thead>
<tr>
<th>Environment variable name</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>AWS_ACCESS_KEY_ID or AWS_ACCESS_KEY</td>
<td>AWS Cloud AccessKeyID</td>
<td>No default value</td>
</tr>
<tr>
<td>AWS_SECRET_ACCESS_KEY or AWS_SECRET_KEY</td>
<td>AWS Cloud AccessKeySecret</td>
<td>No default value</td>
</tr>
<tr>
<td>AWS_ASSUME_ROLE_ARN</td>
<td>AWS Cloud ASSUME_ROLE_ARN</td>
<td>No default value</td>
</tr>
</tbody>
</table>
<p>For detailed configuration items, please refer to:</p>
<ul>
<li><a href="/docs/ruyi/configuration/command-line/">Command line configurations</a></li>
<li><a href="/docs/ruyi/configuration/nodegroup/">Node group configurations</a></li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-743cd90d3c1ba1709b66bd0042c39a58">3.4.1 - Command line parameters</h1>
    <div class="lead">Describes the command line parameters of Ruyi: the cloud native cluster scaling engine.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Ruyi: Cloud native cluster expansion and contraction engine.</p>

</div>

<h2 id="command-line-parameters">Command line parameters</h2>
<p>You can get the usage of Ruyi engine through <code>--help</code>, as follows:</p>
<pre tabindex="0"><code>$ruyi --help
usage: ruyi --config=CONFIG [&lt;flags&gt;]

Flags:
      --help Show context-sensitive help (also try --help-long and --help-man).
  -f, --features=&#34;Autoscaling,VirtualCapacity&#34;
                                 Enable ruyi features. Available options are Autoscaling, VirtualCapacity
      --cloud-provider=aws Set cloud provider to use. Available options are (aws, alicloud)
      --config=CONFIG Set config file location
      --kubeconfig=KUBECONFIG Set kubeconfig file location
      --interval=60s Set interval for evaluating node scale up or down
      --metrics-address=&#34;:8080&#34; Set address for /metrics
      --health-probe-address=&#34;:8090&#34;
                                 Set address for health probe
      --port=8443 Set port
      --dry-run Set dry-run argument. If true, forces dry run on all nodegroups
  -v, --loglevel=info Set logging level. Available options are (trace, debug, info, warning, error, fatal, panic)
      --logfmt=text Set logging format. Available options are (text, json)
      --enable-virtual-capacity-controller
                                 Set enable virtual capacity controller
      --enable-webhook Set enable webhook for virtual capacity
      --webhook-cert-dir=&#34;&#34; Set webhook certificate directory
      --concurrency=5 Set concurrency
      --leader-elect Enable leader election
      --leader-elect-lease-duration=15s
                                 Set leader election lease duration
      --leader-elect-renew-deadline=10s
                                 Set leader election renewal deadline
      --leader-elect-retry-period=2s
                                 Set leader election retry period
      --leader-elect-lease-namespace=&#34;wiseinf-system&#34;
                                 Set leader election lease object namespace
      --leader-elect-lease-name=&#34;ruyi-lease&#34;
                                 Set leader election lease object name
</code></pre><p>The parameters are described in detail below.</p>
<h2 id="parameter-description">Parameter Description</h2>
<h3 id="--help"><code>--help</code></h3>
<p>The parameter <code>--help</code> provides command line usage help.</p>
<h3 id="-f---features"><code>-f, --features</code></h3>
<p>The parameters <code>-f, --features</code> indicate the engine startup features, where <code>Autoscaling</code> means enabling the automatic expansion and contraction feature, and <code>VirtualCapacity</code> means enabling the virtual capacity feature.</p>
<p>The default value is <code>Autoscaling,VirtualCapacity</code>, which means that both the automatic scaling feature and the virtual capacity feature are enabled.</p>
<h3 id="--cloud-provider"><code>--cloud-provider</code></h3>
<p>The parameter <code>--cloud-provider</code> indicates the cloud service provider used by the engine. Its value is aws or alicloud, and the default value is aws.</p>
<h3 id="--config"><code>--config</code></h3>
<p>The parameter <code>--config</code> indicates the location of the node group configuration file used by the engine. For node group configuration, please see <a href="/docs/ruyi/configuration/nodegroup">Node Group Configuration</a></p>
<h3 id="--kubeconfig"><code>--kubeconfig</code></h3>
<p>The parameter <code>--kubeconfig</code> indicates the location of the kubeconfig file used by the engine. The default is empty, in which case the in-cluster access configuration will be used.</p>
<h3 id="--interval"><code>--interval</code></h3>
<p>The parameter <code>--interval</code> indicates the scheduling interval used by the feature in the engine. For example, automatic expansion and contraction evaluates whether the node pool is expanding or shrinking at this interval.</p>
<p>The default value for this is 60 seconds.</p>
<h3 id="--metrics-address"><code>--metrics-address</code></h3>
<p>The parameter <code>--metrics-address</code> indicates the port used by the engine to monitor metrics. Specific metric data can be obtained from <code>/metrics</code> of this port.</p>
<h3 id="--health-probe-address"><code>--health-probe-address</code></h3>
<p>The parameter <code>--health-probe-address</code> indicates the monitoring detection address used by the engine. Health detection and readiness detection can be performed from <code>/healthz</code> and <code>/readyz</code> respectively on this port.</p>
<h3 id="--port"><code>--port</code></h3>
<p>The parameter <code>--port</code> is the port used by the engine webhook, and the default value is 8443.</p>
<h3 id="--dry-run"><code>--dry-run</code></h3>
<p>The parameter <code>--dry-run</code> instructs the engine to only run without making any modifications to the environment or nodes.</p>
<h3 id="-v---loglevelinfo"><code>-v, --loglevel=info</code></h3>
<p>The parameter <code>--dry-run</code> sets the log level. Optional values ​​include <code>trace</code>, <code>debug</code>, <code>info</code>, <code>warning</code>, <code>error</code>, <code>fatal</code>, <code>panic</code>, and the default value is <code>info</code>.</p>
<h3 id="--logfmt"><code>--logfmt</code></h3>
<p>The parameter <code>--dry-run</code> sets the log output format. Optional values ​​include <code>text</code>, <code>json</code>, and the default value is <code>text</code>, which means the output is in text format.</p>
<h3 id="--enable-virtual-capacity-controller"><code>--enable-virtual-capacity-controller</code></h3>
<p>The parameter <code>--enable-virtual-capacity-controller</code> indicates whether to enable the virtual capacity controller. The default value is <code>true</code>.</p>
<h3 id="--enable-webhook"><code>--enable-webhook</code></h3>
<p>The parameter <code>--enable-webhook</code> indicates whether to enable Webhook, and the default value is <code>true</code>.</p>
<h3 id="--webhook-cert-dir"><code>--webhook-cert-dir</code></h3>
<p>The parameter <code>--webhook-cert-dir</code> indicates the directory location of the certificate when Webhook is enabled. The engine will initialize the Webhook certificate through the files <code>tls.crt</code> and <code>tls.key</code> in this directory location.
If its value is empty, the webhook will look for certificates in the directory <code>/tmp/k8s-webhook-server/serving-certs</code>��</p>
<!-- ### `--concurrency`

The parameter `--concurrency` indicates the number of concurrency. The default value is 5, which is not used yet. -->
<h3 id="--leader-elect"><code>--leader-elect</code></h3>
<p>The parameter <code>--leader-elect</code> sets whether to enable the leader election mechanism. Generally used in high availability environments.</p>
<h3 id="leader-elect-lease-duration"><code>leader-elect-lease-duration</code></h3>
<p>The parameter <code>leader-elect-lease-duration</code> sets the waiting time for non-master nodes to obtain the leader lease. The default value is 15 seconds.</p>
<h3 id="--leader-elect-renew-deadline"><code>--leader-elect-renew-deadline</code></h3>
<p>The parameter <code>--leader-elect-renew-deadline</code> sets the timeout for the master node to renew the lease. The default value is 10 seconds.</p>
<h3 id="--leader-elect-retry-period"><code>--leader-elect-retry-period</code></h3>
<p>The parameter <code>--leader-elect-renew-deadline</code> sets the waiting time when the node retries. The default value is 2 seconds.</p>
<h3 id="--leader-elect-lease-namespace"><code>--leader-elect-lease-namespace</code></h3>
<p>The parameter <code>--leader-elect-lease-namespace</code> sets the namespace in which leases are stored. The default value is <code>wiseinf-system</code>.</p>
<h3 id="--leader-elect-lease-name"><code>--leader-elect-lease-name</code></h3>
<p>The parameter <code>--leader-elect-lease-name</code> sets the name of the lease. The default value is <code>ruyi-lease</code>.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-311560d092771780a32c6c35dc00ad8c">3.4.2 - Node group configurations</h1>
    <div class="lead">Describes node group configurations of <strong>Ruyi</strong>.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Ruyi: Cloud native cluster expansion and contraction engine configuration.</p>

</div>

<h2 id="overview-of-node-group-configuration-parameters">Overview of node group configuration parameters</h2>
<p>The engine must depend on the node group configuration parameters in order to run. The node group configuration parameters use the command line parameter <code>--config</code> to specify the configuration file location. For example: <code>--config=/etc/ruyi/config.yaml</code></p>
<p>The configuration file format is YAML format, the example is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">nodeGroups</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;default-pool&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">nodeGroupId</span>: <span style="color:#e6db74">&#34;np1234567890&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">key</span>: <span style="color:#ae81ff">spot_type</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">value</span>: <span style="color:#ae81ff">cpu</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">dryRun</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enableAutoscaling</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">autoscaling</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">minNodes</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">maxNodes</span>: <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">enableScaleDown</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">scaleUp</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">threshold</span>: <span style="color:#ae81ff">0.70</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">scaleOnPodPending</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">silencePeriod</span>: <span style="color:#ae81ff">2m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">scaleDown</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">threshold</span>: <span style="color:#ae81ff">0.40</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">softDeleteGracePeriod</span>: <span style="color:#ae81ff">1m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">hardDeleteGracePeriod</span>: <span style="color:#ae81ff">10m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">maxNodeRemovalRate</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">taintEffect</span>: <span style="color:#ae81ff">NoExecute</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enableVirtualCapacity</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">virtualCapacity</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">prometheusAddress</span>: <span style="color:#e6db74">&#34;http://prometheus:9090&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">prometheusWindow</span>: <span style="color:#e6db74">&#34;2m&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">isThanos</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">thanosClusterKey</span>: <span style="color:#ae81ff">cluster</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">thanosClusterValue</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">reservationRatio</span>: <span style="color:#ae81ff">0.1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">increaseSilencePeriod</span>: <span style="color:#ae81ff">2m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">decreaseSilencePeriod</span>: <span style="color:#ae81ff">2m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">stabilityWindow</span>: <span style="color:#ae81ff">5m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">tolerance</span>: <span style="color:#ae81ff">0.1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">cpuMaxUsage</span>: <span style="color:#ae81ff">0.7</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">maxValue</span>: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">minValue</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">resourceReservation</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">kubeReserved</span>: <span style="color:#ae81ff">200m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">SystemReserved</span>: <span style="color:#ae81ff">200m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">SystemReservedPercentage</span>: <span style="color:#ae81ff">0.1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">alicloud</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">clusterId</span>: <span style="color:#ae81ff">c1234567890</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">lifecycle</span>: <span style="color:#ae81ff">spot</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">resourceTagging</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div><h2 id="configuration-parameters">Configuration parameters</h2>
<h3 id="name"><code>name</code></h3>
<p>The parameter <code>name</code> is the name used during engine running and can be used to output friendly log information, etc. Different node group names must be unique.</p>
<h3 id="labels-labelkey-and-labelvalue"><code>labels</code>, <code>label.Key</code> and <code>label.Value</code></h3>
<p>The parameter <code>labels</code> is an array of key-value pairs through which the engine selects node groups.
Among them, <code>label.Key</code> and <code>label.Value</code> are the key and value in the key-value pair,</p>
<h3 id="dryrun"><code>dryRun</code></h3>
<p>The parameter <code>dryRun</code> means only running without any modification to the actual environment. When this value is <code>false</code>, it can be overridden by the <code>dryRun</code> command line parameter.</p>
<h3 id="nodegroupid"><code>nodeGroupId</code></h3>
<p>The parameter <code>nodeGroupId</code> is the node group ID of the node group in the cloud service provider. The cloud service provider uses this parameter to obtain the node group information from the corresponding cloud service provider.</p>
<h3 id="enableautoscaling"><code>enableAutoscaling</code></h3>
<p>The parameter <code>enableAutoscaling</code> indicates whether to enable the automatic scaling feature, and the default is <code>true</code>.</p>
<h3 id="autoscaling"><code>autoscaling</code></h3>
<p>The parameter <code>autoscaling</code> provides corresponding parameters for automatic expansion and contraction. For details, please refer to [Automatic expansion and contraction configuration] (#automatic expansion and contraction configuration)</p>
<h3 id="enablevirtualcapacity"><code>enableVirtualCapacity</code></h3>
<p>The parameter <code>enableVirtualCapacity</code> indicates whether to enable the virtual capacity feature, and the default is <code>true</code>.</p>
<h3 id="virtualcapacity"><code>virtualCapacity</code></h3>
<p>The parameter <code>virtualCapacity</code> provides corresponding parameters for virtual capacity. For details, please see [Virtual Capacity](#Virtual Capacity Configuration)</p>
<h3 id="alicloud"><code>alicloud</code></h3>
<p>The parameter <code>alicloud</code> provides corresponding parameters for the cloud service provider Alibaba Cloud. For details, please refer to [Alibaba Cloud Service Provider Configuration](#Alibaba Cloud Service Provider Configuration)</p>
<h2 id="automatic-expansion-and-contraction-configuration">Automatic expansion and contraction configuration</h2>
<p>The automatic expansion and contraction configuration provides corresponding parameters for the automatic expansion and contraction of the node group. Examples are as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>    <span style="color:#f92672">autoscaling</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">minNodes</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">maxNodes</span>: <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">enableScaleUp</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">enableScaleDown</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">scaleUp</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">threshold</span>: <span style="color:#ae81ff">0.70</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">scaleOnPodPending</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">silencePeriod</span>: <span style="color:#ae81ff">2m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">scaleDown</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">threshold</span>: <span style="color:#ae81ff">0.40</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">softDeleteGracePeriod</span>: <span style="color:#ae81ff">1m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">hardDeleteGracePeriod</span>: <span style="color:#ae81ff">10m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">maxNodeRemovalRate</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">taintEffect</span>: <span style="color:#ae81ff">NoExecute</span>
</span></span></code></pre></div><h3 id="minnodes-and-maxnodes"><code>minNodes</code> and <code>maxNodes</code></h3>
<p>The parameters <code>minNodes</code> and <code>maxNodes</code> are the maximum and minimum values ​​for the node pool size. When performing node expansion and contraction, it will be ensured that the node pool size meets the maximum and minimum constraints.</p>
<h3 id="enablescaleup"><code>enableScaleUp</code></h3>
<p>The parameter <code>enableScaleUp</code> indicates whether to enable scaling, and the default is <code>true</code>.</p>
<h3 id="enablescaledown"><code>enableScaleDown</code></h3>
<p>The parameter <code>enableScaleUp</code> indicates whether to enable scaling, and the default is <code>true</code>.</p>
<h3 id="scaleup"><code>scaleUp</code></h3>
<p>The parameter <code>scaleUp</code> provides parameters related to expansion.</p>
<h3 id="scaleupthreshold"><code>scaleUp.threshold</code></h3>
<p>The parameter <code>scaleUp.threshold</code> is the threshold for expansion. When the ratio of the total Requests of all running Pods on the node group to the total Allocatable of the node group is greater than this value, the expansion operation will be performed.</p>
<h3 id="scaleupscaleonpodpending"><code>scaleUp.scaleOnPodPending</code></h3>
<p>The parameter <code>scaleUp.scaleOnPodPending</code> indicates whether to perform expansion when the Pod is Pending. The default value is <code>false</code>. When all nodes in the node group cannot meet the resource requirements of the node, the expansion operation is performed.</p>
<h3 id="scaleupsilenceperiod"><code>scaleUp.silencePeriod</code></h3>
<p>The parameter <code>silencePeriod</code> is the silence time. When an expansion event occurs, no expansion operations will be performed within the <code>silencePeriod</code> time.</p>
<h3 id="scaledown"><code>scaleDown</code></h3>
<p>The parameter <code>scaleDown</code> provides scaling-related parameters.</p>
<h3 id="scaledownthreshold"><code>scaleDown.threshold</code></h3>
<p>The parameter <code>scaleDown.threshold</code> is the threshold for expansion. When the ratio of the sum of Requests of all running Pods on the node group to the sum of Allocatables of the node group is less than this value, the scaling operation is performed.</p>
<h3 id="scaledownsoftdeletegraceperiod"><code>scaleDown.softDeleteGracePeriod</code></h3>
<p>The parameter <code>scaleDown.softDeleteGracePeriod</code> is the node soft deletion waiting time. During the soft deletion waiting time, the engine does not perform the reduction operation.</p>
<h3 id="scaledownharddeletegraceperiod"><code>scaleDown.hardDeleteGracePeriod</code></h3>
<p>The parameter <code>scaleDown.hardDeleteGracePeriod</code> is the node hard deletion waiting time. When the soft deletion waiting time reaches the hard deletion waiting time, the node will be deleted only when the Pod on the node is empty. After the hard deletion waiting time, the engine will forcefully delete the node.</p>
<!--
For the logic of whether the node is empty, please refer to `pkg/k8s` `NodeEmpty()` -->
<h3 id="scaledownmaxnoderemovalrate"><code>scaleDown.maxNodeRemovalRate</code></h3>
<p>The parameter <code>scaleDown.maxNodeRemovalRate</code> is the maximum value of nodes that can be reduced at the same time.</p>
<h3 id="scaledowntainteffect"><code>scaleDown.taintEffect</code></h3>
<p>The parameter <code>scaleDown.taintEffect</code> refers to the operation when scaling down. When scaling down, the node will first be labeled with <code>taint</code>, and its value range is as follows:</p>
<p>-NoSchedule
-NoExecute</p>
<ul>
<li>PreferNoSchedule</li>
</ul>
<p>For the specific meaning, please see <a href="https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration">taint and tolerance</a></p>
<h2 id="virtual-capacity-configuration">Virtual capacity configuration</h2>
<p>Virtual capacity configuration provides corresponding parameters for virtual capacity. Examples are as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>    <span style="color:#f92672">virtualCapacity</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">prometheusAddress</span>: <span style="color:#e6db74">&#34;http://prometheus:9090&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">prometheusWindow</span>: <span style="color:#e6db74">&#34;2m&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">isThanos</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">thanosClusterKey</span>: <span style="color:#ae81ff">cluster</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">thanosClusterValue</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">reservationRatio</span>: <span style="color:#ae81ff">0.1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">increaseSilencePeriod</span>: <span style="color:#ae81ff">2m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">decreaseSilencePeriod</span>: <span style="color:#ae81ff">2m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">stabilityWindow</span>: <span style="color:#ae81ff">5m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">tolerance</span>: <span style="color:#ae81ff">0.1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">cpuMaxUsage</span>: <span style="color:#ae81ff">0.7</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">maxValue</span>: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">minValue</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">resourceReservation</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">kubeReserved</span>: <span style="color:#ae81ff">200m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">systemReserved</span>: <span style="color:#ae81ff">200m</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">reservedPercentage</span>: <span style="color:#ae81ff">0.1</span>
</span></span></code></pre></div><h3 id="prometheusaddress"><code>prometheusAddress</code></h3>
<p>The parameter <code>prometheusAddress</code> is the Prometheus address monitored by Metrics of the current cluster node.</p>
<h3 id="prometheuswindow"><code>prometheusWindow</code></h3>
<p>The parameter <code>prometheusWindow</code> is the time window when the engine queries prometheus.</p>
<h3 id="isthanos"><code>isThanos</code></h3>
<p>The parameter <code>isThanos</code> refers to whether the Prometheus address corresponding to the parameter <code>prometheusAddress</code> is Thanos. The default is false. When the prometheus address is Thanos, Thanos related parameters will be appended when the engine queries.</p>
<h3 id="thanosclusterkey-and-thanosclustervalue"><code>thanosClusterKey</code> and <code>thanosClusterValue</code></h3>
<p>The parameters <code>thanosClusterKey</code> and <code>thanosClusterValue</code> are the parameter names and values ​​​​that are appended to the engine query (when the parameter <code>isThanos</code> is <code>true</code>). Additional parameters <code>thanosClusterKey</code> and <code>thanosClusterValue</code> can improve query performance.</p>
<h3 id="increasesilenceperiod"><code>increaseSilencePeriod</code></h3>
<p>The parameter <code>increaseSilencePeriod</code> is the silent time when the node virtual capacity rate increases. When the node virtual capacity rate increases, this value will be maintained within the silent time window <code>increaseSilencePeriod</code>.</p>
<h3 id="decreasesilenceperiod"><code>decreaseSilencePeriod</code></h3>
<p>The parameter <code>decreaseSilencePeriod</code> is the silent time when the node virtual capacity rate is reduced. When the node virtual capacity rate is reduced, this value will be maintained within the silent time window <code>decreaseSilencePeriod</code>.</p>
<h3 id="stabilitywindow"><code>stabilityWindow</code></h3>
<p>The parameter <code>stabilityWindow</code> is the stability window. The engine will calculate the virtual capacity rate at regular intervals. The lowest value within the stability window will be selected for the final decision to avoid excessive changes in the virtual capacity rate, which may cause the virtual capacity to change too quickly. .</p>
<h3 id="tolerance"><code>tolerance</code></h3>
<p>The parameter <code>tolerance</code> is the maximum difference between each time the virtual capacity rate is applied and the last time. This value can prevent the node&rsquo;s Allocatable from rising too quickly.</p>
<h3 id="cpumaxusage"><code>cpuMaxUsage</code></h3>
<p>The parameter <code>cpuMaxUsage</code> refers to the maximum CPU utilization. When the CPU utilization of a node is greater than this value, new Pods will no longer be scheduled.</p>
<h3 id="maxvalue-and-minvalue"><code>maxValue</code> and <code>minValue</code></h3>
<p>The parameters <code>maxValue</code> and <code>minValue</code> are the maximum and minimum values ​​of the virtual capacity rate. The default value of <code>minValue</code> is 1.</p>
<p>The virtual capacity rate is the ratio of the node&rsquo;s <code>Allocatable</code> to the node&rsquo;s original <code>Allocatable</code>.</p>
<h3 id="resourcereservation"><code>resourceReservation</code></h3>
<p>The parameter <code>resourceReservation</code> is the resource reserved when calculating the virtual capacity rate. The default value of the parameter is empty.</p>
<p>When the parameter default value is empty, the engine will obtain the KubeletConfiguration of the node from the node in the node pool and obtain the corresponding value from the KubeletConfiguration.</p>
<h3 id="resourcereservationkubereserved-and-resourcereservationsystemreserved"><code>resourceReservation.kubeReserved</code> and <code>resourceReservation.systemReserved</code></h3>
<p>The parameters <code>resourceReservation.kubeReserved</code> and <code>resourceReservation.systemReserved</code> are the CPU resources reserved for kubelet and system respectively.</p>
<h3 id="resourcereservationreservedpercentage"><code>resourceReservation.reservedPercentage</code></h3>
<p>The parameter <code>resourceReservation.reservedPercentage</code> is the additional resource reserved by the engine for Pod running on the node.</p>
<h2 id="alibaba-cloud-service-provider-configuration">Alibaba Cloud Service Provider Configuration</h2>
<p>Alibaba Cloud service provider configuration provides corresponding parameters to the cloud service provider Alibaba Cloud. Examples are as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>    <span style="color:#f92672">alicloud</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">clusterId</span>: <span style="color:#ae81ff">c1234567890</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">life cycle</span>: <span style="color:#ae81ff">spot</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">resourceTagging</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div><h3 id="alicloudclusterid"><code>alicloud.clusterId</code></h3>
<p>The parameter <code>alicloud.clusterId</code> is the cluster ID of the Alibaba Cloud ACK cluster, which is generally identified by the label <code>ack.aliyun.com</code> on the node. For example:</p>
<pre tabindex="0"><code>ack.aliyun.com=c1234567890
</code></pre><p>Among them, <code>c1234567890</code> is the cluster ID.</p>
<h2 id="aws-cloud-service-provider-configuration">AWS cloud service provider configuration</h2>
<p>The AWS cloud service provider configuration provides corresponding parameters for the cloud service provider AWS. Examples are as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>    <span style="color:#f92672">aws</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">launchTemplateId</span>: <span style="color:#ae81ff">lt-</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">launchTemplateVersion</span>: <span style="color:#ae81ff">spot</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">instanceReadyTimeout</span>: <span style="color:#ae81ff">2m</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">resourceTagging</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div><h3 id="awslaunchtemplateid-and-awslaunchtemplateversion"><code>aws.launchTemplateId</code> and <code>aws.launchTemplateVersion</code></h3>
<p>The parameters <code>aws.launchTemplateId</code> and <code>aws.launchTemplateVersion</code> are the AWS launch template ID and template version values ​​respectively, which are used to configure startup during the expansion process.template.</p>
<p>With this parameter, the engine can use the AWS Fleet API to expand the node pool to the desired capacity in one go.</p>
<p>The values ​​of parameters <code>aws.launchTemplateId</code> and <code>aws.launchTemplateVersion</code> can be obtained in two ways:</p>
<ul>
<li>Obtained through the Launch Templates page in the AWS EC2 console.</li>
<li>Via CLI command in <a href="https://docs.aws.amazon.com/cli/latest/reference/ec2/create-launch-template.html">Create Launch Template</a>
Or get it from the <code>LatestVersionNumber</code> or <code>DefaultVersionNumber</code> returned in the AWS API.</li>
</ul>
<h3 id="awsinstancereadytimeout"><code>aws.instanceReadyTimeout</code></h3>
<p>The parameter <code>aws.instanceReadyTimeout</code> is the timeout period to wait for the EC2 instance to be ready when using the AWS Fleet API to expand the node pool at one time.</p>
<p>This parameter is optional and the default value is 1 minute.</p>
<!-- This is an optional field. The default value is 1 minute.

When using the one-shot capacity acquisition for AWS (see `aws.launch_template_id`), this is the maximum amount of time
that Escalator will block waiting for new EC2 instances to become ready so that they can be added to the node group.
This roughly corresponds to the amount of time it takes an instance to boot to multi-user mode and for the EC2 control
plane to notice that it is healthy. This generally takes much less than a minute.

**Note:** Escalator will block other scaling operations for, at most, this amount of time while new capacity comes
online. -->
<h3 id="awslifecyle"><code>aws.lifecyle</code></h3>
<p>The parameter <code>aws.lifecyle</code> specifies the life cycle of the instance, and its value is <code>on-demand</code> or <code>spot</code> or <code>on-demand,spot</code>.</p>
<p>This parameter is optional and the default value is <code>on-demand</code>.</p>
<p><code>on-demand</code> instructs the engine to use on-demand instances when scaling up, and <code>spot</code> instructs the engine to use spot instances when scaling up.</p>
<h3 id="awsinstancetypeoverrides"><code>aws.instanceTypeOverrides</code></h3>
<p>The parameter <code>aws.lifecyle</code> specifies the type of instance. This parameter is optional and has no default value.</p>
<p>When the engine creates an expansion request, it can use multiple instance types specified by the parameter <code>aws.lifecyle</code> to increase the probability of successful expansion.</p>
<h3 id="awsresourcetagging"><code>aws.resourceTagging</code></h3>
<p>The parameter <code>aws.resourceTagging</code> indicates whether to add resource tags to the nodes managed by the engine <code>autoscaling.wiseinf.com\enabled</code>:<code>true</code>.</p>
<p>This label does not affect any functions of the engine. It is mainly used to facilitate the management of EC2 instances using labels. For details, please refer to <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html">Using Tags</a>.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-db1b774ac87b4e433a86ed299f8a808f">3.5 - Monitoring</h1>
    <div class="lead">Describes Ruyi: monitoring mechanism related to cloud native scaling engine</div>
	

<div class="pageinfo pageinfo-primary">
<p>Ruyi: Cloud native cluster expansion and contraction engine monitoring.</p>

</div>

<h2 id="monitoring">Monitoring</h2>
<p>The cloud native expansion and contraction engine provides a series of monitoring indicators and supports monitoring through Prometheus/Thanos.</p>
<h3 id="metrics">Metrics</h3>
<table>
<thead>
<tr>
<th>Metrics Name</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ruyi_autoscaling_run_count</td>
<td>None</td>
<td>Number of automatic scaling runs</td>
</tr>
<tr>
<td>ruyi_nodegroup_nodes</td>
<td>nodegroup: node group name<br/>type: node type</td>
<td>number of nodes of each type in the node group</td>
</tr>
<tr>
<td>ruyi_nodegroup_pods</td>
<td>nodegroup: node group name</td>
<td>number of pods of each type in the node group</td>
</tr>
<tr>
<td>ruyi_nodegroup_request</td>
<td>nodegroup: node group name<br/> resource: resource type</td>
<td>node group request volume</td>
</tr>
<tr>
<td>ruyi_nodegroup_capacity</td>
<td>nodegroup: node group name<br/> resource: resource type</td>
<td>node group capacity</td>
</tr>
<tr>
<td>ruyi_nodegroup_percent</td>
<td>nodegroup: node group name<br/> resource: resource type</td>
<td>node group request percentage</td>
</tr>
<tr>
<td>ruyi_nodegroup_scale_delta</td>
<td>nodegroup: node group name</td>
<td>node group node adjustment amount</td>
</tr>
<tr>
<td>ruyi_nodegroup_size</td>
<td>nodegroup: node group name<br/> id: node group ID <br/> cloud_provider: cloud service provider <br/> type: type</td>
<td>node group size</td>
</tr>
</tbody>
</table>
<h3 id="virtual-capacity-indicator">Virtual capacity indicator</h3>
<table>
<thead>
<tr>
<th>Indicator name</th>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ruyi_virtual_capacity_run_count</td>
<td></td>
<td>Number of virtual capacity runs</td>
</tr>
<tr>
<td>ruyi_node_request_sum</td>
<td>node: node name<br/> id: node group ID <br/> nodegroup: node group name<br/> resource: resource type</td>
<td>node request volume</td>
</tr>
<tr>
<td>ruyi_node_allocatable</td>
<td>node: node name<br/> id: node group ID <br/> nodegroup: node group name<br/> resource: resource type</td>
<td>node virtual capacity Allocatable</td>
</tr>
<tr>
<td>ruyi_virtual_capacity_ratio</td>
<td>node: node name<br/> id: node group ID <br/> nodegroup: node group name<br/> type: type</td>
<td>virtual capacity ratio</td>
</tr>
</tbody>
</table>
<p>In addition, users can also view changes in actual virtual capacity through the Kubernetes indicator <code>kube_node_status_allocatable</code>.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-583a7f09d0feaa261a5b4bd84a75d62a">3.6 - FAQ</h1>
    <div class="lead">Using Ruyi: Common problems and troubleshooting procedures for cloud native cluster expansion and contraction engines.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Using Ruyi: Common problems and troubleshooting procedures for cloud native cluster expansion and contraction engines.</p>

</div>

<p>Updating, please wait.</p>
<!-- ## Question 1:

## Question 2:

## Question 3: -->
</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="帮助和支持" aria-label="帮助和支持">
    <a class="text-white" target="_blank" rel="noopener" href="mailto:help@wiseinf.com?subject=%e5%b8%ae%e5%8a%a9%e5%92%8c%e6%94%af%e6%8c%81" aria-label="帮助和支持">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="商务合作" aria-label="商务合作">
    <a class="text-white" target="_blank" rel="noopener" href="mailto:business@wiseinf.com?subject=%e5%95%86%e5%8a%a1%e5%90%88%e4%bd%9c" aria-label="商务合作">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="网站源码" aria-label="网站源码">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/wiseinf/wiseinf.github.io" aria-label="网站源码">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2024 Wiseinf Inc. All Rights Reserved</small>
        
        
        
	
		<p class="mt-2"><a href="/about/">About Us</a></p>
	
      </div>
    </div>
  </div>
</footer>

    </div>
    
<script src="/local/cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="/local/stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>











<script src="/js/main.min.604e1b596f799449dffc6f056b597a5d8c1bfedb73f2844175ff85802887b69d.js" integrity="sha256-YE4bWW95lEnf/G8Fa1l6XYwb/ttz8oRBdf&#43;FgCiHtp0=" crossorigin="anonymous"></script>




  </body>
</html>
